(function(R,I){typeof exports=="object"&&typeof module<"u"?I(exports):typeof define=="function"&&define.amd?define(["exports"],I):(R=typeof globalThis<"u"?globalThis:R||self,I(R.B24Js=R.B24Js||{}))})(this,(function(R){"use strict";var I=(r=>(r.desktop="desktop",r.log="log",r.info="info",r.warn="warn",r.error="error",r.trace="trace",r))(I||{});const je=new Map;je.set("title",["%c#title#","color: #959ca4; font-style: italic; padding: 0 6px; border-top: 1px solid #ccc; border-left: 1px solid #ccc; border-bottom: 1px solid #ccc"]),je.set("desktop",["%cDESKTOP","color: white; font-style: italic; background-color: #29619b; padding: 0 6px; border: 1px solid #29619b"]),je.set("log",["%cLOG","color: #2a323b; font-style: italic; background-color: #ccc; padding: 0 6px; border: 1px solid #ccc"]),je.set("info",["%cINFO","color: #fff; font-style: italic; background-color: #6b7f96; padding: 0 6px; border: 1px solid #6b7f96"]),je.set("warn",["%cWARNING","color: #f0a74f; font-style: italic; padding: 0 6px; border: 1px solid #f0a74f"]),je.set("error",["%cERROR","color: white; font-style: italic; background-color: #8a3232; padding: 0 6px; border: 1px solid #8a3232"]),je.set("trace",["%cTRACE","color: #2a323b; font-style: italic; background-color: #ccc; padding: 0 6px; border: 1px solid #ccc"]);class we{#e;#t={desktop:!0,log:!1,info:!1,warn:!1,error:!0,trace:!0};static build(e,t=!1){const n=new we(e);return t&&(n.enable("log"),n.enable("info"),n.enable("warn")),n}constructor(e){this.#e=e}#r(e){const t=[],n=[];if(je.has("title")){const s=je.get("title");s[0]&&(t.push(s[0].replace("#title#",this.#e)),n.push(s[1]||""))}if(je.has(e)){const s=je.get(e);s[0]&&(t.push(s[0]),n.push(s[1]||""))}return[t.join(""),...n]}setConfig(e){for(const t in e)this.#t[t]=e[t]}enable(e){return typeof this.#t[e]>"u"?!1:(this.#t[e]=!0,!0)}disable(e){return typeof this.#t[e]>"u"?!1:(this.#t[e]=!1,!0)}isEnabled(e){return this.#t[e]}desktop(...e){this.isEnabled("desktop")&&console.log(...this.#r("desktop"),...e)}log(...e){this.isEnabled("log")&&console.log(...this.#r("log"),...e)}info(...e){this.isEnabled("info")&&console.info(...this.#r("info"),...e)}warn(...e){this.isEnabled("warn")&&console.warn(...this.#r("warn"),...e)}error(...e){this.isEnabled("error")&&console.error(...this.#r("error"),...e)}trace(...e){this.isEnabled("trace")&&console.trace(...this.#r("trace"),...e)}}var Yn=(r=>(r.undefined="undefined",r.any="any",r.integer="integer",r.boolean="boolean",r.double="double",r.date="date",r.datetime="datetime",r.string="string",r.text="text",r.file="file",r.array="array",r.object="object",r.user="user",r.location="location",r.crmCategory="crm_category",r.crmStatus="crm_status",r.crmCurrency="crm_currency",r))(Yn||{});const aa=Function.prototype.toString.call(Object);class la{getTag(e){return Object.prototype.toString.call(e)}isString(e){return typeof e=="string"||e instanceof String}isStringFilled(e){return this.isString(e)&&e!==""}isFunction(e){return e===null?!1:typeof e=="function"||e instanceof Function}isObject(e){return!!e&&(typeof e=="object"||typeof e=="function")}isObjectLike(e){return!!e&&typeof e=="object"}isPlainObject(e){if(!this.isObjectLike(e)||this.getTag(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);if(t===null)return!0;const n=t.hasOwnProperty("constructor")&&t.constructor;return typeof n=="function"&&Function.prototype.toString.call(n)===aa}isJsonRpcRequest(e){return typeof e=="object"&&e&&"jsonrpc"in e&&this.isStringFilled(e.jsonrpc)&&"method"in e&&this.isStringFilled(e.method)}isJsonRpcResponse(e){return typeof e=="object"&&e&&"jsonrpc"in e&&this.isStringFilled(e.jsonrpc)&&"id"in e&&("result"in e||"error"in e)}isBoolean(e){return e===!0||e===!1}isNumber(e){return typeof e=="number"&&!Number.isNaN(e)}isInteger(e){return Number.isInteger(e)}isFloat(e){return this.isNumber(e)&&!this.isInteger(e)}isNil(e){return e==null}isArray(e){return!this.isNil(e)&&Array.isArray(e)}isArrayFilled(e){return this.isArray(e)&&e.length>0}isArrayLike(e){return!this.isNil(e)&&!this.isFunction(e)&&e.length>-1&&e.length<=Number.MAX_SAFE_INTEGER}isDate(e){return e instanceof Date}isDomNode(e){return this.isObjectLike(e)&&!this.isPlainObject(e)&&"nodeType"in e}isElementNode(e){return this.isDomNode(e)&&e.nodeType===Node.ELEMENT_NODE}isTextNode(e){return this.isDomNode(e)&&e.nodeType===Node.TEXT_NODE}isMap(e){return this.isObjectLike(e)&&this.getTag(e)==="[object Map]"}isSet(e){return this.isObjectLike(e)&&this.getTag(e)==="[object Set]"}isWeakMap(e){return this.isObjectLike(e)&&this.getTag(e)==="[object WeakMap]"}isWeakSet(e){return this.isObjectLike(e)&&this.getTag(e)==="[object WeakSet]"}isPrototype(e){return(typeof(e&&e.constructor)=="function"&&e.constructor.prototype||Object.prototype)===e}isRegExp(e){return this.isObjectLike(e)&&this.getTag(e)==="[object RegExp]"}isNull(e){return e===null}isUndefined(e){return typeof e>"u"}isArrayBuffer(e){return this.isObjectLike(e)&&this.getTag(e)==="[object ArrayBuffer]"}isTypedArray(e){const t=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)]$/;return this.isObjectLike(e)&&t.test(this.getTag(e))}isBlob(e){return this.isObjectLike(e)&&this.isNumber(e.size)&&this.isString(e.type)&&this.isFunction(e.slice)}isFile(e){return this.isBlob(e)&&this.isString(e.name)&&(this.isNumber(e.lastModified)||this.isObjectLike(e.lastModifiedDate))}isFormData(e){return typeof FormData<"u"&&e instanceof FormData?!0:this.isObjectLike(e)&&this.getTag(e)==="[object FormData]"}clone(e,t=!0){let n,s,i;if(this.isNil(e)||typeof e!="object")return e;if(this.isDomNode(e))n=e.cloneNode(t);else if(typeof e=="object")if(this.isArray(e))for(n=[],s=0,i=e.length;s<i;s++)typeof e[s]=="object"&&t?n[s]=this.clone(e[s],t):n[s]=e[s];else{n={},e.constructor&&(this.isDate(e)?n=new Date(e):n=new e.constructor);for(s in e)e.hasOwnProperty(s)&&(typeof e[s]=="object"&&t?n[s]=this.clone(e[s],t):n[s]=e[s])}else n=e;return n}}const C=new la;function ca(r,e){const t={};for(const n of e)t[n]=r[n];return t}function Kn(r,e){const t={...r};for(const n of e)delete t[n];return t}function ua(r){return Array.isArray(r[0])}function ha(r,e){return Object.values(r).includes(e)?e:void 0}class dt extends Error{}class fa extends dt{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class da extends dt{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class pa extends dt{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Et extends dt{}class Qn extends dt{constructor(e){super(`Invalid unit ${e}`)}}class be extends dt{}class at extends dt{constructor(){super("Zone is an abstract class")}}const N="numeric",Be="short",Ne="long",ar={year:N,month:N,day:N},Xn={year:N,month:Be,day:N},ga={year:N,month:Be,day:N,weekday:Be},es={year:N,month:Ne,day:N},ts={year:N,month:Ne,day:N,weekday:Ne},rs={hour:N,minute:N},ns={hour:N,minute:N,second:N},ss={hour:N,minute:N,second:N,timeZoneName:Be},is={hour:N,minute:N,second:N,timeZoneName:Ne},os={hour:N,minute:N,hourCycle:"h23"},as={hour:N,minute:N,second:N,hourCycle:"h23"},ls={hour:N,minute:N,second:N,hourCycle:"h23",timeZoneName:Be},cs={hour:N,minute:N,second:N,hourCycle:"h23",timeZoneName:Ne},us={year:N,month:N,day:N,hour:N,minute:N},hs={year:N,month:N,day:N,hour:N,minute:N,second:N},fs={year:N,month:Be,day:N,hour:N,minute:N},ds={year:N,month:Be,day:N,hour:N,minute:N,second:N},ma={year:N,month:Be,day:N,weekday:Be,hour:N,minute:N},ps={year:N,month:Ne,day:N,hour:N,minute:N,timeZoneName:Be},gs={year:N,month:Ne,day:N,hour:N,minute:N,second:N,timeZoneName:Be},ms={year:N,month:Ne,day:N,weekday:Ne,hour:N,minute:N,timeZoneName:Ne},ys={year:N,month:Ne,day:N,weekday:Ne,hour:N,minute:N,second:N,timeZoneName:Ne};class Wt{get type(){throw new at}get name(){throw new at}get ianaName(){return this.name}get isUniversal(){throw new at}offsetName(e,t){throw new at}formatOffset(e,t){throw new at}offset(e){throw new at}equals(e){throw new at}get isValid(){throw new at}}let $r=null;class lr extends Wt{static get instance(){return $r===null&&($r=new lr),$r}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Vs(e,t,n)}formatOffset(e,t){return Ht(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const Wr=new Map;function ya(r){let e=Wr.get(r);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Wr.set(r,e)),e}const wa={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function ba(r,e){const t=r.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,s,i,o,l,a,u,c]=n;return[o,s,i,l,a,u,c]}function Sa(r,e){const t=r.formatToParts(e),n=[];for(let s=0;s<t.length;s++){const{type:i,value:o}=t[s],l=wa[i];i==="era"?n[l]=o:W(l)||(n[l]=parseInt(o,10))}return n}const Vr=new Map;class Qe extends Wt{static create(e){let t=Vr.get(e);return t===void 0&&Vr.set(e,t=new Qe(e)),t}static resetCache(){Vr.clear(),Wr.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Qe.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Vs(e,t,n,this.name)}formatOffset(e,t){return Ht(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const n=ya(this.name);let[s,i,o,l,a,u,c]=n.formatToParts?Sa(n,t):ba(n,t);l==="BC"&&(s=-Math.abs(s)+1);const h=dr({year:s,month:i,day:o,hour:a===24?0:a,minute:u,second:c,millisecond:0});let p=+t;const d=p%1e3;return p-=d>=0?d:1e3+d,(h-p)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let ws={};function _a(r,e={}){const t=JSON.stringify([r,e]);let n=ws[t];return n||(n=new Intl.ListFormat(r,e),ws[t]=n),n}const qr=new Map;function zr(r,e={}){const t=JSON.stringify([r,e]);let n=qr.get(t);return n===void 0&&(n=new Intl.DateTimeFormat(r,e),qr.set(t,n)),n}const Hr=new Map;function ka(r,e={}){const t=JSON.stringify([r,e]);let n=Hr.get(t);return n===void 0&&(n=new Intl.NumberFormat(r,e),Hr.set(t,n)),n}const Jr=new Map;function va(r,e={}){const{base:t,...n}=e,s=JSON.stringify([r,n]);let i=Jr.get(s);return i===void 0&&(i=new Intl.RelativeTimeFormat(r,e),Jr.set(s,i)),i}let Vt=null;function Ea(){return Vt||(Vt=new Intl.DateTimeFormat().resolvedOptions().locale,Vt)}const Zr=new Map;function bs(r){let e=Zr.get(r);return e===void 0&&(e=new Intl.DateTimeFormat(r).resolvedOptions(),Zr.set(r,e)),e}const Gr=new Map;function Ta(r){let e=Gr.get(r);if(!e){const t=new Intl.Locale(r);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,"minimalDays"in e||(e={...Ss,...e}),Gr.set(r,e)}return e}function Oa(r){const e=r.indexOf("-x-");e!==-1&&(r=r.substring(0,e));const t=r.indexOf("-u-");if(t===-1)return[r];{let n,s;try{n=zr(r).resolvedOptions(),s=r}catch{const a=r.substring(0,t);n=zr(a).resolvedOptions(),s=a}const{numberingSystem:i,calendar:o}=n;return[s,i,o]}}function Aa(r,e,t){return(t||e)&&(r.includes("-u-")||(r+="-u"),t&&(r+=`-ca-${t}`),e&&(r+=`-nu-${e}`)),r}function Ia(r){const e=[];for(let t=1;t<=12;t++){const n=U.utc(2009,t,1);e.push(r(n))}return e}function Ca(r){const e=[];for(let t=1;t<=7;t++){const n=U.utc(2016,11,13+t);e.push(r(n))}return e}function cr(r,e,t,n){const s=r.listingMode();return s==="error"?null:s==="en"?t(e):n(e)}function Na(r){return r.numberingSystem&&r.numberingSystem!=="latn"?!1:r.numberingSystem==="latn"||!r.locale||r.locale.startsWith("en")||bs(r.locale).numberingSystem==="latn"}class Ra{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:s,floor:i,...o}=n;if(!t||Object.keys(o).length>0){const l={useGrouping:!1,...n};n.padTo>0&&(l.minimumIntegerDigits=n.padTo),this.inf=ka(e,l)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):sn(e,3);return fe(t,this.padTo)}}}class La{constructor(e,t,n){this.opts=n,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Qe.create(l).valid?(s=l,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const i={...this.opts};i.timeZone=i.timeZone||s,this.dtf=zr(t,i)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:n}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Pa{constructor(e,t,n){this.opts={style:"long",...n},!t&&Bs()&&(this.rtf=va(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):tl(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const Ss={firstDay:1,minimalDays:4,weekend:[6,7]};class Q{static fromOpts(e){return Q.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,s,i=!1){const o=e||ae.defaultLocale,l=o||(i?"en-US":Ea()),a=t||ae.defaultNumberingSystem,u=n||ae.defaultOutputCalendar,c=rn(s)||ae.defaultWeekSettings;return new Q(l,a,u,c,o)}static resetCache(){Vt=null,qr.clear(),Hr.clear(),Jr.clear(),Zr.clear(),Gr.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:s}={}){return Q.create(e,t,n,s)}constructor(e,t,n,s,i){const[o,l,a]=Oa(e);this.locale=o,this.numberingSystem=t||l||null,this.outputCalendar=n||a||null,this.weekSettings=s,this.intl=Aa(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Na(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Q.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,rn(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return cr(this,e,Hs,()=>{const n=this.intl==="ja"||this.intl.startsWith("ja-");t&=!n;const s=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";if(!this.monthsCache[i][e]){const o=n?l=>this.dtFormatter(l,s).format():l=>this.extract(l,s,"month");this.monthsCache[i][e]=Ia(o)}return this.monthsCache[i][e]})}weekdays(e,t=!1){return cr(this,e,Gs,()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=t?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=Ca(i=>this.extract(i,n,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return cr(this,void 0,()=>Ys,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[U.utc(2016,11,13,9),U.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return cr(this,e,Ks,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[U.utc(-40,1,1),U.utc(2017,1,1)].map(n=>this.extract(n,t,"era"))),this.eraCache[e]})}extract(e,t,n){const s=this.dtFormatter(e,t),i=s.formatToParts(),o=i.find(l=>l.type.toLowerCase()===n);return o?o.value:null}numberFormatter(e={}){return new Ra(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new La(e,this.intl,t)}relFormatter(e={}){return new Pa(this.intl,this.isEnglish(),e)}listFormatter(e={}){return _a(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||bs(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Us()?Ta(this.locale):Ss}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Yr=null;class Te extends Wt{static get utcInstance(){return Yr===null&&(Yr=new Te(0)),Yr}static instance(e){return e===0?Te.utcInstance:new Te(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new Te(pr(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Ht(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Ht(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return Ht(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class Da extends Wt{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function lt(r,e){if(W(r)||r===null)return e;if(r instanceof Wt)return r;if(Ua(r)){const t=r.toLowerCase();return t==="default"?e:t==="local"||t==="system"?lr.instance:t==="utc"||t==="gmt"?Te.utcInstance:Te.parseSpecifier(t)||Qe.create(r)}else return ct(r)?Te.instance(r):typeof r=="object"&&"offset"in r&&typeof r.offset=="function"?r:new Da(r)}const Kr={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},_s={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Ma=Kr.hanidec.replace(/[\[|\]]/g,"").split("");function Fa(r){let e=parseInt(r,10);if(isNaN(e)){e="";for(let t=0;t<r.length;t++){const n=r.charCodeAt(t);if(r[t].search(Kr.hanidec)!==-1)e+=Ma.indexOf(r[t]);else for(const s in _s){const[i,o]=_s[s];n>=i&&n<=o&&(e+=n-i)}}return parseInt(e,10)}else return e}const Qr=new Map;function xa(){Qr.clear()}function Ue({numberingSystem:r},e=""){const t=r||"latn";let n=Qr.get(t);n===void 0&&(n=new Map,Qr.set(t,n));let s=n.get(e);return s===void 0&&(s=new RegExp(`${Kr[t]}${e}`),n.set(e,s)),s}let ks=()=>Date.now(),vs="system",Es=null,Ts=null,Os=null,As=60,Is,Cs=null;class ae{static get now(){return ks}static set now(e){ks=e}static set defaultZone(e){vs=e}static get defaultZone(){return lt(vs,lr.instance)}static get defaultLocale(){return Es}static set defaultLocale(e){Es=e}static get defaultNumberingSystem(){return Ts}static set defaultNumberingSystem(e){Ts=e}static get defaultOutputCalendar(){return Os}static set defaultOutputCalendar(e){Os=e}static get defaultWeekSettings(){return Cs}static set defaultWeekSettings(e){Cs=rn(e)}static get twoDigitCutoffYear(){return As}static set twoDigitCutoffYear(e){As=e%100}static get throwOnInvalid(){return Is}static set throwOnInvalid(e){Is=e}static resetCaches(){Q.resetCache(),Qe.resetCache(),U.resetCache(),xa()}}class $e{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Ns=[0,31,59,90,120,151,181,212,243,273,304,334],Rs=[0,31,60,91,121,152,182,213,244,274,305,335];function De(r,e){return new $e("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${r}, which is invalid`)}function Xr(r,e,t){const n=new Date(Date.UTC(r,e-1,t));r<100&&r>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const s=n.getUTCDay();return s===0?7:s}function Ls(r,e,t){return t+(qt(r)?Rs:Ns)[e-1]}function Ps(r,e){const t=qt(r)?Rs:Ns,n=t.findIndex(i=>i<e),s=e-t[n];return{month:n+1,day:s}}function en(r,e){return(r-e+7)%7+1}function ur(r,e=4,t=1){const{year:n,month:s,day:i}=r,o=Ls(n,s,i),l=en(Xr(n,s,i),t);let a=Math.floor((o-l+14-e)/7),u;return a<1?(u=n-1,a=zt(u,e,t)):a>zt(n,e,t)?(u=n+1,a=1):u=n,{weekYear:u,weekNumber:a,weekday:l,...mr(r)}}function Ds(r,e=4,t=1){const{weekYear:n,weekNumber:s,weekday:i}=r,o=en(Xr(n,1,e),t),l=Ot(n);let a=s*7+i-o-7+e,u;a<1?(u=n-1,a+=Ot(u)):a>l?(u=n+1,a-=Ot(n)):u=n;const{month:c,day:f}=Ps(u,a);return{year:u,month:c,day:f,...mr(r)}}function tn(r){const{year:e,month:t,day:n}=r,s=Ls(e,t,n);return{year:e,ordinal:s,...mr(r)}}function Ms(r){const{year:e,ordinal:t}=r,{month:n,day:s}=Ps(e,t);return{year:e,month:n,day:s,...mr(r)}}function Fs(r,e){if(!W(r.localWeekday)||!W(r.localWeekNumber)||!W(r.localWeekYear)){if(!W(r.weekday)||!W(r.weekNumber)||!W(r.weekYear))throw new Et("Cannot mix locale-based week fields with ISO-based week fields");return W(r.localWeekday)||(r.weekday=r.localWeekday),W(r.localWeekNumber)||(r.weekNumber=r.localWeekNumber),W(r.localWeekYear)||(r.weekYear=r.localWeekYear),delete r.localWeekday,delete r.localWeekNumber,delete r.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function ja(r,e=4,t=1){const n=hr(r.weekYear),s=Me(r.weekNumber,1,zt(r.weekYear,e,t)),i=Me(r.weekday,1,7);return n?s?i?!1:De("weekday",r.weekday):De("week",r.weekNumber):De("weekYear",r.weekYear)}function Ba(r){const e=hr(r.year),t=Me(r.ordinal,1,Ot(r.year));return e?t?!1:De("ordinal",r.ordinal):De("year",r.year)}function xs(r){const e=hr(r.year),t=Me(r.month,1,12),n=Me(r.day,1,fr(r.year,r.month));return e?t?n?!1:De("day",r.day):De("month",r.month):De("year",r.year)}function js(r){const{hour:e,minute:t,second:n,millisecond:s}=r,i=Me(e,0,23)||e===24&&t===0&&n===0&&s===0,o=Me(t,0,59),l=Me(n,0,59),a=Me(s,0,999);return i?o?l?a?!1:De("millisecond",s):De("second",n):De("minute",t):De("hour",e)}function W(r){return typeof r>"u"}function ct(r){return typeof r=="number"}function hr(r){return typeof r=="number"&&r%1===0}function Ua(r){return typeof r=="string"}function $a(r){return Object.prototype.toString.call(r)==="[object Date]"}function Bs(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Us(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Wa(r){return Array.isArray(r)?r:[r]}function $s(r,e,t){if(r.length!==0)return r.reduce((n,s)=>{const i=[e(s),s];return n&&t(n[0],i[0])===n[0]?n:i},null)[1]}function Va(r,e){return e.reduce((t,n)=>(t[n]=r[n],t),{})}function Tt(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function rn(r){if(r==null)return null;if(typeof r!="object")throw new be("Week settings must be an object");if(!Me(r.firstDay,1,7)||!Me(r.minimalDays,1,7)||!Array.isArray(r.weekend)||r.weekend.some(e=>!Me(e,1,7)))throw new be("Invalid week settings");return{firstDay:r.firstDay,minimalDays:r.minimalDays,weekend:Array.from(r.weekend)}}function Me(r,e,t){return hr(r)&&r>=e&&r<=t}function qa(r,e){return r-e*Math.floor(r/e)}function fe(r,e=2){const t=r<0;let n;return t?n="-"+(""+-r).padStart(e,"0"):n=(""+r).padStart(e,"0"),n}function ut(r){if(!(W(r)||r===null||r===""))return parseInt(r,10)}function pt(r){if(!(W(r)||r===null||r===""))return parseFloat(r)}function nn(r){if(!(W(r)||r===null||r==="")){const e=parseFloat("0."+r)*1e3;return Math.floor(e)}}function sn(r,e,t="round"){const n=10**e;switch(t){case"expand":return r>0?Math.ceil(r*n)/n:Math.floor(r*n)/n;case"trunc":return Math.trunc(r*n)/n;case"round":return Math.round(r*n)/n;case"floor":return Math.floor(r*n)/n;case"ceil":return Math.ceil(r*n)/n;default:throw new RangeError(`Value rounding ${t} is out of range`)}}function qt(r){return r%4===0&&(r%100!==0||r%400===0)}function Ot(r){return qt(r)?366:365}function fr(r,e){const t=qa(e-1,12)+1,n=r+(e-t)/12;return t===2?qt(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function dr(r){let e=Date.UTC(r.year,r.month-1,r.day,r.hour,r.minute,r.second,r.millisecond);return r.year<100&&r.year>=0&&(e=new Date(e),e.setUTCFullYear(r.year,r.month-1,r.day)),+e}function Ws(r,e,t){return-en(Xr(r,1,e),t)+e-1}function zt(r,e=4,t=1){const n=Ws(r,e,t),s=Ws(r+1,e,t);return(Ot(r)-n+s)/7}function on(r){return r>99?r:r>ae.twoDigitCutoffYear?1900+r:2e3+r}function Vs(r,e,t,n=null){const s=new Date(r),i={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(i.timeZone=n);const o={timeZoneName:e,...i},l=new Intl.DateTimeFormat(t,o).formatToParts(s).find(a=>a.type.toLowerCase()==="timezonename");return l?l.value:null}function pr(r,e){let t=parseInt(r,10);Number.isNaN(t)&&(t=0);const n=parseInt(e,10)||0,s=t<0||Object.is(t,-0)?-n:n;return t*60+s}function qs(r){const e=Number(r);if(typeof r=="boolean"||r===""||!Number.isFinite(e))throw new be(`Invalid unit value ${r}`);return e}function gr(r,e){const t={};for(const n in r)if(Tt(r,n)){const s=r[n];if(s==null)continue;t[e(n)]=qs(s)}return t}function Ht(r,e){const t=Math.trunc(Math.abs(r/60)),n=Math.trunc(Math.abs(r%60)),s=r>=0?"+":"-";switch(e){case"short":return`${s}${fe(t,2)}:${fe(n,2)}`;case"narrow":return`${s}${t}${n>0?`:${n}`:""}`;case"techie":return`${s}${fe(t,2)}${fe(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function mr(r){return Va(r,["hour","minute","second","millisecond"])}const za=["January","February","March","April","May","June","July","August","September","October","November","December"],zs=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ha=["J","F","M","A","M","J","J","A","S","O","N","D"];function Hs(r){switch(r){case"narrow":return[...Ha];case"short":return[...zs];case"long":return[...za];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Js=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Zs=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Ja=["M","T","W","T","F","S","S"];function Gs(r){switch(r){case"narrow":return[...Ja];case"short":return[...Zs];case"long":return[...Js];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Ys=["AM","PM"],Za=["Before Christ","Anno Domini"],Ga=["BC","AD"],Ya=["B","A"];function Ks(r){switch(r){case"narrow":return[...Ya];case"short":return[...Ga];case"long":return[...Za];default:return null}}function Ka(r){return Ys[r.hour<12?0:1]}function Qa(r,e){return Gs(e)[r.weekday-1]}function Xa(r,e){return Hs(e)[r.month-1]}function el(r,e){return Ks(e)[r.year<0?0:1]}function tl(r,e,t="always",n=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},i=["hours","minutes","seconds"].indexOf(r)===-1;if(t==="auto"&&i){const f=r==="days";switch(e){case 1:return f?"tomorrow":`next ${s[r][0]}`;case-1:return f?"yesterday":`last ${s[r][0]}`;case 0:return f?"today":`this ${s[r][0]}`}}const o=Object.is(e,-0)||e<0,l=Math.abs(e),a=l===1,u=s[r],c=n?a?u[1]:u[2]||u[1]:a?s[r][0]:r;return o?`${l} ${c} ago`:`in ${l} ${c}`}function Qs(r,e){let t="";for(const n of r)n.literal?t+=n.val:t+=e(n.val);return t}const rl={D:ar,DD:Xn,DDD:es,DDDD:ts,t:rs,tt:ns,ttt:ss,tttt:is,T:os,TT:as,TTT:ls,TTTT:cs,f:us,ff:fs,fff:ps,ffff:ms,F:hs,FF:ds,FFF:gs,FFFF:ys};class Se{static create(e,t={}){return new Se(e,t)}static parseFormat(e){let t=null,n="",s=!1;const i=[];for(let o=0;o<e.length;o++){const l=e.charAt(o);l==="'"?((n.length>0||s)&&i.push({literal:s||/^\s+$/.test(n),val:n===""?"'":n}),t=null,n="",s=!s):s||l===t?n+=l:(n.length>0&&i.push({literal:/^\s+$/.test(n),val:n}),n=l,t=l)}return n.length>0&&i.push({literal:s||/^\s+$/.test(n),val:n}),i}static macroTokenToFormatOpts(e){return rl[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0,n=void 0){if(this.opts.forceSimple)return fe(e,t);const s={...this.opts};return t>0&&(s.padTo=t),n&&(s.signDisplay=n),this.loc.numberFormatter(s).format(e)}formatDateTimeFromString(e,t){const n=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",i=(p,d)=>this.loc.extract(e,p,d),o=p=>e.isOffsetFixed&&e.offset===0&&p.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,p.format):"",l=()=>n?Ka(e):i({hour:"numeric",hourCycle:"h12"},"dayperiod"),a=(p,d)=>n?Xa(e,p):i(d?{month:p}:{month:p,day:"numeric"},"month"),u=(p,d)=>n?Qa(e,p):i(d?{weekday:p}:{weekday:p,month:"long",day:"numeric"},"weekday"),c=p=>{const d=Se.macroTokenToFormatOpts(p);return d?this.formatWithSystemDefault(e,d):p},f=p=>n?el(e,p):i({era:p},"era"),h=p=>{switch(p){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return s?i({day:"numeric"},"day"):this.num(e.day);case"dd":return s?i({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return s?i({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?i({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return a("short",!0);case"LLLL":return a("long",!0);case"LLLLL":return a("narrow",!0);case"M":return s?i({month:"numeric"},"month"):this.num(e.month);case"MM":return s?i({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return a("short",!1);case"MMMM":return a("long",!1);case"MMMMM":return a("narrow",!1);case"y":return s?i({year:"numeric"},"year"):this.num(e.year);case"yy":return s?i({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?i({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?i({year:"numeric"},"year"):this.num(e.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(p)}};return Qs(Se.parseFormat(t),h)}formatDurationFromString(e,t){const n=this.opts.signMode==="negativeLargestOnly"?-1:1,s=c=>{switch(c[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},i=(c,f)=>h=>{const p=s(h);if(p){const d=f.isNegativeDuration&&p!==f.largestUnit?n:1;let g;return this.opts.signMode==="negativeLargestOnly"&&p!==f.largestUnit?g="never":this.opts.signMode==="all"?g="always":g="auto",this.num(c.get(p)*d,h.length,g)}else return h},o=Se.parseFormat(t),l=o.reduce((c,{literal:f,val:h})=>f?c:c.concat(h),[]),a=e.shiftTo(...l.map(s).filter(c=>c)),u={isNegativeDuration:a<0,largestUnit:Object.keys(a.values)[0]};return Qs(o,i(a,u))}}const Xs=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function At(...r){const e=r.reduce((t,n)=>t+n.source,"");return RegExp(`^${e}$`)}function It(...r){return e=>r.reduce(([t,n,s],i)=>{const[o,l,a]=i(e,s);return[{...t,...o},l||n,a]},[{},null,1]).slice(0,2)}function Ct(r,...e){if(r==null)return[null,null];for(const[t,n]of e){const s=t.exec(r);if(s)return n(s)}return[null,null]}function ei(...r){return(e,t)=>{const n={};let s;for(s=0;s<r.length;s++)n[r[s]]=ut(e[t+s]);return[n,null,t+s]}}const ti=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,nl=`(?:${ti.source}?(?:\\[(${Xs.source})\\])?)?`,an=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,ri=RegExp(`${an.source}${nl}`),ln=RegExp(`(?:[Tt]${ri.source})?`),sl=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,il=/(\d{4})-?W(\d\d)(?:-?(\d))?/,ol=/(\d{4})-?(\d{3})/,al=ei("weekYear","weekNumber","weekDay"),ll=ei("year","ordinal"),cl=/(\d{4})-(\d\d)-(\d\d)/,ni=RegExp(`${an.source} ?(?:${ti.source}|(${Xs.source}))?`),ul=RegExp(`(?: ${ni.source})?`);function Nt(r,e,t){const n=r[e];return W(n)?t:ut(n)}function hl(r,e){return[{year:Nt(r,e),month:Nt(r,e+1,1),day:Nt(r,e+2,1)},null,e+3]}function Rt(r,e){return[{hours:Nt(r,e,0),minutes:Nt(r,e+1,0),seconds:Nt(r,e+2,0),milliseconds:nn(r[e+3])},null,e+4]}function Jt(r,e){const t=!r[e]&&!r[e+1],n=pr(r[e+1],r[e+2]),s=t?null:Te.instance(n);return[{},s,e+3]}function Zt(r,e){const t=r[e]?Qe.create(r[e]):null;return[{},t,e+1]}const fl=RegExp(`^T?${an.source}$`),dl=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function pl(r){const[e,t,n,s,i,o,l,a,u]=r,c=e[0]==="-",f=a&&a[0]==="-",h=(p,d=!1)=>p!==void 0&&(d||p&&c)?-p:p;return[{years:h(pt(t)),months:h(pt(n)),weeks:h(pt(s)),days:h(pt(i)),hours:h(pt(o)),minutes:h(pt(l)),seconds:h(pt(a),a==="-0"),milliseconds:h(nn(u),f)}]}const gl={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function cn(r,e,t,n,s,i,o){const l={year:e.length===2?on(ut(e)):ut(e),month:zs.indexOf(t)+1,day:ut(n),hour:ut(s),minute:ut(i)};return o&&(l.second=ut(o)),r&&(l.weekday=r.length>3?Js.indexOf(r)+1:Zs.indexOf(r)+1),l}const ml=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function yl(r){const[,e,t,n,s,i,o,l,a,u,c,f]=r,h=cn(e,s,n,t,i,o,l);let p;return a?p=gl[a]:u?p=0:p=pr(c,f),[h,new Te(p)]}function wl(r){return r.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const bl=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Sl=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,_l=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function si(r){const[,e,t,n,s,i,o,l]=r;return[cn(e,s,n,t,i,o,l),Te.utcInstance]}function kl(r){const[,e,t,n,s,i,o,l]=r;return[cn(e,l,t,n,s,i,o),Te.utcInstance]}const vl=At(sl,ln),El=At(il,ln),Tl=At(ol,ln),Ol=At(ri),ii=It(hl,Rt,Jt,Zt),Al=It(al,Rt,Jt,Zt),Il=It(ll,Rt,Jt,Zt),Cl=It(Rt,Jt,Zt);function Nl(r){return Ct(r,[vl,ii],[El,Al],[Tl,Il],[Ol,Cl])}function Rl(r){return Ct(wl(r),[ml,yl])}function Ll(r){return Ct(r,[bl,si],[Sl,si],[_l,kl])}function Pl(r){return Ct(r,[dl,pl])}const Dl=It(Rt);function Ml(r){return Ct(r,[fl,Dl])}const Fl=At(cl,ul),xl=At(ni),jl=It(Rt,Jt,Zt);function Bl(r){return Ct(r,[Fl,ii],[xl,jl])}const oi="Invalid Duration",ai={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Ul={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...ai},Fe=146097/400,Lt=146097/4800,$l={years:{quarters:4,months:12,weeks:Fe/7,days:Fe,hours:Fe*24,minutes:Fe*24*60,seconds:Fe*24*60*60,milliseconds:Fe*24*60*60*1e3},quarters:{months:3,weeks:Fe/28,days:Fe/4,hours:Fe*24/4,minutes:Fe*24*60/4,seconds:Fe*24*60*60/4,milliseconds:Fe*24*60*60*1e3/4},months:{weeks:Lt/7,days:Lt,hours:Lt*24,minutes:Lt*24*60,seconds:Lt*24*60*60,milliseconds:Lt*24*60*60*1e3},...ai},gt=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Wl=gt.slice(0).reverse();function Xe(r,e,t=!1){const n={values:t?e.values:{...r.values,...e.values||{}},loc:r.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||r.conversionAccuracy,matrix:e.matrix||r.matrix};return new G(n)}function li(r,e){let t=e.milliseconds??0;for(const n of Wl.slice(1))e[n]&&(t+=e[n]*r[n].milliseconds);return t}function ci(r,e){const t=li(r,e)<0?-1:1;gt.reduceRight((n,s)=>{if(W(e[s]))return n;if(n){const i=e[n]*t,o=r[s][n],l=Math.floor(i/o);e[s]+=l*t,e[n]-=l*o*t}return s},null),gt.reduce((n,s)=>{if(W(e[s]))return n;if(n){const i=e[n]%1;e[n]-=i,e[s]+=i*r[n][s]}return s},null)}function ui(r){const e={};for(const[t,n]of Object.entries(r))n!==0&&(e[t]=n);return e}class G{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let n=t?$l:Ul;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||Q.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return G.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new be(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new G({values:gr(e,G.normalizeUnit),loc:Q.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(ct(e))return G.fromMillis(e);if(G.isDuration(e))return e;if(typeof e=="object")return G.fromObject(e);throw new be(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=Pl(e);return n?G.fromObject(n,t):G.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=Ml(e);return n?G.fromObject(n,t):G.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new be("need to specify a reason the Duration is invalid");const n=e instanceof $e?e:new $e(e,t);if(ae.throwOnInvalid)throw new pa(n);return new G({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new Qn(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?Se.create(this.loc,n).formatDurationFromString(this,e):oi}toHuman(e={}){if(!this.isValid)return oi;const t=e.showZeros!==!1,n=gt.map(s=>{const i=this.values[s];return W(i)||i===0&&!t?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:s.slice(0,-1)}).format(i)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=sn(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},U.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?li(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=G.fromDurationLike(e),n={};for(const s of gt)(Tt(t.values,s)||Tt(this.values,s))&&(n[s]=t.get(s)+this.get(s));return Xe(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=G.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=qs(e(this.values[n],n));return Xe(this,{values:t},!0)}get(e){return this[G.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...gr(e,G.normalizeUnit)};return Xe(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:s}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:s,conversionAccuracy:n};return Xe(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return ci(this.matrix,e),Xe(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=ui(this.normalize().shiftToAll().toObject());return Xe(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>G.normalizeUnit(o));const t={},n={},s=this.toObject();let i;for(const o of gt)if(e.indexOf(o)>=0){i=o;let l=0;for(const u in n)l+=this.matrix[u][o]*n[u],n[u]=0;ct(s[o])&&(l+=s[o]);const a=Math.trunc(l);t[o]=a,n[o]=(l*1e3-a*1e3)/1e3}else ct(s[o])&&(n[o]=s[o]);for(const o in n)n[o]!==0&&(t[i]+=o===i?n[o]:n[o]/this.matrix[i][o]);return ci(this.matrix,t),Xe(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return Xe(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=ui(this.values);return Xe(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(n,s){return n===void 0||n===0?s===void 0||s===0:n===s}for(const n of gt)if(!t(this.values[n],e.values[n]))return!1;return!0}}const Pt="Invalid Interval";function Vl(r,e){return!r||!r.isValid?le.invalid("missing or invalid start"):!e||!e.isValid?le.invalid("missing or invalid end"):e<r?le.invalid("end before start",`The end of an interval must be after its start, but you had start=${r.toISO()} and end=${e.toISO()}`):null}class le{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new be("need to specify a reason the Interval is invalid");const n=e instanceof $e?e:new $e(e,t);if(ae.throwOnInvalid)throw new da(n);return new le({invalid:n})}static fromDateTimes(e,t){const n=Kt(e),s=Kt(t),i=Vl(n,s);return i??new le({start:n,end:s})}static after(e,t){const n=G.fromDurationLike(t),s=Kt(e);return le.fromDateTimes(s,s.plus(n))}static before(e,t){const n=G.fromDurationLike(t),s=Kt(e);return le.fromDateTimes(s.minus(n),s)}static fromISO(e,t){const[n,s]=(e||"").split("/",2);if(n&&s){let i,o;try{i=U.fromISO(n,t),o=i.isValid}catch{o=!1}let l,a;try{l=U.fromISO(s,t),a=l.isValid}catch{a=!1}if(o&&a)return le.fromDateTimes(i,l);if(o){const u=G.fromISO(s,t);if(u.isValid)return le.after(i,u)}else if(a){const u=G.fromISO(n,t);if(u.isValid)return le.before(l,u)}}return le.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let s;return t?.useLocaleWeeks?s=this.end.reconfigure({locale:n.locale}):s=this.end,s=s.startOf(e,t),Math.floor(s.diff(n,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?le.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Kt).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),n=[];let{s}=this,i=0;for(;s<this.e;){const o=t[i]||this.e,l=+o>+this.e?this.e:o;n.push(le.fromDateTimes(s,l)),s=l,i+=1}return n}splitBy(e){const t=G.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:n}=this,s=1,i;const o=[];for(;n<this.e;){const l=this.start.plus(t.mapUnits(a=>a*s));i=+l>+this.e?this.e:l,o.push(le.fromDateTimes(n,i)),n=i,s+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:le.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return le.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort((s,i)=>s.s-i.s).reduce(([s,i],o)=>i?i.overlaps(o)||i.abutsStart(o)?[s,i.union(o)]:[s.concat([i]),o]:[s,o],[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const s=[],i=e.map(a=>[{time:a.s,type:"s"},{time:a.e,type:"e"}]),o=Array.prototype.concat(...i),l=o.sort((a,u)=>a.time-u.time);for(const a of l)n+=a.type==="s"?1:-1,n===1?t=a.time:(t&&+t!=+a.time&&s.push(le.fromDateTimes(t,a.time)),t=null);return le.merge(s)}difference(...e){return le.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Pt}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=ar,t={}){return this.isValid?Se.create(this.s.loc.clone(t),e).formatInterval(this):Pt}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Pt}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Pt}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Pt}toFormat(e,{separator:t=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:Pt}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):G.invalid(this.invalidReason)}mapEndpoints(e){return le.fromDateTimes(e(this.s),e(this.e))}}class yr{static hasDST(e=ae.defaultZone){const t=U.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Qe.isValidZone(e)}static normalizeZone(e){return lt(e,ae.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||Q.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||Q.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||Q.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:s=null,outputCalendar:i="gregory"}={}){return(s||Q.create(t,n,i)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:s=null,outputCalendar:i="gregory"}={}){return(s||Q.create(t,n,i)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:s=null}={}){return(s||Q.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:s=null}={}){return(s||Q.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Q.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Q.create(t,null,"gregory").eras(e)}static features(){return{relative:Bs(),localeWeek:Us()}}}function hi(r,e){const t=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=t(e)-t(r);return Math.floor(G.fromMillis(n).as("days"))}function ql(r,e,t){const n=[["years",(a,u)=>u.year-a.year],["quarters",(a,u)=>u.quarter-a.quarter+(u.year-a.year)*4],["months",(a,u)=>u.month-a.month+(u.year-a.year)*12],["weeks",(a,u)=>{const c=hi(a,u);return(c-c%7)/7}],["days",hi]],s={},i=r;let o,l;for(const[a,u]of n)t.indexOf(a)>=0&&(o=a,s[a]=u(r,e),l=i.plus(s),l>e?(s[a]--,r=i.plus(s),r>e&&(l=r,s[a]--,r=i.plus(s))):r=l);return[r,s,l,o]}function zl(r,e,t,n){let[s,i,o,l]=ql(r,e,t);const a=e-s,u=t.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);u.length===0&&(o<e&&(o=s.plus({[l]:1})),o!==s&&(i[l]=(i[l]||0)+a/(o-s)));const c=G.fromObject(i,n);return u.length>0?G.fromMillis(a,n).shiftTo(...u).plus(c):c}const Hl="missing Intl.DateTimeFormat.formatToParts support";function K(r,e=t=>t){return{regex:r,deser:([t])=>e(Fa(t))}}const fi="[ \xA0]",di=new RegExp(fi,"g");function Jl(r){return r.replace(/\./g,"\\.?").replace(di,fi)}function pi(r){return r.replace(/\./g,"").replace(di," ").toLowerCase()}function We(r,e){return r===null?null:{regex:RegExp(r.map(Jl).join("|")),deser:([t])=>r.findIndex(n=>pi(t)===pi(n))+e}}function gi(r,e){return{regex:r,deser:([,t,n])=>pr(t,n),groups:e}}function wr(r){return{regex:r,deser:([e])=>e}}function Zl(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Gl(r,e){const t=Ue(e),n=Ue(e,"{2}"),s=Ue(e,"{3}"),i=Ue(e,"{4}"),o=Ue(e,"{6}"),l=Ue(e,"{1,2}"),a=Ue(e,"{1,3}"),u=Ue(e,"{1,6}"),c=Ue(e,"{1,9}"),f=Ue(e,"{2,4}"),h=Ue(e,"{4,6}"),p=m=>({regex:RegExp(Zl(m.val)),deser:([y])=>y,literal:!0}),g=(m=>{if(r.literal)return p(m);switch(m.val){case"G":return We(e.eras("short"),0);case"GG":return We(e.eras("long"),0);case"y":return K(u);case"yy":return K(f,on);case"yyyy":return K(i);case"yyyyy":return K(h);case"yyyyyy":return K(o);case"M":return K(l);case"MM":return K(n);case"MMM":return We(e.months("short",!0),1);case"MMMM":return We(e.months("long",!0),1);case"L":return K(l);case"LL":return K(n);case"LLL":return We(e.months("short",!1),1);case"LLLL":return We(e.months("long",!1),1);case"d":return K(l);case"dd":return K(n);case"o":return K(a);case"ooo":return K(s);case"HH":return K(n);case"H":return K(l);case"hh":return K(n);case"h":return K(l);case"mm":return K(n);case"m":return K(l);case"q":return K(l);case"qq":return K(n);case"s":return K(l);case"ss":return K(n);case"S":return K(a);case"SSS":return K(s);case"u":return wr(c);case"uu":return wr(l);case"uuu":return K(t);case"a":return We(e.meridiems(),0);case"kkkk":return K(i);case"kk":return K(f,on);case"W":return K(l);case"WW":return K(n);case"E":case"c":return K(t);case"EEE":return We(e.weekdays("short",!1),1);case"EEEE":return We(e.weekdays("long",!1),1);case"ccc":return We(e.weekdays("short",!0),1);case"cccc":return We(e.weekdays("long",!0),1);case"Z":case"ZZ":return gi(new RegExp(`([+-]${l.source})(?::(${n.source}))?`),2);case"ZZZ":return gi(new RegExp(`([+-]${l.source})(${n.source})?`),2);case"z":return wr(/[a-z_+-/]{1,256}?/i);case" ":return wr(/[^\S\n\r]/);default:return p(m)}})(r)||{invalidReason:Hl};return g.token=r,g}const Yl={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Kl(r,e,t){const{type:n,value:s}=r;if(n==="literal"){const a=/^\s+$/.test(s);return{literal:!a,val:a?" ":s}}const i=e[n];let o=n;n==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=t.hour12?"hour12":"hour24");let l=Yl[o];if(typeof l=="object"&&(l=l[i]),l)return{literal:!1,val:l}}function Ql(r){return[`^${r.map(t=>t.regex).reduce((t,n)=>`${t}(${n.source})`,"")}$`,r]}function Xl(r,e,t){const n=r.match(e);if(n){const s={};let i=1;for(const o in t)if(Tt(t,o)){const l=t[o],a=l.groups?l.groups+1:1;!l.literal&&l.token&&(s[l.token.val[0]]=l.deser(n.slice(i,i+a))),i+=a}return[n,s]}else return[n,{}]}function ec(r){const e=i=>{switch(i){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,n;return W(r.z)||(t=Qe.create(r.z)),W(r.Z)||(t||(t=new Te(r.Z)),n=r.Z),W(r.q)||(r.M=(r.q-1)*3+1),W(r.h)||(r.h<12&&r.a===1?r.h+=12:r.h===12&&r.a===0&&(r.h=0)),r.G===0&&r.y&&(r.y=-r.y),W(r.u)||(r.S=nn(r.u)),[Object.keys(r).reduce((i,o)=>{const l=e(o);return l&&(i[l]=r[o]),i},{}),t,n]}let un=null;function tc(){return un||(un=U.fromMillis(1555555555555)),un}function rc(r,e){if(r.literal)return r;const t=Se.macroTokenToFormatOpts(r.val),n=bi(t,e);return n==null||n.includes(void 0)?r:n}function mi(r,e){return Array.prototype.concat(...r.map(t=>rc(t,e)))}class yi{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=mi(Se.parseFormat(t),e),this.units=this.tokens.map(n=>Gl(n,e)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){const[n,s]=Ql(this.units);this.regex=RegExp(n,"i"),this.handlers=s}}explainFromTokens(e){if(this.isValid){const[t,n]=Xl(e,this.regex,this.handlers),[s,i,o]=n?ec(n):[null,null,void 0];if(Tt(n,"a")&&Tt(n,"H"))throw new Et("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:n,result:s,zone:i,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function wi(r,e,t){return new yi(r,t).explainFromTokens(e)}function nc(r,e,t){const{result:n,zone:s,specificOffset:i,invalidReason:o}=wi(r,e,t);return[n,s,i,o]}function bi(r,e){if(!r)return null;const n=Se.create(e,r).dtFormatter(tc()),s=n.formatToParts(),i=n.resolvedOptions();return s.map(o=>Kl(o,r,i))}const hn="Invalid DateTime",Si=864e13;function Gt(r){return new $e("unsupported zone",`the zone "${r.name}" is not supported`)}function fn(r){return r.weekData===null&&(r.weekData=ur(r.c)),r.weekData}function dn(r){return r.localWeekData===null&&(r.localWeekData=ur(r.c,r.loc.getMinDaysInFirstWeek(),r.loc.getStartOfWeek())),r.localWeekData}function mt(r,e){const t={ts:r.ts,zone:r.zone,c:r.c,o:r.o,loc:r.loc,invalid:r.invalid};return new U({...t,...e,old:t})}function _i(r,e,t){let n=r-e*60*1e3;const s=t.offset(n);if(e===s)return[n,e];n-=(s-e)*60*1e3;const i=t.offset(n);return s===i?[n,s]:[r-Math.min(s,i)*60*1e3,Math.max(s,i)]}function br(r,e){r+=e*60*1e3;const t=new Date(r);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function Sr(r,e,t){return _i(dr(r),e,t)}function ki(r,e){const t=r.o,n=r.c.year+Math.trunc(e.years),s=r.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,i={...r.c,year:n,month:s,day:Math.min(r.c.day,fr(n,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=G.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=dr(i);let[a,u]=_i(l,t,r.zone);return o!==0&&(a+=o,u=r.zone.offset(a)),{ts:a,o:u}}function Dt(r,e,t,n,s,i){const{setZone:o,zone:l}=t;if(r&&Object.keys(r).length!==0||e){const a=e||l,u=U.fromObject(r,{...t,zone:a,specificOffset:i});return o?u:u.setZone(l)}else return U.invalid(new $e("unparsable",`the input "${s}" can't be parsed as ${n}`))}function _r(r,e,t=!0){return r.isValid?Se.create(Q.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(r,e):null}function pn(r,e,t){const n=r.c.year>9999||r.c.year<0;let s="";if(n&&r.c.year>=0&&(s+="+"),s+=fe(r.c.year,n?6:4),t==="year")return s;if(e){if(s+="-",s+=fe(r.c.month),t==="month")return s;s+="-"}else if(s+=fe(r.c.month),t==="month")return s;return s+=fe(r.c.day),s}function vi(r,e,t,n,s,i,o){let l=!t||r.c.millisecond!==0||r.c.second!==0,a="";switch(o){case"day":case"month":case"year":break;default:if(a+=fe(r.c.hour),o==="hour")break;if(e){if(a+=":",a+=fe(r.c.minute),o==="minute")break;l&&(a+=":",a+=fe(r.c.second))}else{if(a+=fe(r.c.minute),o==="minute")break;l&&(a+=fe(r.c.second))}if(o==="second")break;l&&(!n||r.c.millisecond!==0)&&(a+=".",a+=fe(r.c.millisecond,3))}return s&&(r.isOffsetFixed&&r.offset===0&&!i?a+="Z":r.o<0?(a+="-",a+=fe(Math.trunc(-r.o/60)),a+=":",a+=fe(Math.trunc(-r.o%60))):(a+="+",a+=fe(Math.trunc(r.o/60)),a+=":",a+=fe(Math.trunc(r.o%60)))),i&&(a+="["+r.zone.ianaName+"]"),a}const Ei={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},sc={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},ic={ordinal:1,hour:0,minute:0,second:0,millisecond:0},kr=["year","month","day","hour","minute","second","millisecond"],oc=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],ac=["year","ordinal","hour","minute","second","millisecond"];function vr(r){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[r.toLowerCase()];if(!e)throw new Qn(r);return e}function Ti(r){switch(r.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return vr(r)}}function lc(r){if(Yt===void 0&&(Yt=ae.now()),r.type!=="iana")return r.offset(Yt);const e=r.name;let t=gn.get(e);return t===void 0&&(t=r.offset(Yt),gn.set(e,t)),t}function Oi(r,e){const t=lt(e.zone,ae.defaultZone);if(!t.isValid)return U.invalid(Gt(t));const n=Q.fromObject(e);let s,i;if(W(r.year))s=ae.now();else{for(const a of kr)W(r[a])&&(r[a]=Ei[a]);const o=xs(r)||js(r);if(o)return U.invalid(o);const l=lc(t);[s,i]=Sr(r,l,t)}return new U({ts:s,zone:t,loc:n,o:i})}function Ai(r,e,t){const n=W(t.round)?!0:t.round,s=W(t.rounding)?"trunc":t.rounding,i=(l,a)=>(l=sn(l,n||t.calendary?0:2,t.calendary?"round":s),e.loc.clone(t).relFormatter(t).format(l,a)),o=l=>t.calendary?e.hasSame(r,l)?0:e.startOf(l).diff(r.startOf(l),l).get(l):e.diff(r,l).get(l);if(t.unit)return i(o(t.unit),t.unit);for(const l of t.units){const a=o(l);if(Math.abs(a)>=1)return i(a,l)}return i(r>e?-0:0,t.units[t.units.length-1])}function Ii(r){let e={},t;return r.length>0&&typeof r[r.length-1]=="object"?(e=r[r.length-1],t=Array.from(r).slice(0,r.length-1)):t=Array.from(r),[e,t]}let Yt;const gn=new Map;class U{constructor(e){const t=e.zone||ae.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new $e("invalid input"):null)||(t.isValid?null:Gt(t));this.ts=W(e.ts)?ae.now():e.ts;let s=null,i=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[s,i]=[e.old.c,e.old.o];else{const l=ct(e.o)&&!e.old?e.o:t.offset(this.ts);s=br(this.ts,l),n=Number.isNaN(s.year)?new $e("invalid input"):null,s=n?null:s,i=n?null:l}this._zone=t,this.loc=e.loc||Q.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=s,this.o=i,this.isLuxonDateTime=!0}static now(){return new U({})}static local(){const[e,t]=Ii(arguments),[n,s,i,o,l,a,u]=t;return Oi({year:n,month:s,day:i,hour:o,minute:l,second:a,millisecond:u},e)}static utc(){const[e,t]=Ii(arguments),[n,s,i,o,l,a,u]=t;return e.zone=Te.utcInstance,Oi({year:n,month:s,day:i,hour:o,minute:l,second:a,millisecond:u},e)}static fromJSDate(e,t={}){const n=$a(e)?e.valueOf():NaN;if(Number.isNaN(n))return U.invalid("invalid input");const s=lt(t.zone,ae.defaultZone);return s.isValid?new U({ts:n,zone:s,loc:Q.fromObject(t)}):U.invalid(Gt(s))}static fromMillis(e,t={}){if(ct(e))return e<-Si||e>Si?U.invalid("Timestamp out of range"):new U({ts:e,zone:lt(t.zone,ae.defaultZone),loc:Q.fromObject(t)});throw new be(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(ct(e))return new U({ts:e*1e3,zone:lt(t.zone,ae.defaultZone),loc:Q.fromObject(t)});throw new be("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=lt(t.zone,ae.defaultZone);if(!n.isValid)return U.invalid(Gt(n));const s=Q.fromObject(t),i=gr(e,Ti),{minDaysInFirstWeek:o,startOfWeek:l}=Fs(i,s),a=ae.now(),u=W(t.specificOffset)?n.offset(a):t.specificOffset,c=!W(i.ordinal),f=!W(i.year),h=!W(i.month)||!W(i.day),p=f||h,d=i.weekYear||i.weekNumber;if((p||c)&&d)throw new Et("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&c)throw new Et("Can't mix ordinal dates with month/day");const g=d||i.weekday&&!p;let m,y,w=br(a,u);g?(m=oc,y=sc,w=ur(w,o,l)):c?(m=ac,y=ic,w=tn(w)):(m=kr,y=Ei);let _=!1;for(const x of m){const J=i[x];W(J)?_?i[x]=y[x]:i[x]=w[x]:_=!0}const b=g?ja(i,o,l):c?Ba(i):xs(i),E=b||js(i);if(E)return U.invalid(E);const S=g?Ds(i,o,l):c?Ms(i):i,[v,L]=Sr(S,u,n),j=new U({ts:v,zone:n,o:L,loc:s});return i.weekday&&p&&e.weekday!==j.weekday?U.invalid("mismatched weekday",`you can't specify both a weekday of ${i.weekday} and a date of ${j.toISO()}`):j.isValid?j:U.invalid(j.invalid)}static fromISO(e,t={}){const[n,s]=Nl(e);return Dt(n,s,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,s]=Rl(e);return Dt(n,s,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,s]=Ll(e);return Dt(n,s,t,"HTTP",t)}static fromFormat(e,t,n={}){if(W(e)||W(t))throw new be("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:i=null}=n,o=Q.fromOpts({locale:s,numberingSystem:i,defaultToEN:!0}),[l,a,u,c]=nc(o,e,t);return c?U.invalid(c):Dt(l,a,n,`format ${t}`,e,u)}static fromString(e,t,n={}){return U.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,s]=Bl(e);return Dt(n,s,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new be("need to specify a reason the DateTime is invalid");const n=e instanceof $e?e:new $e(e,t);if(ae.throwOnInvalid)throw new fa(n);return new U({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=bi(e,Q.fromObject(t));return n?n.map(s=>s?s.val:null).join(""):null}static expandFormat(e,t={}){return mi(Se.parseFormat(e),Q.fromObject(t)).map(s=>s.val).join("")}static resetCache(){Yt=void 0,gn.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?fn(this).weekYear:NaN}get weekNumber(){return this.isValid?fn(this).weekNumber:NaN}get weekday(){return this.isValid?fn(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?dn(this).weekday:NaN}get localWeekNumber(){return this.isValid?dn(this).weekNumber:NaN}get localWeekYear(){return this.isValid?dn(this).weekYear:NaN}get ordinal(){return this.isValid?tn(this.c).ordinal:NaN}get monthShort(){return this.isValid?yr.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?yr.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?yr.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?yr.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=dr(this.c),s=this.zone.offset(n-e),i=this.zone.offset(n+e),o=this.zone.offset(n-s*t),l=this.zone.offset(n-i*t);if(o===l)return[this];const a=n-o*t,u=n-l*t,c=br(a,o),f=br(u,l);return c.hour===f.hour&&c.minute===f.minute&&c.second===f.second&&c.millisecond===f.millisecond?[mt(this,{ts:a}),mt(this,{ts:u})]:[this]}get isInLeapYear(){return qt(this.year)}get daysInMonth(){return fr(this.year,this.month)}get daysInYear(){return this.isValid?Ot(this.year):NaN}get weeksInWeekYear(){return this.isValid?zt(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?zt(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:s}=Se.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:s}}toUTC(e=0,t={}){return this.setZone(Te.instance(e),t)}toLocal(){return this.setZone(ae.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if(e=lt(e,ae.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(t||n){const i=e.offset(this.ts),o=this.toObject();[s]=Sr(o,i,e)}return mt(this,{ts:s,zone:e})}else return U.invalid(Gt(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){const s=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n});return mt(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=gr(e,Ti),{minDaysInFirstWeek:n,startOfWeek:s}=Fs(t,this.loc),i=!W(t.weekYear)||!W(t.weekNumber)||!W(t.weekday),o=!W(t.ordinal),l=!W(t.year),a=!W(t.month)||!W(t.day),u=l||a,c=t.weekYear||t.weekNumber;if((u||o)&&c)throw new Et("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&o)throw new Et("Can't mix ordinal dates with month/day");let f;i?f=Ds({...ur(this.c,n,s),...t},n,s):W(t.ordinal)?(f={...this.toObject(),...t},W(t.day)&&(f.day=Math.min(fr(f.year,f.month),f.day))):f=Ms({...tn(this.c),...t});const[h,p]=Sr(f,this.o,this.zone);return mt(this,{ts:h,o:p})}plus(e){if(!this.isValid)return this;const t=G.fromDurationLike(e);return mt(this,ki(this,t))}minus(e){if(!this.isValid)return this;const t=G.fromDurationLike(e).negate();return mt(this,ki(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const n={},s=G.normalizeUnit(e);switch(s){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(s==="weeks")if(t){const i=this.loc.getStartOfWeek(),{weekday:o}=this;o<i&&(n.weekNumber=this.weekNumber-1),n.weekday=i}else n.weekday=1;if(s==="quarters"){const i=Math.ceil(this.month/3);n.month=(i-1)*3+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?Se.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):hn}toLocaleString(e=ar,t={}){return this.isValid?Se.create(this.loc.clone(t),e).formatDateTime(this):hn}toLocaleParts(e={}){return this.isValid?Se.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:s=!0,extendedZone:i=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=vr(o);const l=e==="extended";let a=pn(this,l,o);return kr.indexOf(o)>=3&&(a+="T"),a+=vi(this,l,t,n,s,i,o),a}toISODate({format:e="extended",precision:t="day"}={}){return this.isValid?pn(this,e==="extended",vr(t)):null}toISOWeekDate(){return _r(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:s=!1,extendedZone:i=!1,format:o="extended",precision:l="milliseconds"}={}){return this.isValid?(l=vr(l),(s&&kr.indexOf(l)>=3?"T":"")+vi(this,o==="extended",t,e,n,i,l)):null}toRFC2822(){return _r(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return _r(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?pn(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let s="HH:mm:ss.SSS";return(t||e)&&(n&&(s+=" "),t?s+="z":e&&(s+="ZZ")),_r(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():hn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return G.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...n},i=Wa(t).map(G.normalizeUnit),o=e.valueOf()>this.valueOf(),l=o?this:e,a=o?e:this,u=zl(l,a,i,s);return o?u.negate():u}diffNow(e="milliseconds",t={}){return this.diff(U.now(),e,t)}until(e){return this.isValid?le.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const s=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(t,n)<=s&&s<=i.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||U.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],i=e.unit;return Array.isArray(e.unit)&&(s=e.unit,i=void 0),Ai(t,this.plus(n),{...e,numeric:"always",units:s,unit:i})}toRelativeCalendar(e={}){return this.isValid?Ai(e.base||U.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(U.isDateTime))throw new be("min requires all arguments be DateTimes");return $s(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(U.isDateTime))throw new be("max requires all arguments be DateTimes");return $s(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:s=null,numberingSystem:i=null}=n,o=Q.fromOpts({locale:s,numberingSystem:i,defaultToEN:!0});return wi(o,e,t)}static fromStringExplain(e,t,n={}){return U.fromFormatExplain(e,t,n)}static buildFormatParser(e,t={}){const{locale:n=null,numberingSystem:s=null}=t,i=Q.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return new yi(i,e)}static fromFormatParser(e,t,n={}){if(W(e)||W(t))throw new be("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:i=null}=n,o=Q.fromOpts({locale:s,numberingSystem:i,defaultToEN:!0});if(!o.equals(t.locale))throw new be(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${t.locale}`);const{result:l,zone:a,specificOffset:u,invalidReason:c}=t.explainFromTokens(e);return c?U.invalid(c):Dt(l,a,n,`format ${t.format}`,e,u)}static get DATE_SHORT(){return ar}static get DATE_MED(){return Xn}static get DATE_MED_WITH_WEEKDAY(){return ga}static get DATE_FULL(){return es}static get DATE_HUGE(){return ts}static get TIME_SIMPLE(){return rs}static get TIME_WITH_SECONDS(){return ns}static get TIME_WITH_SHORT_OFFSET(){return ss}static get TIME_WITH_LONG_OFFSET(){return is}static get TIME_24_SIMPLE(){return os}static get TIME_24_WITH_SECONDS(){return as}static get TIME_24_WITH_SHORT_OFFSET(){return ls}static get TIME_24_WITH_LONG_OFFSET(){return cs}static get DATETIME_SHORT(){return us}static get DATETIME_SHORT_WITH_SECONDS(){return hs}static get DATETIME_MED(){return fs}static get DATETIME_MED_WITH_SECONDS(){return ds}static get DATETIME_MED_WITH_WEEKDAY(){return ma}static get DATETIME_FULL(){return ps}static get DATETIME_FULL_WITH_SECONDS(){return gs}static get DATETIME_HUGE(){return ms}static get DATETIME_HUGE_WITH_SECONDS(){return ys}}function Kt(r){if(U.isDateTime(r))return r;if(r&&r.valueOf&&ct(r.valueOf()))return U.fromJSDate(r);if(r&&typeof r=="object")return U.fromObject(r);throw new be(`Unknown datetime argument: ${r}, of type ${typeof r}`)}const me=[];for(let r=0;r<256;++r)me.push((r+256).toString(16).slice(1));function cc(r,e,t,n){return()=>{r|=0,e|=0,t|=0,n|=0;const s=(r+e|0)+n|0;return n=n+1|0,r=e^e>>>9,e=t+(t<<3)|0,t=(t<<21|t>>>11)+s|0,s>>>0}}function uc(){const r=new Uint8Array(16),e=BigInt(Date.now()),t=BigInt(Math.floor(performance.now()*1e3)%65535),n=e<<16n|t;r[0]=Number(n>>40n&0xffn),r[1]=Number(n>>32n&0xffn),r[2]=Number(n>>24n&0xffn),r[3]=Number(n>>16n&0xffn),r[4]=Number(n>>8n&0xffn),r[5]=Number(n&0xffn);const s=(Math.random()*4294967295^Date.now()^performance.now())>>>0,i=cc(2654435769,608135816,3084996962,s),o=new DataView(r.buffer);return o.setUint32(6,i()),o.setUint32(10,i()),o.setUint16(14,i()),r[6]=112|r[6]&15,r[8]=128|r[8]&63,(me[r[0]]+me[r[1]]+me[r[2]]+me[r[3]]+"-"+me[r[4]]+me[r[5]]+"-"+me[r[6]]+me[r[7]]+"-"+me[r[8]]+me[r[9]]+"-"+me[r[10]]+me[r[11]]+me[r[12]]+me[r[13]]+me[r[14]]+me[r[15]]).toLowerCase()}const hc=/[&<>'"]/g,fc=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34)/g,dc={"&":"&amp","<":"&lt",">":"&gt","'":"&#39",'"':"&quot"},pc={"&amp":"&","&#38":"&","&lt":"<","&#60":"<","&gt":">","&#62":">","&apos":"'","&#39":"'","&quot":'"',"&#34":'"'};class gc{getRandom(e=8){return[...Array(e)].map(()=>Math.trunc(Math.random()*36).toString(36)).join("")}getUniqId(){return"xxxxxxxx-xlsx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.trunc(Math.random()*16);return(e==="x"?t:t&3|8).toString(16)})}getUuidRfc4122(){return uc()}encode(e){return C.isString(e)?e.replace(hc,t=>dc[t]):e}decode(e){return C.isString(e)?e.replace(fc,t=>pc[t]):e}toNumber(e){const t=Number.parseFloat(e);return C.isNumber(t)?t:0}toInteger(e){return this.toNumber(Number.parseInt(e,10))}toBoolean(e,t=[]){const n=C.isString(e)?e.toLowerCase():e;return["true","y","1",1,!0,...t].includes(n)}toCamelCase(e){if(!C.isStringFilled(e))return e;const t=/[-_\s]+(.)?/g;return t.test(e)?(e=e.toLowerCase(),e=e.replace(t,(n,s)=>s?s.toUpperCase():""),e[0].toLowerCase()+e.substring(1)):e.match(/^[A-Z]+$/)?e.toLowerCase():e[0].toLowerCase()+e.slice(1)}toPascalCase(e){return C.isStringFilled(e)?this.capitalize(this.toCamelCase(e)):e}toKebabCase(e){if(!C.isStringFilled(e))return e;const t=e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g);return t?t.map(n=>n.toLowerCase()).join("-"):e}capitalize(e){return C.isStringFilled(e)?e[0].toUpperCase()+e.substring(1):e}numberFormat(e,t=0,n=".",s=","){const i=Number.isFinite(e)?e:0,o=Number.isFinite(t)?Math.abs(t):0,l=(o?((a,u)=>{const c=Math.pow(10,u);return Math.round(a*c)/c})(i,o):Math.round(i)).toString().split(".");return l[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,s)),(l[1]||"").length<o&&(l[1]=l[1]||"",l[1]+=new Array(o-l[1].length+1).join("0")),l.join(n)}toDateTime(e,t,n){return!(typeof t>"u")&&C.isStringFilled(t)?U.fromFormat(e,t,n):U.fromISO(e,n)}getDateForLog(){return U.now().toFormat("y-MM-dd HH:mm:ss")}buildQueryString(e){let t="";for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n];C.isArray(s)?s.forEach((i,o)=>{t+=encodeURIComponent(n+"["+o+"]")+"="+encodeURIComponent(i)+"&"}):t+=encodeURIComponent(n)+"="+encodeURIComponent(s)+"&"}return t.length>0&&(t=t.substring(0,t.length-1)),t}}const V=new gc;let pe="";try{pe=navigator?.userAgent.toLowerCase()}catch{pe="?"}let mc=class{isOpera(){return pe.includes("opera")}isIE(){return"attachEvent"in document&&!this.isOpera()}isIE6(){return pe.includes("msie 6")}isIE7(){return pe.includes("msie 7")}isIE8(){return pe.includes("msie 8")}isIE9(){return"documentMode"in document&&document.documentMode>=9}isIE10(){return"documentMode"in document&&document.documentMode>=10}isSafari(){return pe.includes("safari")&&!pe.includes("chrome")}isFirefox(){return pe.includes("firefox")}isChrome(){return pe.includes("chrome")}detectIEVersion(){if(this.isOpera()||this.isSafari()||this.isFirefox()||this.isChrome())return-1;let e=-1;if(window.MSStream&&!window.ActiveXObject&&"ActiveXObject"in window?e=11:this.isIE10()?e=10:this.isIE9()?e=9:this.isIE()&&(e=8),e===-1||e===8){if(navigator.appName==="Microsoft Internet Explorer"){const t=new RegExp("MSIE ([0-9]+[.0-9]*)"),n=navigator.userAgent.match(t);C.isArrayLike(n)&&n.length>0&&(e=Number.parseFloat(n[1]))}if(navigator.appName==="Netscape"){e=11;const t=new RegExp("Trident/.*rv:([0-9]+[.0-9]*)");if(t.exec(navigator.userAgent)!=null){const n=navigator.userAgent.match(t);C.isArrayLike(n)&&n.length>0&&(e=Number.parseFloat(n[1]))}}}return e}isIE11(){return this.detectIEVersion()>=11}isMac(){return pe.includes("macintosh")}isWin(){return pe.includes("windows")}isLinux(){return pe.includes("linux")&&!this.isAndroid()}isAndroid(){return pe.includes("android")}isIPad(){return pe.includes("ipad;")||this.isMac()&&this.isTouchDevice()}isIPhone(){return pe.includes("iphone;")}isIOS(){return this.isIPad()||this.isIPhone()}isMobile(){return this.isIPhone()||this.isIPad()||this.isAndroid()||pe.includes("mobile")||pe.includes("touch")}isRetina(){return(window.devicePixelRatio&&window.devicePixelRatio>=2)===!0}isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}isDoctype(e){const t=e||document;return t.compatMode?t.compatMode==="CSS1Compat":t.documentElement&&t.documentElement.clientHeight}isLocalStorageSupported(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch{return!1}}detectAndroidVersion(){const e=new RegExp("Android ([0-9]+[.0-9]*)");if(e.exec(navigator.userAgent)!=null){const t=navigator.userAgent.match(e);if(C.isArrayLike(t)&&t.length>0)return Number.parseFloat(t[1])}return 0}};const Ci=new mc,Ni={sleep:1e3,speed:.001,amount:30},mn={sleep:600,speed:.01,amount:150};var Ri=(r=>(r.undefined="UNDEFINED",r.lead="CRM_LEAD",r.deal="CRM_DEAL",r.contact="CRM_CONTACT",r.company="CRM_COMPANY",r.oldInvoice="CRM_INVOICE",r.invoice="CRM_SMART_INVOICE",r.quote="CRM_QUOTE",r.requisite="CRM_REQUISITE",r.order="ORDER",r))(Ri||{}),Ve=(r=>(r[r.undefined=0]="undefined",r[r.lead=1]="lead",r[r.deal=2]="deal",r[r.contact=3]="contact",r[r.company=4]="company",r[r.oldInvoice=5]="oldInvoice",r[r.invoice=31]="invoice",r[r.quote=7]="quote",r[r.requisite=8]="requisite",r[r.order=14]="order",r))(Ve||{}),yn=(r=>(r.undefined="?",r.lead="L",r.deal="D",r.contact="C",r.company="CO",r.oldInvoice="I",r.invoice="SI",r.quote="Q",r.requisite="RQ",r.order="O",r))(yn||{});function yc(r){const e=Ve[r];return yn[e]||"?"}var Li=(r=>(r[r.undefined=0]="undefined",r[r.absolute=1]="absolute",r[r.percentage=2]="percentage",r))(Li||{}),Pi=(r=>(r[r.undefined=0]="undefined",r[r.product=1]="product",r[r.service=7]="service",r[r.sku=3]="sku",r[r.skuEmpty=6]="skuEmpty",r[r.offer=4]="offer",r[r.offerEmpty=5]="offerEmpty",r))(Pi||{}),Di=(r=>(r.undefined="UNDEFINED",r.detail="DETAIL_PICTURE",r.preview="PREVIEW_PICTURE",r.morePhoto="MORE_PHOTO",r))(Di||{}),Mi=(r=>(r[r.undefined=0]="undefined",r[r.mathematical=1]="mathematical",r[r.roundingUp=2]="roundingUp",r[r.roundingDown=4]="roundingDown",r))(Mi||{}),Fi=(r=>(r.undefined="undefined",r.b24="b24",r.box="box",r))(Fi||{}),xi=(r=>(r.undefined="undefined",r.crm="crm",r.disk="disk",r.lists="lists",r))(xi||{}),ji=(r=>(r.undefined="undefined",r.lead="CCrmDocumentLead",r.company="CCrmDocumentCompany",r.contact="CCrmDocumentContact",r.deal="CCrmDocumentDeal",r.invoice="Bitrix\\Crm\\Integration\\BizProc\\Document\\SmartInvoice",r.quote="Bitrix\\Crm\\Integration\\BizProc\\Document\\Quote",r.order="Bitrix\\Crm\\Integration\\BizProc\\Document\\Order",r.dynamic="Bitrix\\Crm\\Integration\\BizProc\\Document\\Dynamic",r.disk="Bitrix\\Disk\\BizProcDocument",r.lists="BizprocDocument",r.listsList="Bitrix\\Lists\\BizprocDocumentLists",r))(ji||{});function wc(r){switch(r){case"CCrmDocumentLead":return Ve.lead;case"CCrmDocumentCompany":return Ve.company;case"CCrmDocumentContact":return Ve.contact;case"CCrmDocumentDeal":return Ve.deal;case"Bitrix\\Crm\\Integration\\BizProc\\Document\\SmartInvoice":return Ve.invoice;case"Bitrix\\Crm\\Integration\\BizProc\\Document\\Quote":return Ve.quote;case"Bitrix\\Crm\\Integration\\BizProc\\Document\\Order":return Ve.order}return Ve.undefined}function wn(r,e){let t="",n="undefined";switch(r){case"CCrmDocumentLead":n="crm",t="LEAD";break;case"CCrmDocumentCompany":n="crm",t="COMPANY";break;case"CCrmDocumentContact":n="crm",t="CONTACT";break;case"CCrmDocumentDeal":n="crm",t="DEAL";break;case"Bitrix\\Crm\\Integration\\BizProc\\Document\\SmartInvoice":n="crm",t="SMART_INVOICE";break;case"Bitrix\\Crm\\Integration\\BizProc\\Document\\Quote":n="crm",t="QUOTE";break;case"Bitrix\\Crm\\Integration\\BizProc\\Document\\Order":n="crm",t="ORDER";break;case"Bitrix\\Crm\\Integration\\BizProc\\Document\\Dynamic":if(n="crm",t=`DYNAMIC_${e||0}`,(e||0)<1)throw new Error("Need set entityId");break;case"Bitrix\\Disk\\BizProcDocument":if(n="disk",t=`STORAGE_${e||0}`,(e||0)<1)throw new Error("Need set entityId");break;case"BizprocDocument":if(n="lists",t=`iblock_${e||0}`,(e||0)<1)throw new Error("Need set entityId");break;case"Bitrix\\Lists\\BizprocDocumentLists":if(n="lists",t=`iblock_${e||0}`,(e||0)<1)throw new Error("Need set entityId");break}return[n,r,t]}function bc(r,e,t){let n="";const s=wn(r,1);switch(r){case"CCrmDocumentLead":n=`LEAD_${e}`;break;case"CCrmDocumentCompany":n=`COMPANY_${e}`;break;case"CCrmDocumentContact":n=`CONTACT_${e}`;break;case"CCrmDocumentDeal":n=`DEAL_${e}`;break;case"Bitrix\\Crm\\Integration\\BizProc\\Document\\SmartInvoice":n=`SMART_INVOICE_${e}`;break;case"Bitrix\\Crm\\Integration\\BizProc\\Document\\Quote":n=`QUOTE_${e}`;break;case"Bitrix\\Crm\\Integration\\BizProc\\Document\\Order":n=`ORDER_${e}`;break;case"Bitrix\\Crm\\Integration\\BizProc\\Document\\Dynamic":if(n=`DYNAMIC_${t||0}_${e}`,(t||0)<1)throw new Error("Need set dynamicId");break;case"Bitrix\\Disk\\BizProcDocument":n=`${e}`;break;case"BizprocDocument":n=`${e}`;break;case"Bitrix\\Lists\\BizprocDocumentLists":n=`${e}`;break}return[s[0],s[1],n]}function Sc(r){const e=wn(r,1);return[e[0],e[1]]}var ne=(r=>(r.App="app",r.Profile="profile",r.Currency="currency",r.AppOptions="appOptions",r.UserOptions="userOptions",r))(ne||{});const et={Free:"F",Demo:"D",Trial:"T",Paid:"P",Local:"L",Subscription:"S"},Bi={[et.Free]:"Free",[et.Demo]:"Demo",[et.Trial]:"Trial",[et.Paid]:"Paid",[et.Local]:"Local",[et.Subscription]:"Subscription"},yt={MainSettings:"MainSettings",UfList:"UfList",UfPage:"UfPage"};var tt=(r=>(r.NotSet="notSet",r.JsonArray="jsonArray",r.JsonObject="jsonObject",r.FloatVal="float",r.IntegerVal="integer",r.BoolYN="boolYN",r.StringVal="string",r))(tt||{}),se=(r=>(r.Undefined="undefined",r.WebSocket="webSocket",r.LongPolling="longPolling",r))(se||{}),Re=(r=>(r.PullConfig="bx-pull-config",r.WebsocketBlocked="bx-pull-websocket-blocked",r.LongPollingBlocked="bx-pull-longpolling-blocked",r.LoggingEnabled="bx-pull-logging-enabled",r))(Re||{}),Le=(r=>(r.Online="online",r.Offline="offline",r.Connecting="connect",r))(Le||{}),Er=(r=>(r[r.Unknown=0]="Unknown",r[r.Client=1]="Client",r[r.Backend=2]="Backend",r))(Er||{}),Pe=(r=>(r.Server="server",r.Client="client",r.Online="online",r.Status="status",r.Revision="revision",r))(Pe||{}),_e=(r=>(r[r.NORMAL_CLOSURE=1e3]="NORMAL_CLOSURE",r[r.SERVER_DIE=1001]="SERVER_DIE",r[r.CONFIG_REPLACED=3e3]="CONFIG_REPLACED",r[r.CHANNEL_EXPIRED=3001]="CHANNEL_EXPIRED",r[r.SERVER_RESTARTED=3002]="SERVER_RESTARTED",r[r.CONFIG_EXPIRED=3003]="CONFIG_EXPIRED",r[r.MANUAL=3004]="MANUAL",r[r.STUCK=3005]="STUCK",r[r.WRONG_CHANNEL_ID=4010]="WRONG_CHANNEL_ID",r))(_e||{}),Qt=(r=>(r.CHANNEL_EXPIRE="CHANNEL_EXPIRE",r.CONFIG_EXPIRE="CONFIG_EXPIRE",r.SERVER_RESTART="SERVER_RESTART",r))(Qt||{}),bn=(r=>(r.Shared="shared",r.Personal="personal",r))(bn||{});const Sn={Parse:{code:-32700,message:"Parse error"},InvalidRequest:{code:-32600,message:"Invalid Request"},MethodNotFound:{code:-32601,message:"Method not found"},InvalidParams:{code:-32602,message:"Invalid params"},Internal:{code:-32603,message:"Internal error"}};var Je=(r=>(r.Publish="publish",r.GetUsersLastSeen="getUsersLastSeen",r.Ping="ping",r.ListChannels="listChannels",r.SubscribeStatusChange="subscribeStatusChange",r.UnsubscribeStatusChange="unsubscribeStatusChange",r))(Je||{});class qe{_errors;_data;constructor(e){this._errors=new Map,this._data=e??null}get isSuccess(){return this._errors.size===0}get errors(){return this._errors}setData(e){return this._data=e,this}getData(){return this._data}addError(e,t){const n=t??V.getUuidRfc4122(),s=typeof e=="string"?new Error(e):e;return this._errors.set(n,s),this}addErrors(e){for(const t of e)this.addError(t);return this}getErrors(){return this._errors.values()}hasError(e){return this._errors.has(e)}getErrorMessages(){return Array.from(this._errors.values(),e=>e.message)}toString(){const e=this.isSuccess?"success":"failure",t=this.safeStringify(this._data);return this.isSuccess?`Result(${e}): ${t}`:`Result(${e}): ${t}
Errors: ${this.getErrorMessages().join(", ")}`}safeStringify(e){try{return JSON.stringify(e,this.replacer,2)}catch{return"[Unable to serialize data]"}}replacer(e,t){return t instanceof Error?{name:t.name,message:t.message,stack:t.stack}:t}static ok(e){return new qe(e)}static fail(e,t){return new qe().addError(e,t)}}class xe extends Error{code;_status;requestInfo;timestamp;originalError;constructor(e){const t=xe.formatErrorMessage(e);super(t),this.name="AjaxError",this.code=e.code,this._status=e.status,this.requestInfo=e.requestInfo,this.originalError=e.originalError,this.timestamp=new Date,this.cleanErrorStack()}get answerError(){return{error:this.message,errorDescription:""}}get status(){return this._status}set status(e){this._status=e}static fromResponse(e){return new xe({code:e.data?.error||"unknown_error",description:e.data?.error_description,status:e.status,requestInfo:{method:e.config?.method?.toUpperCase(),url:e.config?.url,params:e.config?.params}})}static fromException(e,t){return e instanceof xe?e:new xe({code:t?.code||"internal_error",status:t?.status||500,description:e instanceof Error?e.message:String(e),requestInfo:t?.requestInfo,originalError:e})}toJSON(){return{name:this.name,code:this.code,message:this.message,status:this._status,timestamp:this.timestamp.toISOString(),requestInfo:this.requestInfo,stack:this.stack}}toString(){let e=`[${this.name}] ${this.code} (${this._status}): ${this.message}`;return this.requestInfo&&(e+=`
Request: ${this.requestInfo.method} ${this.requestInfo.url}`),this.stack&&(e+=`
Stack trace:
${this.stack}`),e}static formatErrorMessage(e){const t=[e.code];return e.description&&t.push(`- ${e.description}`),e.requestInfo?.method&&e.requestInfo.url&&t.push(`(on ${e.requestInfo.method} ${e.requestInfo.url})`),t.join(" ")}cleanErrorStack(){typeof this.stack=="string"&&(this.stack=this.stack.split(`
`).filter(e=>!e.includes("AjaxError.constructor")).join(`
`))}}class Tr extends qe{_status;_query;_data;constructor(e){super(),this._data=Object.freeze(e.answer),this._query=Object.freeze(structuredClone(e.query)),this._status=e.status,this.#e()}#e(){const{error:e}=this._data;if(!e)return;const t=this.#t(e);this.addError(this.#r(t),"base-error")}#t(e){return typeof e=="string"?{code:e,description:this._data.error_description||""}:{code:e.error,description:e.error_description||""}}#r(e){return new xe({code:String(this._status),description:e.description,status:this._status,requestInfo:{method:this._query.method,params:this._query.params}})}getData(){return Object.freeze({result:this._data.result,next:this._data.next,total:this._data.total,time:this._data.time})}hasMore(){return this.isMore()}isMore(){return C.isNumber(this._data?.next)}getTotal(){return V.toInteger(this._data?.total)}getStatus(){return this._status}getQuery(){return this._query}async fetchNext(e){const t=await this.getNext(e);return t===!1?null:t}async getNext(e){if(!this.isMore()||!this.isSuccess)return!1;const t=this.#n();return e.call(t.method,t.params,t.start)}#n(){return{...this._query,start:V.toInteger(this._data.next)}}setData(){throw new ReferenceError("AjaxResult does not allow data modification")}}let _c=class{#e;#t;#r;_logger=null;constructor(){this.#e=Ni,this.#r=0,this.#t=0}setLogger(e){this._logger=e}getLogger(){return this._logger===null&&(this._logger=we.build("NullLogger"),this._logger.setConfig({[I.desktop]:!1,[I.log]:!1,[I.info]:!1,[I.warn]:!1,[I.error]:!0,[I.trace]:!1})),this._logger}get params(){return{...this.#e}}set params(e){this.#e=e,this.getLogger().log("new restriction manager params",e)}check(e=""){return new Promise(t=>{if(this.#s(),this.#o())return this.getLogger().log(`>> no sleep >>> ${e}`,this.#n()),this.#i(),t(null);{const n=i=>{this.getLogger().info(`>> go sleep >>> ${e}`,this.#n()),setTimeout(()=>{i()},this.#e.sleep)},s=()=>{if(this.#s(),this.#o())return this.getLogger().info(`<< stop sleep <<< ${e}`,this.#n()),this.#i(),t(null);n(s)};n(s)}})}#n(){return`${this.#r.toFixed(4)} from ${this.#e.amount}`}#s(){this.#t>0&&(this.#r-=(Date.now()-this.#t)*this.#e.speed,this.#r<0&&(this.#r=0)),this.#t=Date.now()}#i(){this.#r++}#o(){return this.#r<this.#e.amount}};const kc="X-Request-ID",vc="bx24_request_id",Ec="bx24_sdk_ver",Tc="bx24_sdk_type";let Oc=class{getQueryStringParameterName(){return vc}getQueryStringSdkParameterName(){return Ec}getQueryStringSdkTypeParameterName(){return Tc}generate(){return V.getUuidRfc4122()}getRequestId(){return this.generate()}getHeaderFieldName(){return kc}};function Ui(r,e){return function(){return r.apply(e,arguments)}}const{toString:Ac}=Object.prototype,{getPrototypeOf:_n}=Object,{iterator:Or,toStringTag:$i}=Symbol,Ar=(r=>e=>{const t=Ac.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ze=r=>(r=r.toLowerCase(),e=>Ar(e)===r),Ir=r=>e=>typeof e===r,{isArray:Mt}=Array,Ft=Ir("undefined");function Xt(r){return r!==null&&!Ft(r)&&r.constructor!==null&&!Ft(r.constructor)&&Oe(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const Wi=ze("ArrayBuffer");function Ic(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&Wi(r.buffer),e}const Cc=Ir("string"),Oe=Ir("function"),Vi=Ir("number"),er=r=>r!==null&&typeof r=="object",Nc=r=>r===!0||r===!1,Cr=r=>{if(Ar(r)!=="object")return!1;const e=_n(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!($i in r)&&!(Or in r)},Rc=r=>{if(!er(r)||Xt(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},Lc=ze("Date"),Pc=ze("File"),Dc=ze("Blob"),Mc=ze("FileList"),Fc=r=>er(r)&&Oe(r.pipe),xc=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||Oe(r.append)&&((e=Ar(r))==="formdata"||e==="object"&&Oe(r.toString)&&r.toString()==="[object FormData]"))},jc=ze("URLSearchParams"),[Bc,Uc,$c,Wc]=["ReadableStream","Request","Response","Headers"].map(ze),Vc=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tr(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,s;if(typeof r!="object"&&(r=[r]),Mt(r))for(n=0,s=r.length;n<s;n++)e.call(null,r[n],n,r);else{if(Xt(r))return;const i=t?Object.getOwnPropertyNames(r):Object.keys(r),o=i.length;let l;for(n=0;n<o;n++)l=i[n],e.call(null,r[l],l,r)}}function qi(r,e){if(Xt(r))return null;e=e.toLowerCase();const t=Object.keys(r);let n=t.length,s;for(;n-- >0;)if(s=t[n],e===s.toLowerCase())return s;return null}const wt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,zi=r=>!Ft(r)&&r!==wt;function kn(){const{caseless:r,skipUndefined:e}=zi(this)&&this||{},t={},n=(s,i)=>{const o=r&&qi(t,i)||i;Cr(t[o])&&Cr(s)?t[o]=kn(t[o],s):Cr(s)?t[o]=kn({},s):Mt(s)?t[o]=s.slice():(!e||!Ft(s))&&(t[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&tr(arguments[s],n);return t}const qc=(r,e,t,{allOwnKeys:n}={})=>(tr(e,(s,i)=>{t&&Oe(s)?r[i]=Ui(s,t):r[i]=s},{allOwnKeys:n}),r),zc=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),Hc=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},Jc=(r,e,t,n)=>{let s,i,o;const l={};if(e=e||{},r==null)return e;do{for(s=Object.getOwnPropertyNames(r),i=s.length;i-- >0;)o=s[i],(!n||n(o,r,e))&&!l[o]&&(e[o]=r[o],l[o]=!0);r=t!==!1&&_n(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},Zc=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},Gc=r=>{if(!r)return null;if(Mt(r))return r;let e=r.length;if(!Vi(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},Yc=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&_n(Uint8Array)),Kc=(r,e)=>{const n=(r&&r[Or]).call(r);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(r,i[0],i[1])}},Qc=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},Xc=ze("HTMLFormElement"),eu=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,s){return n.toUpperCase()+s}),Hi=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),tu=ze("RegExp"),Ji=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};tr(t,(s,i)=>{let o;(o=e(s,i,r))!==!1&&(n[i]=o||s)}),Object.defineProperties(r,n)},ru=r=>{Ji(r,(e,t)=>{if(Oe(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(Oe(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},nu=(r,e)=>{const t={},n=s=>{s.forEach(i=>{t[i]=!0})};return Mt(r)?n(r):n(String(r).split(e)),t},su=()=>{},iu=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function ou(r){return!!(r&&Oe(r.append)&&r[$i]==="FormData"&&r[Or])}const au=r=>{const e=new Array(10),t=(n,s)=>{if(er(n)){if(e.indexOf(n)>=0)return;if(Xt(n))return n;if(!("toJSON"in n)){e[s]=n;const i=Mt(n)?[]:{};return tr(n,(o,l)=>{const a=t(o,s+1);!Ft(a)&&(i[l]=a)}),e[s]=void 0,i}}return n};return t(r,0)},lu=ze("AsyncFunction"),cu=r=>r&&(er(r)||Oe(r))&&Oe(r.then)&&Oe(r.catch),Zi=((r,e)=>r?setImmediate:e?((t,n)=>(wt.addEventListener("message",({source:s,data:i})=>{s===wt&&i===t&&n.length&&n.shift()()},!1),s=>{n.push(s),wt.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Oe(wt.postMessage)),uu=typeof queueMicrotask<"u"?queueMicrotask.bind(wt):typeof process<"u"&&process.nextTick||Zi,k={isArray:Mt,isArrayBuffer:Wi,isBuffer:Xt,isFormData:xc,isArrayBufferView:Ic,isString:Cc,isNumber:Vi,isBoolean:Nc,isObject:er,isPlainObject:Cr,isEmptyObject:Rc,isReadableStream:Bc,isRequest:Uc,isResponse:$c,isHeaders:Wc,isUndefined:Ft,isDate:Lc,isFile:Pc,isBlob:Dc,isRegExp:tu,isFunction:Oe,isStream:Fc,isURLSearchParams:jc,isTypedArray:Yc,isFileList:Mc,forEach:tr,merge:kn,extend:qc,trim:Vc,stripBOM:zc,inherits:Hc,toFlatObject:Jc,kindOf:Ar,kindOfTest:ze,endsWith:Zc,toArray:Gc,forEachEntry:Kc,matchAll:Qc,isHTMLForm:Xc,hasOwnProperty:Hi,hasOwnProp:Hi,reduceDescriptors:Ji,freezeMethods:ru,toObjectSet:nu,toCamelCase:eu,noop:su,toFiniteNumber:iu,findKey:qi,global:wt,isContextDefined:zi,isSpecCompliantForm:ou,toJSONObject:au,isAsyncFn:lu,isThenable:cu,setImmediate:Zi,asap:uu,isIterable:r=>r!=null&&Oe(r[Or])};function H(r,e,t,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}k.inherits(H,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.status}}});const Gi=H.prototype,Yi={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{Yi[r]={value:r}}),Object.defineProperties(H,Yi),Object.defineProperty(Gi,"isAxiosError",{value:!0}),H.from=(r,e,t,n,s,i)=>{const o=Object.create(Gi);k.toFlatObject(r,o,function(c){return c!==Error.prototype},u=>u!=="isAxiosError");const l=r&&r.message?r.message:"Error",a=e==null&&r?r.code:e;return H.call(o,l,a,t,n,s),r&&o.cause==null&&Object.defineProperty(o,"cause",{value:r,configurable:!0}),o.name=r&&r.name||"Error",i&&Object.assign(o,i),o};const hu=null;function vn(r){return k.isPlainObject(r)||k.isArray(r)}function Ki(r){return k.endsWith(r,"[]")?r.slice(0,-2):r}function Qi(r,e,t){return r?r.concat(e).map(function(s,i){return s=Ki(s),!t&&i?"["+s+"]":s}).join(t?".":""):e}function fu(r){return k.isArray(r)&&!r.some(vn)}const du=k.toFlatObject(k,{},null,function(e){return/^is[A-Z]/.test(e)});function Nr(r,e,t){if(!k.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=k.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,m){return!k.isUndefined(m[g])});const n=t.metaTokens,s=t.visitor||c,i=t.dots,o=t.indexes,a=(t.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(e);if(!k.isFunction(s))throw new TypeError("visitor must be a function");function u(d){if(d===null)return"";if(k.isDate(d))return d.toISOString();if(k.isBoolean(d))return d.toString();if(!a&&k.isBlob(d))throw new H("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(d)||k.isTypedArray(d)?a&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function c(d,g,m){let y=d;if(d&&!m&&typeof d=="object"){if(k.endsWith(g,"{}"))g=n?g:g.slice(0,-2),d=JSON.stringify(d);else if(k.isArray(d)&&fu(d)||(k.isFileList(d)||k.endsWith(g,"[]"))&&(y=k.toArray(d)))return g=Ki(g),y.forEach(function(_,b){!(k.isUndefined(_)||_===null)&&e.append(o===!0?Qi([g],b,i):o===null?g:g+"[]",u(_))}),!1}return vn(d)?!0:(e.append(Qi(m,g,i),u(d)),!1)}const f=[],h=Object.assign(du,{defaultVisitor:c,convertValue:u,isVisitable:vn});function p(d,g){if(!k.isUndefined(d)){if(f.indexOf(d)!==-1)throw Error("Circular reference detected in "+g.join("."));f.push(d),k.forEach(d,function(y,w){(!(k.isUndefined(y)||y===null)&&s.call(e,y,k.isString(w)?w.trim():w,g,h))===!0&&p(y,g?g.concat(w):[w])}),f.pop()}}if(!k.isObject(r))throw new TypeError("data must be an object");return p(r),e}function Xi(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function En(r,e){this._pairs=[],r&&Nr(r,this,e)}const eo=En.prototype;eo.append=function(e,t){this._pairs.push([e,t])},eo.toString=function(e){const t=e?function(n){return e.call(this,n,Xi)}:Xi;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function pu(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function to(r,e,t){if(!e)return r;const n=t&&t.encode||pu;k.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let i;if(s?i=s(e,t):i=k.isURLSearchParams(e)?e.toString():new En(e,t).toString(n),i){const o=r.indexOf("#");o!==-1&&(r=r.slice(0,o)),r+=(r.indexOf("?")===-1?"?":"&")+i}return r}class ro{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){k.forEach(this.handlers,function(n){n!==null&&e(n)})}}const no={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},gu={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:En,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},Tn=typeof window<"u"&&typeof document<"u",On=typeof navigator=="object"&&navigator||void 0,mu=Tn&&(!On||["ReactNative","NativeScript","NS"].indexOf(On.product)<0),yu=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",wu=Tn&&window.location.href||"http://localhost",ke={...{__proto__:null,hasBrowserEnv:Tn,hasStandardBrowserEnv:mu,hasStandardBrowserWebWorkerEnv:yu,navigator:On,origin:wu},...gu};function bu(r,e){return Nr(r,new ke.classes.URLSearchParams,{visitor:function(t,n,s,i){return ke.isNode&&k.isBuffer(t)?(this.append(n,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function Su(r){return k.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function _u(r){const e={},t=Object.keys(r);let n;const s=t.length;let i;for(n=0;n<s;n++)i=t[n],e[i]=r[i];return e}function so(r){function e(t,n,s,i){let o=t[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),a=i>=t.length;return o=!o&&k.isArray(s)?s.length:o,a?(k.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!l):((!s[o]||!k.isObject(s[o]))&&(s[o]=[]),e(t,n,s[o],i)&&k.isArray(s[o])&&(s[o]=_u(s[o])),!l)}if(k.isFormData(r)&&k.isFunction(r.entries)){const t={};return k.forEachEntry(r,(n,s)=>{e(Su(n),s,t,0)}),t}return null}function ku(r,e,t){if(k.isString(r))try{return(e||JSON.parse)(r),k.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}const rr={transitional:no,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,i=k.isObject(e);if(i&&k.isHTMLForm(e)&&(e=new FormData(e)),k.isFormData(e))return s?JSON.stringify(so(e)):e;if(k.isArrayBuffer(e)||k.isBuffer(e)||k.isStream(e)||k.isFile(e)||k.isBlob(e)||k.isReadableStream(e))return e;if(k.isArrayBufferView(e))return e.buffer;if(k.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return bu(e,this.formSerializer).toString();if((l=k.isFileList(e))||n.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return Nr(l?{"files[]":e}:e,a&&new a,this.formSerializer)}}return i||s?(t.setContentType("application/json",!1),ku(e)):e}],transformResponse:[function(e){const t=this.transitional||rr.transitional,n=t&&t.forcedJSONParsing,s=this.responseType==="json";if(k.isResponse(e)||k.isReadableStream(e))return e;if(e&&k.isString(e)&&(n&&!this.responseType||s)){const o=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?H.from(l,H.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ke.classes.FormData,Blob:ke.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],r=>{rr.headers[r]={}});const vu=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Eu=r=>{const e={};let t,n,s;return r&&r.split(`
`).forEach(function(o){s=o.indexOf(":"),t=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!t||e[t]&&vu[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},io=Symbol("internals");function nr(r){return r&&String(r).trim().toLowerCase()}function Rr(r){return r===!1||r==null?r:k.isArray(r)?r.map(Rr):String(r)}function Tu(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const Ou=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function An(r,e,t,n,s){if(k.isFunction(n))return n.call(this,e,t);if(s&&(e=t),!!k.isString(e)){if(k.isString(n))return e.indexOf(n)!==-1;if(k.isRegExp(n))return n.test(e)}}function Au(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function Iu(r,e){const t=k.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(s,i,o){return this[n].call(this,e,s,i,o)},configurable:!0})})}let Ae=class{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function i(l,a,u){const c=nr(a);if(!c)throw new Error("header name must be a non-empty string");const f=k.findKey(s,c);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||a]=Rr(l))}const o=(l,a)=>k.forEach(l,(u,c)=>i(u,c,a));if(k.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(k.isString(e)&&(e=e.trim())&&!Ou(e))o(Eu(e),t);else if(k.isObject(e)&&k.isIterable(e)){let l={},a,u;for(const c of e){if(!k.isArray(c))throw TypeError("Object iterator must return a key-value pair");l[u=c[0]]=(a=l[u])?k.isArray(a)?[...a,c[1]]:[a,c[1]]:c[1]}o(l,t)}else e!=null&&i(t,e,n);return this}get(e,t){if(e=nr(e),e){const n=k.findKey(this,e);if(n){const s=this[n];if(!t)return s;if(t===!0)return Tu(s);if(k.isFunction(t))return t.call(this,s,n);if(k.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=nr(e),e){const n=k.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||An(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let s=!1;function i(o){if(o=nr(o),o){const l=k.findKey(n,o);l&&(!t||An(n,n[l],l,t))&&(delete n[l],s=!0)}}return k.isArray(e)?e.forEach(i):i(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const i=t[n];(!e||An(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const t=this,n={};return k.forEach(this,(s,i)=>{const o=k.findKey(n,i);if(o){t[o]=Rr(s),delete t[i];return}const l=e?Au(i):String(i).trim();l!==i&&delete t[i],t[l]=Rr(s),n[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return k.forEach(this,(n,s)=>{n!=null&&n!==!1&&(t[s]=e&&k.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[io]=this[io]={accessors:{}}).accessors,s=this.prototype;function i(o){const l=nr(o);n[l]||(Iu(s,o),n[l]=!0)}return k.isArray(e)?e.forEach(i):i(e),this}};Ae.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),k.reduceDescriptors(Ae.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}}),k.freezeMethods(Ae);function In(r,e){const t=this||rr,n=e||t,s=Ae.from(n.headers);let i=n.data;return k.forEach(r,function(l){i=l.call(t,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function oo(r){return!!(r&&r.__CANCEL__)}function xt(r,e,t){H.call(this,r??"canceled",H.ERR_CANCELED,e,t),this.name="CanceledError"}k.inherits(xt,H,{__CANCEL__:!0});function ao(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new H("Request failed with status code "+t.status,[H.ERR_BAD_REQUEST,H.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Cu(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function Nu(r,e){r=r||10;const t=new Array(r),n=new Array(r);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(a){const u=Date.now(),c=n[i];o||(o=u),t[s]=a,n[s]=u;let f=i,h=0;for(;f!==s;)h+=t[f++],f=f%r;if(s=(s+1)%r,s===i&&(i=(i+1)%r),u-o<e)return;const p=c&&u-c;return p?Math.round(h*1e3/p):void 0}}function Ru(r,e){let t=0,n=1e3/e,s,i;const o=(u,c=Date.now())=>{t=c,s=null,i&&(clearTimeout(i),i=null),r(...u)};return[(...u)=>{const c=Date.now(),f=c-t;f>=n?o(u,c):(s=u,i||(i=setTimeout(()=>{i=null,o(s)},n-f)))},()=>s&&o(s)]}const Lr=(r,e,t=3)=>{let n=0;const s=Nu(50,250);return Ru(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,a=o-n,u=s(a),c=o<=l;n=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:a,rate:u||void 0,estimated:u&&l&&c?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};r(f)},t)},lo=(r,e)=>{const t=r!=null;return[n=>e[0]({lengthComputable:t,total:r,loaded:n}),e[1]]},co=r=>(...e)=>k.asap(()=>r(...e)),Lu=ke.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,ke.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(ke.origin),ke.navigator&&/(msie|trident)/i.test(ke.navigator.userAgent)):()=>!0,Pu=ke.hasStandardBrowserEnv?{write(r,e,t,n,s,i){const o=[r+"="+encodeURIComponent(e)];k.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),k.isString(n)&&o.push("path="+n),k.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(r){const e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Du(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function Mu(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function uo(r,e,t){let n=!Du(e);return r&&(n||t==!1)?Mu(r,e):e}const ho=r=>r instanceof Ae?{...r}:r;function bt(r,e){e=e||{};const t={};function n(u,c,f,h){return k.isPlainObject(u)&&k.isPlainObject(c)?k.merge.call({caseless:h},u,c):k.isPlainObject(c)?k.merge({},c):k.isArray(c)?c.slice():c}function s(u,c,f,h){if(k.isUndefined(c)){if(!k.isUndefined(u))return n(void 0,u,f,h)}else return n(u,c,f,h)}function i(u,c){if(!k.isUndefined(c))return n(void 0,c)}function o(u,c){if(k.isUndefined(c)){if(!k.isUndefined(u))return n(void 0,u)}else return n(void 0,c)}function l(u,c,f){if(f in e)return n(u,c);if(f in r)return n(void 0,u)}const a={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,c,f)=>s(ho(u),ho(c),f,!0)};return k.forEach(Object.keys({...r,...e}),function(c){const f=a[c]||s,h=f(r[c],e[c],c);k.isUndefined(h)&&f!==l||(t[c]=h)}),t}const fo=r=>{const e=bt({},r);let{data:t,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=e;if(e.headers=o=Ae.from(o),e.url=to(uo(e.baseURL,e.url,e.allowAbsoluteUrls),r.params,r.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),k.isFormData(t)){if(ke.hasStandardBrowserEnv||ke.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(k.isFunction(t.getHeaders)){const a=t.getHeaders(),u=["content-type","content-length"];Object.entries(a).forEach(([c,f])=>{u.includes(c.toLowerCase())&&o.set(c,f)})}}if(ke.hasStandardBrowserEnv&&(n&&k.isFunction(n)&&(n=n(e)),n||n!==!1&&Lu(e.url))){const a=s&&i&&Pu.read(i);a&&o.set(s,a)}return e},Fu=typeof XMLHttpRequest<"u"&&function(r){return new Promise(function(t,n){const s=fo(r);let i=s.data;const o=Ae.from(s.headers).normalize();let{responseType:l,onUploadProgress:a,onDownloadProgress:u}=s,c,f,h,p,d;function g(){p&&p(),d&&d(),s.cancelToken&&s.cancelToken.unsubscribe(c),s.signal&&s.signal.removeEventListener("abort",c)}let m=new XMLHttpRequest;m.open(s.method.toUpperCase(),s.url,!0),m.timeout=s.timeout;function y(){if(!m)return;const _=Ae.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),E={data:!l||l==="text"||l==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:_,config:r,request:m};ao(function(v){t(v),g()},function(v){n(v),g()},E),m=null}"onloadend"in m?m.onloadend=y:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(y)},m.onabort=function(){m&&(n(new H("Request aborted",H.ECONNABORTED,r,m)),m=null)},m.onerror=function(b){const E=b&&b.message?b.message:"Network Error",S=new H(E,H.ERR_NETWORK,r,m);S.event=b||null,n(S),m=null},m.ontimeout=function(){let b=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const E=s.transitional||no;s.timeoutErrorMessage&&(b=s.timeoutErrorMessage),n(new H(b,E.clarifyTimeoutError?H.ETIMEDOUT:H.ECONNABORTED,r,m)),m=null},i===void 0&&o.setContentType(null),"setRequestHeader"in m&&k.forEach(o.toJSON(),function(b,E){m.setRequestHeader(E,b)}),k.isUndefined(s.withCredentials)||(m.withCredentials=!!s.withCredentials),l&&l!=="json"&&(m.responseType=s.responseType),u&&([h,d]=Lr(u,!0),m.addEventListener("progress",h)),a&&m.upload&&([f,p]=Lr(a),m.upload.addEventListener("progress",f),m.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(c=_=>{m&&(n(!_||_.type?new xt(null,r,m):_),m.abort(),m=null)},s.cancelToken&&s.cancelToken.subscribe(c),s.signal&&(s.signal.aborted?c():s.signal.addEventListener("abort",c)));const w=Cu(s.url);if(w&&ke.protocols.indexOf(w)===-1){n(new H("Unsupported protocol "+w+":",H.ERR_BAD_REQUEST,r));return}m.send(i||null)})},xu=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let n=new AbortController,s;const i=function(u){if(!s){s=!0,l();const c=u instanceof Error?u:this.reason;n.abort(c instanceof H?c:new xt(c instanceof Error?c.message:c))}};let o=e&&setTimeout(()=>{o=null,i(new H(`timeout ${e} of ms exceeded`,H.ETIMEDOUT))},e);const l=()=>{r&&(o&&clearTimeout(o),o=null,r.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),r=null)};r.forEach(u=>u.addEventListener("abort",i));const{signal:a}=n;return a.unsubscribe=()=>k.asap(l),a}},ju=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let n=0,s;for(;n<t;)s=n+e,yield r.slice(n,s),n=s},Bu=async function*(r,e){for await(const t of Uu(r))yield*ju(t,e)},Uu=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},po=(r,e,t,n)=>{const s=Bu(r,e);let i=0,o,l=a=>{o||(o=!0,n&&n(a))};return new ReadableStream({async pull(a){try{const{done:u,value:c}=await s.next();if(u){l(),a.close();return}let f=c.byteLength;if(t){let h=i+=f;t(h)}a.enqueue(new Uint8Array(c))}catch(u){throw l(u),u}},cancel(a){return l(a),s.return()}},{highWaterMark:2})},go=64*1024,{isFunction:Pr}=k,$u=(({Request:r,Response:e})=>({Request:r,Response:e}))(k.global),{ReadableStream:mo,TextEncoder:yo}=k.global,wo=(r,...e)=>{try{return!!r(...e)}catch{return!1}},Wu=r=>{r=k.merge.call({skipUndefined:!0},$u,r);const{fetch:e,Request:t,Response:n}=r,s=e?Pr(e):typeof fetch=="function",i=Pr(t),o=Pr(n);if(!s)return!1;const l=s&&Pr(mo),a=s&&(typeof yo=="function"?(d=>g=>d.encode(g))(new yo):async d=>new Uint8Array(await new t(d).arrayBuffer())),u=i&&l&&wo(()=>{let d=!1;const g=new t(ke.origin,{body:new mo,method:"POST",get duplex(){return d=!0,"half"}}).headers.has("Content-Type");return d&&!g}),c=o&&l&&wo(()=>k.isReadableStream(new n("").body)),f={stream:c&&(d=>d.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(d=>{!f[d]&&(f[d]=(g,m)=>{let y=g&&g[d];if(y)return y.call(g);throw new H(`Response type '${d}' is not supported`,H.ERR_NOT_SUPPORT,m)})});const h=async d=>{if(d==null)return 0;if(k.isBlob(d))return d.size;if(k.isSpecCompliantForm(d))return(await new t(ke.origin,{method:"POST",body:d}).arrayBuffer()).byteLength;if(k.isArrayBufferView(d)||k.isArrayBuffer(d))return d.byteLength;if(k.isURLSearchParams(d)&&(d=d+""),k.isString(d))return(await a(d)).byteLength},p=async(d,g)=>{const m=k.toFiniteNumber(d.getContentLength());return m??h(g)};return async d=>{let{url:g,method:m,data:y,signal:w,cancelToken:_,timeout:b,onDownloadProgress:E,onUploadProgress:S,responseType:v,headers:L,withCredentials:j="same-origin",fetchOptions:x}=fo(d),J=e||fetch;v=v?(v+"").toLowerCase():"text";let ue=xu([w,_&&_.toAbortSignal()],b),$=null;const Z=ue&&ue.unsubscribe&&(()=>{ue.unsubscribe()});let B;try{if(S&&u&&m!=="get"&&m!=="head"&&(B=await p(L,y))!==0){let ye=new t(g,{method:"POST",body:y,duplex:"half"}),q;if(k.isFormData(y)&&(q=ye.headers.get("content-type"))&&L.setContentType(q),ye.body){const[te,re]=lo(B,Lr(co(S)));y=po(ye.body,go,te,re)}}k.isString(j)||(j=j?"include":"omit");const X=i&&"credentials"in t.prototype,ie={...x,signal:ue,method:m.toUpperCase(),headers:L.normalize().toJSON(),body:y,duplex:"half",credentials:X?j:void 0};$=i&&new t(g,ie);let M=await(i?J($,x):J(g,ie));const He=c&&(v==="stream"||v==="response");if(c&&(E||He&&Z)){const ye={};["status","statusText","headers"].forEach(oe=>{ye[oe]=M[oe]});const q=k.toFiniteNumber(M.headers.get("content-length")),[te,re]=E&&lo(q,Lr(co(E),!0))||[];M=new n(po(M.body,go,te,()=>{re&&re(),Z&&Z()}),ye)}v=v||"text";let st=await f[k.findKey(f,v)||"text"](M,d);return!He&&Z&&Z(),await new Promise((ye,q)=>{ao(ye,q,{data:st,headers:Ae.from(M.headers),status:M.status,statusText:M.statusText,config:d,request:$})})}catch(X){throw Z&&Z(),X&&X.name==="TypeError"&&/Load failed|fetch/i.test(X.message)?Object.assign(new H("Network Error",H.ERR_NETWORK,d,$),{cause:X.cause||X}):H.from(X,X&&X.code,d,$)}}},Vu=new Map,bo=r=>{let e=r?r.env:{};const{fetch:t,Request:n,Response:s}=e,i=[n,s,t];let o=i.length,l=o,a,u,c=Vu;for(;l--;)a=i[l],u=c.get(a),u===void 0&&c.set(a,u=l?new Map:Wu(e)),c=u;return u};bo();const Cn={http:hu,xhr:Fu,fetch:{get:bo}};k.forEach(Cn,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const So=r=>`- ${r}`,qu=r=>k.isFunction(r)||r===null||r===!1,_o={getAdapter:(r,e)=>{r=k.isArray(r)?r:[r];const{length:t}=r;let n,s;const i={};for(let o=0;o<t;o++){n=r[o];let l;if(s=n,!qu(n)&&(s=Cn[(l=String(n)).toLowerCase()],s===void 0))throw new H(`Unknown adapter '${l}'`);if(s&&(k.isFunction(s)||(s=s.get(e))))break;i[l||"#"+o]=s}if(!s){const o=Object.entries(i).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=t?o.length>1?`since :
`+o.map(So).join(`
`):" "+So(o[0]):"as no adapter specified";throw new H("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s},adapters:Cn};function Nn(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new xt(null,r)}function ko(r){return Nn(r),r.headers=Ae.from(r.headers),r.data=In.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),_o.getAdapter(r.adapter||rr.adapter,r)(r).then(function(n){return Nn(r),n.data=In.call(r,r.transformResponse,n),n.headers=Ae.from(n.headers),n},function(n){return oo(n)||(Nn(r),n&&n.response&&(n.response.data=In.call(r,r.transformResponse,n.response),n.response.headers=Ae.from(n.response.headers))),Promise.reject(n)})}const vo="1.12.2",Dr={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{Dr[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const Eo={};Dr.transitional=function(e,t,n){function s(i,o){return"[Axios v"+vo+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(e===!1)throw new H(s(o," has been removed"+(t?" in "+t:"")),H.ERR_DEPRECATED);return t&&!Eo[o]&&(Eo[o]=!0,console.warn(s(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,o,l):!0}},Dr.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function zu(r,e,t){if(typeof r!="object")throw new H("options must be an object",H.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let s=n.length;for(;s-- >0;){const i=n[s],o=e[i];if(o){const l=r[i],a=l===void 0||o(l,i,r);if(a!==!0)throw new H("option "+i+" must be "+a,H.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new H("Unknown option "+i,H.ERR_BAD_OPTION)}}const Mr={assertOptions:zu,validators:Dr},Ze=Mr.validators;let St=class{constructor(e){this.defaults=e||{},this.interceptors={request:new ro,response:new ro}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=bt(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:i}=t;n!==void 0&&Mr.assertOptions(n,{silentJSONParsing:Ze.transitional(Ze.boolean),forcedJSONParsing:Ze.transitional(Ze.boolean),clarifyTimeoutError:Ze.transitional(Ze.boolean)},!1),s!=null&&(k.isFunction(s)?t.paramsSerializer={serialize:s}:Mr.assertOptions(s,{encode:Ze.function,serialize:Ze.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Mr.assertOptions(t,{baseUrl:Ze.spelling("baseURL"),withXsrfToken:Ze.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&k.merge(i.common,i[t.method]);i&&k.forEach(["delete","get","head","post","put","patch","common"],d=>{delete i[d]}),t.headers=Ae.concat(o,i);const l=[];let a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(t)===!1||(a=a&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let c,f=0,h;if(!a){const d=[ko.bind(this),void 0];for(d.unshift(...l),d.push(...u),h=d.length,c=Promise.resolve(t);f<h;)c=c.then(d[f++],d[f++]);return c}h=l.length;let p=t;for(;f<h;){const d=l[f++],g=l[f++];try{p=d(p)}catch(m){g.call(this,m);break}}try{c=ko.call(this,p)}catch(d){return Promise.reject(d)}for(f=0,h=u.length;f<h;)c=c.then(u[f++],u[f++]);return c}getUri(e){e=bt(this.defaults,e);const t=uo(e.baseURL,e.url,e.allowAbsoluteUrls);return to(t,e.params,e.paramsSerializer)}};k.forEach(["delete","get","head","options"],function(e){St.prototype[e]=function(t,n){return this.request(bt(n||{},{method:e,url:t,data:(n||{}).data}))}}),k.forEach(["post","put","patch"],function(e){function t(n){return function(i,o,l){return this.request(bt(l||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}St.prototype[e]=t(),St.prototype[e+"Form"]=t(!0)});let Hu=class oa{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},e(function(i,o,l){n.reason||(n.reason=new xt(i,o,l),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new oa(function(s){e=s}),cancel:e}}};function Ju(r){return function(t){return r.apply(null,t)}}function Zu(r){return k.isObject(r)&&r.isAxiosError===!0}const Rn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Rn).forEach(([r,e])=>{Rn[e]=r});function To(r){const e=new St(r),t=Ui(St.prototype.request,e);return k.extend(t,St.prototype,e,{allOwnKeys:!0}),k.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return To(bt(r,s))},t}const ce=To(rr);ce.Axios=St,ce.CanceledError=xt,ce.CancelToken=Hu,ce.isCancel=oo,ce.VERSION=vo,ce.toFormData=Nr,ce.AxiosError=H,ce.Cancel=ce.CanceledError,ce.all=function(e){return Promise.all(e)},ce.spread=Ju,ce.isAxiosError=Zu,ce.mergeConfig=bt,ce.AxiosHeaders=Ae,ce.formToJSON=r=>so(k.isHTMLForm(r)?new FormData(r):r),ce.getAdapter=_o.getAdapter,ce.HttpStatusCode=Rn,ce.default=ce;const{Axios:kf,AxiosError:Ln,CanceledError:vf,isCancel:Ef,CancelToken:Tf,VERSION:Of,all:Af,Cancel:If,isAxiosError:Cf,spread:Nf,toFormData:Rf,AxiosHeaders:Lf,HttpStatusCode:Pf,formToJSON:Df,getAdapter:Mf,mergeConfig:Ff}=ce,Gu=String.prototype.replace,Yu=/%20/g,Oo={RFC1738:"RFC1738",RFC3986:"RFC3986"},Ku={RFC1738:function(r){return Gu.call(r,Yu,"+")},RFC3986:function(r){return String(r)}},Qu=Oo.RFC1738,Xu=Oo.RFC3986,Pn=Object.prototype.hasOwnProperty,_t=Array.isArray,Ge=(function(){const r=[];for(let e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r})(),eh=function(e){for(;e.length>1;){const t=e.pop(),n=t.obj[t.prop];if(_t(n)){const s=[];for(let i=0;i<n.length;++i)typeof n[i]<"u"&&s.push(n[i]);t.obj[t.prop]=s}}},th=function(e,t){const n=t&&t.plainObjects?Object.create(null):{};for(let s=0;s<e.length;++s)typeof e[s]<"u"&&(n[s]=e[s]);return n},rh=function r(e,t,n){if(!t)return e;if(typeof t!="object"){if(_t(e))e.push(t);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Pn.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);let s=e;return _t(e)&&!_t(t)&&(s=th(e,n)),_t(e)&&_t(t)?(t.forEach(function(i,o){if(Pn.call(e,o)){const l=e[o];l&&typeof l=="object"&&i&&typeof i=="object"?e[o]=r(l,i,n):e.push(i)}else e[o]=i}),e):Object.keys(t).reduce(function(i,o){const l=t[o];return Pn.call(i,o)?i[o]=r(i[o],l,n):i[o]=l,i},s)},nh=function(r,e,t){const n=r.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Dn=1024,sh=function(e,t,n,s,i){if(e.length===0)return e;let o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let l="";for(let a=0;a<o.length;a+=Dn){const u=o.length>=Dn?o.slice(a,a+Dn):o,c=[];for(let f=0;f<u.length;++f){let h=u.charCodeAt(f);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||i===Qu&&(h===40||h===41)){c[c.length]=u.charAt(f);continue}if(h<128){c[c.length]=Ge[h];continue}if(h<2048){c[c.length]=Ge[192|h>>6]+Ge[128|h&63];continue}if(h<55296||h>=57344){c[c.length]=Ge[224|h>>12]+Ge[128|h>>6&63]+Ge[128|h&63];continue}f+=1,h=65536+((h&1023)<<10|u.charCodeAt(f)&1023),c[c.length]=Ge[240|h>>18]+Ge[128|h>>12&63]+Ge[128|h>>6&63]+Ge[128|h&63]}l+=c.join("")}return l},ih=function(e){const t=[{obj:{o:e},prop:"o"}],n=[];for(let s=0;s<t.length;++s){const i=t[s],o=i.obj[i.prop],l=Object.keys(o);for(let a=0;a<l.length;++a){const u=l[a],c=o[u];typeof c=="object"&&c!==null&&n.indexOf(c)===-1&&(t.push({obj:o,prop:u}),n.push(c))}}return eh(t),e},oh=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},ah=function(e,t){return[].concat(e,t)},Mn=function(e,t){if(_t(e)){const n=[];for(let s=0;s<e.length;s+=1)n.push(t(e[s]));return n}return t(e)},lh={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},rt=Array.isArray,ch=Array.prototype.push,Ao=function(r,e){ch.apply(r,rt(e)?e:[e])},uh=Date.prototype.toISOString,Io=Xu,Fr={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:sh,encodeValuesOnly:!1,format:Io,formatter:Ku[Io],indices:!1,serializeDate:function(e){return uh.call(e)},skipNulls:!1,strictNullHandling:!1},hh=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Fn={},Co=function(e,t,n,s,i,o,l,a,u,c,f,h,p,d,g,m,y,w){let _=e,b=w,E=0,S=!1;for(;(b=b.get(Fn))!==void 0&&!S;){const J=b.get(e);if(E+=1,typeof J<"u"){if(J===E)throw new RangeError("Cyclic object value");S=!0}typeof b.get(Fn)>"u"&&(E=0)}if(typeof c=="function"?_=c(t,_):_ instanceof Date?_=p(_):n==="comma"&&rt(_)&&(_=Mn(_,function(J){return J instanceof Date?p(J):J})),_===null){if(o)return u&&!m?u(t,Fr.encoder,y,"key",d):t;_=""}if(hh(_)||oh(_)){if(u){const J=m?t:u(t,Fr.encoder,y,"key",d);return[g(J)+"="+g(u(_,Fr.encoder,y,"value",d))]}return[g(t)+"="+g(String(_))]}const v=[];if(typeof _>"u")return v;let L;if(n==="comma"&&rt(_))m&&u&&(_=Mn(_,u)),L=[{value:_.length>0?_.join(",")||null:void 0}];else if(rt(c))L=c;else{const J=Object.keys(_);L=f?J.sort(f):J}const j=a?t.replace(/\./g,"%2E"):t,x=s&&rt(_)&&_.length===1?j+"[]":j;if(i&&rt(_)&&_.length===0)return x+"[]";for(let J=0;J<L.length;++J){const ue=L[J],$=typeof ue=="object"&&typeof ue.value<"u"?ue.value:_[ue];if(l&&$===null)continue;const Z=h&&a?ue.replace(/\./g,"%2E"):ue,B=rt(_)?typeof n=="function"?n(x,Z):x:x+(h?"."+Z:"["+Z+"]");w.set(e,E);const X=new WeakMap;X.set(Fn,w),Ao(v,Co($,B,n,s,i,o,l,a,n==="comma"&&m&&rt(_)?null:u,c,f,h,p,d,g,m,y,X))}return v},fh=function(e){return Fr};function No(r,e){let t=r;const n=fh();let s,i;typeof n.filter=="function"?(i=n.filter,t=i("",t)):rt(n.filter)&&(i=n.filter,s=i);const o=[];if(typeof t!="object"||t===null)return"";const l=lh[n.arrayFormat],a=l==="comma"&&n.commaRoundTrip;s||(s=Object.keys(t)),n.sort&&s.sort(n.sort);const u=new WeakMap;for(let h=0;h<s.length;++h){const p=s[h];n.skipNulls&&t[p]===null||Ao(o,Co(t[p],p,l,a,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}const c=o.join(n.delimiter);let f=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),c.length>0?f+c:""}const xn=Object.prototype.hasOwnProperty,dh=Array.isArray,xr={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:nh,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},ph=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},Ro=function(r,e){return r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1?r.split(","):r},gh="utf8=%26%2310003%3B",mh="utf8=%E2%9C%93",yh=function(e,t){const n={__proto__:null},s=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,o=s.split(t.delimiter,i);let l=-1,a,u=t.charset;if(t.charsetSentinel)for(a=0;a<o.length;++a)o[a].indexOf("utf8=")===0&&(o[a]===mh?u="utf-8":o[a]===gh&&(u="iso-8859-1"),l=a,a=o.length);for(a=0;a<o.length;++a){if(a===l)continue;const c=o[a],f=c.indexOf("]="),h=f===-1?c.indexOf("="):f+1;let p,d;h===-1?(p=t.decoder(c,xr.decoder,u,"key"),d=t.strictNullHandling?null:""):(p=t.decoder(c.slice(0,h),xr.decoder,u,"key"),d=Mn(Ro(c.slice(h+1),t),function(m){return t.decoder(m,xr.decoder,u,"value")})),d&&t.interpretNumericEntities&&u==="iso-8859-1"&&(d=ph(d)),c.indexOf("[]=")>-1&&(d=dh(d)?[d]:d);const g=xn.call(n,p);g&&t.duplicates==="combine"?n[p]=ah(n[p],d):(!g||t.duplicates==="last")&&(n[p]=d)}return n},wh=function(r,e,t,n){let s=n?e:Ro(e,t);for(let i=r.length-1;i>=0;--i){let o;const l=r[i];if(l==="[]"&&t.parseArrays)o=t.allowEmptyArrays&&s===""?[]:[].concat(s);else{o=t.plainObjects?Object.create(null):{};const a=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,u=t.decodeDotInKeys?a.replace(/%2E/g,"."):a,c=parseInt(u,10);!t.parseArrays&&u===""?o={0:s}:!isNaN(c)&&l!==u&&String(c)===u&&c>=0&&t.parseArrays&&c<=t.arrayLimit?(o=[],o[c]=s):u!=="__proto__"&&(o[u]=s)}s=o}return s},bh=function(e,t,n,s){if(!e)return;const i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g;let a=n.depth>0&&o.exec(i);const u=a?i.slice(0,a.index):i,c=[];if(u){if(!n.plainObjects&&xn.call(Object.prototype,u)&&!n.allowPrototypes)return;c.push(u)}let f=0;for(;n.depth>0&&(a=l.exec(i))!==null&&f<n.depth;){if(f+=1,!n.plainObjects&&xn.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+i.slice(a.index)+"]"),wh(c,t,n,s)},Sh=function(e){return xr};function Lo(r,e){const t=Sh();if(r===""||r===null||typeof r>"u")return t.plainObjects?Object.create(null):{};const n=typeof r=="string"?yh(r,t):r;let s=t.plainObjects?Object.create(null):{};const i=Object.keys(n);for(let o=0;o<i.length;++o){const l=i[o],a=bh(l,n[l],t,typeof r=="string");s=rh(s,a,t)}return t.allowSparse===!0?s:ih(s)}class jn{#e;#t;#r;#n;_logger=null;_loggerSystem=null;#s="";#i=!1;#o="";constructor(e,t,n){const s={};this.#e=ce.create({baseURL:e,headers:{...s,...n?n.headers:{}},...n&&{...n,headers:void 0}}),this.#t=t,this.#r=new _c,this.#n=new Oc}setLogger(e){this._logger=e,this.#r.setLogger(this.getLogger())}getLogger(){return this._logger===null&&(this._logger=we.build("NullLogger"),this._logger.setConfig({[I.desktop]:!1,[I.log]:!1,[I.info]:!1,[I.warn]:!1,[I.error]:!0,[I.trace]:!1})),this._logger}getSystemLogger(){return this._loggerSystem===null&&(this._loggerSystem=we.build("SystemLogger"),this._loggerSystem.setConfig({[I.desktop]:!1,[I.log]:!1,[I.info]:!0,[I.warn]:!0,[I.error]:!0,[I.trace]:!1})),this._loggerSystem}setRestrictionManagerParams(e){this.#r.params=e}getRestrictionManagerParams(){return this.#r.params}setLogTag(e){this.#s=e}clearLogTag(){this.#s=""}async batch(e,t=!0,n=!1){return Array.isArray(e)?this.#c(e,t,n):this.#a(e,t,n)}async#a(e,t=!0,n=!1){const s={};let i=0;const o=(l,a)=>{let u=null,c=null;l.method?(u=l.method??null,c=l?.params??null):Array.isArray(l)&&l.length>0&&(u=l[0]??null,c=l[1]??null),u&&(i++,s[a]=u+"?"+No(c))};for(const[l,a]of Object.entries(e))o(a,l);return i<1?Promise.resolve(new qe):this.call("batch",{halt:t?1:0,cmd:s}).then(l=>{const a=l.getData().result,u={},c=(d,g)=>{if(typeof a.result[g]<"u"||typeof a.result_error[g]<"u"){const m=d.split("?");u[g]=new Tr({answer:{result:C.isUndefined(a.result[g])?{}:a.result[g],error:a?.result_error[g]||void 0,total:a.result_total[g],next:a.result_next[g],time:a.result_time[g]},query:{method:m[0]||"",params:Lo(m[1]||""),start:0},status:l.getStatus()})}};for(const[d,g]of Object.entries(s))c(g,d);const f={},h=d=>d.hasError("base-error")?d.errors.get("base-error"):new xe({code:"0",description:d.getErrorMessages().join("; "),status:0,requestInfo:{method:d.getQuery().method,params:d.getQuery().params},originalError:d.getErrors().next().value}),p=new qe;for(const d of Object.keys(u)){const g=u[d];if(g.getStatus()!==200||!g.isSuccess){const m=h(g);if(!t&&!g.isSuccess){p.addError(m,d);continue}return Promise.reject(m)}f[d]=n?g:g.getData().result}return p.setData(f),Promise.resolve(p)})}async#c(e,t=!0,n=!1){const s=[];let i=0;const o=l=>{let a=null,u=null;if(l.method?(a=l.method??null,u=l?.params??null):Array.isArray(l)&&l.length>0&&(a=l[0]??null,u=l[1]??null),a){i++;const c=a+"?"+No(u);s.push(c)}};for(const[l,a]of e.entries())o(a);return i<1?Promise.resolve(new qe):this.call("batch",{halt:t?1:0,cmd:s}).then(l=>{const a=l.getData().result,u=[],c=(d,g)=>{if(typeof a.result[g]<"u"||typeof a.result_error[g]<"u"){const m=d.split("?"),y=new Tr({answer:{result:C.isUndefined(a.result[g])?{}:a.result[g],error:a?.result_error[g]||void 0,total:a.result_total[g],next:a.result_next[g],time:a.result_time[g]},query:{method:m[0]||"",params:Lo(m[1]||""),start:0},status:l.getStatus()});u.push(y)}};for(const[d,g]of s.entries())c(g,d);const f=[],h=d=>d.hasError("base-error")?d.errors.get("base-error"):new xe({code:"0",description:d.getErrorMessages().join("; "),status:0,requestInfo:{method:d.getQuery().method,params:d.getQuery().params},originalError:d.getErrors().next().value}),p=new qe;for(const d of u){if(d.getStatus()!==200||!d.isSuccess){const g=h(d);if(!t&&!d.isSuccess){p.addError(g);continue}return Promise.reject(g)}f.push(n?d:d.getData().result)}return p.setData(f),Promise.resolve(p)})}async call(e,t,n=0){let s=this.#t.getAuthData();return s===!1&&(s=await this.#t.refreshAuth()),await this.#r.check(),this.#i&&!this.isServerSide()&&C.isStringFilled(this.#o)&&this.getSystemLogger().warn(this.#o),this.#e.post(this.#u(e),this.#l(s,t,n)).then(i=>{const o=i.data;return Promise.resolve({status:i.status,payload:o})},async i=>{let o={error:i?.code||0,errorDescription:i?.message||""};if(i instanceof Ln&&i.response&&i.response.data&&!C.isUndefined(i.response.data.error)){const a=i.response.data;o={error:a.error,errorDescription:a.error_description}}const l=new xe({code:String(o.error),description:o.errorDescription,status:i.response?.status||0,requestInfo:{method:e,params:t},originalError:i});return l.status===401&&["expired_token","invalid_token"].includes(l.answerError.error)?(this.getLogger().info(`refreshAuth >> ${l.answerError.error} >>>`),s=await this.#t.refreshAuth(),await this.#r.check(),this.#e.post(this.#u(e),this.#l(s,t,n)).then(async a=>{const u=a.data;return Promise.resolve({status:a.status,payload:u})},async a=>{let u={error:a?.code||0,errorDescription:a?.message||""};if(a instanceof Ln&&a.response&&a.response.data){const f=a.response.data;u={error:f.error,errorDescription:f.error_description}}const c=new xe({code:String(u.error),description:u.errorDescription,status:i.response?.status||0,requestInfo:{method:e,params:t},originalError:a});return Promise.reject(c)})):Promise.reject(l)}).then(i=>{const o=new Tr({answer:i.payload,query:{method:e,params:t,start:n},status:i.status});return Promise.resolve(o)})}#l(e,t,n=0){const s=Object.assign({},t);return this.#s.length>0&&(s.logTag=this.#s),s.data&&s.data.start&&delete s.data.start,e.refresh_token!=="hook"&&(s.auth=e.access_token),s.start=n,s}#u(e){const t=`${encodeURIComponent(e)}.json`;if(e.includes("task."))return`${t}`;const n=new URLSearchParams({[this.#n.getQueryStringParameterName()]:this.#n.getRequestId(),[this.#n.getQueryStringSdkParameterName()]:"0.5.1",[this.#n.getQueryStringSdkTypeParameterName()]:"b24-js-sdk"});return`${t}?${n.toString()}`}setClientSideWarning(e,t){this.#i=e,this.#o=t}isServerSide(){return typeof window>"u"}}class kt{static batchSize=50;_isInit=!1;_http=null;_logger=null;constructor(){this._isInit=!1}get isInit(){return this._isInit}async init(){this._isInit=!0}destroy(){}setLogger(e){this._logger=e,this.getHttpClient().setLogger(this.getLogger())}getLogger(){return this._logger===null&&(this._logger=we.build("NullLogger"),this._logger.setConfig({[I.desktop]:!1,[I.log]:!1,[I.info]:!1,[I.warn]:!1,[I.error]:!0,[I.trace]:!1})),this._logger}callMethod(e,t,n){return this.getHttpClient().call(e,t||{},n||0)}async callListMethod(e,t={},n=null,s=null){const i=new qe;return C.isFunction(n)&&n!==null&&n(0),this.callMethod(e,t,0).then(async o=>{let l=[],a;if(s===null?a=o.getData().result:a=o.getData().result[s],l=[...l,...a],o.isMore()){let u=o;for(;u=await u.getNext(this.getHttpClient()),u!==!1;){let c;if(s===null?c=u.getData().result:c=u.getData().result[s],l=[...l,...c],n){const f=u.getTotal();n(f>0?Math.round(100*l.length/f):100)}}}return i.setData(l),n&&n(100),i})}async*fetchListMethod(e,t={},n="ID",s=null){t.order=t.order||{},t.filter=t.filter||{},t.start=-1;const i=`>${n}`;t.order[n]="ASC",t.filter[i]=0;do{const o=await this.callMethod(e,t,t.start);let l;if(!C.isNull(s)&&s!==null?l=o.getData().result[s]:l=o.getData().result,l.length===0||(yield l,l.length<kt.batchSize))break;const a=l.at(-1);a&&n in a&&(t.filter[i]=a[n])}while(!0)}async callBatch(e,t=!0,n=!1){return this.getHttpClient().batch(e,t,n)}chunkArray(e,t=50){const n=[];for(let s=0;s<e.length;s+=t){const i=e.slice(s,s+t);n.push(i)}return n}async callBatchByChunk(e,t=!0){const n=new qe,s=[],i=this.chunkArray(e,kt.batchSize);for(const o of i){const l=await this.callBatch(o,t);s.push(...l.getData())}return n.setData(s)}getHttpClient(){if(!this.isInit||this._http===null)throw new Error("Http not init");return this._http}_getHttpOptions(){return null}_ensureInitialized(){if(!this._isInit)throw new Error("B24 not initialized")}}var Bn=(r=>(r.en="en",r.de="de",r.la="la",r.br="br",r.fr="fr",r.it="it",r.pl="pl",r.ru="ru",r.ua="ua",r.tr="tr",r.sc="sc",r.tc="tc",r.ja="ja",r.vn="vn",r.id="id",r.ms="ms",r.th="th",r.ar="ar",r))(Bn||{});const _h={en:"en-EN",de:"de-DE",la:"es-ES",br:"pt-BR",fr:"fr-FR",it:"it-IT",pl:"pl-PL",ru:"ru-RU",ua:"uk-UA",tr:"tr-TR",sc:"zh-CN",tc:"zh-TW",ja:"ja-JP",vn:"vi-VN",id:"id-ID",ms:"ms-MY",th:"th-TH",ar:"ar-SA"},kh=()=>({scrollWidth:Math.max(document.documentElement.scrollWidth,document.documentElement.offsetWidth),scrollHeight:Math.max(document.documentElement.scrollHeight,document.documentElement.offsetHeight)});let vh=class ft{static isInternalConstructing=!1;static instance=null;_defLocale=null;constructor(){if(!ft.isInternalConstructing)throw new TypeError("FormatterNumber is not constructable");ft.isInternalConstructing=!1}static getInstance(){return ft.instance||(ft.isInternalConstructing=!0,ft.instance=new ft),ft.instance}setDefLocale(e){this._defLocale=e}format(e,t){let n;(typeof t>"u"||!C.isStringFilled(t))&&(t=C.isStringFilled(this._defLocale)?this._defLocale||"en":typeof navigator>"u"?"en":navigator?.language||"en"),Number.isInteger(e)?n=new Intl.NumberFormat(t,{minimumFractionDigits:0,maximumFractionDigits:0}):n=new Intl.NumberFormat(t,{minimumFractionDigits:2,maximumFractionDigits:2});let s=n.format(e);return t.includes("ru")&&(s=s.replace(",",".")),s}};class T{countryCode;length;structure;example;_cachedRegex=null;constructor(e,t,n,s){this.countryCode=e,this.length=t,this.structure=n,this.example=s}isValid(e){return this.length===e.length&&this.countryCode===e.slice(0,2)&&this._regex().test(e.slice(4))&&this._iso7064Mod9710(this._iso13616Prepare(e))==1}toBBAN(e,t){return(this._regex().exec(e.slice(4)||"")||[]).slice(1).join(t)}fromBBAN(e){if(!this.isValidBBAN(e))throw new Error("Invalid BBAN");const t=("0"+(98-this._iso7064Mod9710(this._iso13616Prepare(this.countryCode+"00"+e)))).slice(-2);return this.countryCode+t+e}isValidBBAN(e){return this.length-4===e.length&&this._regex().test(e)}_regex(){return this._cachedRegex===null&&(this._cachedRegex=this._parseStructure(this.structure)),this._cachedRegex}_parseStructure(e){const t=(e.match(/(.{3})/g)||[]).map(n=>{let s;const i=n.slice(0,1),o=Number.parseInt(n.slice(1),10);switch(i){case"A":s="0-9A-Za-z";break;case"B":s="0-9A-Z";break;case"C":s="A-Za-z";break;case"F":s="0-9";break;case"L":s="a-z";break;case"U":s="A-Z";break;case"W":s="0-9a-z";break}return"(["+s+"]{"+o+"})"});return new RegExp("^"+t.join("")+"$")}_iso13616Prepare(e){return e=e.toUpperCase(),e=e.substring(4)+e.substring(0,4),e.split("").map(t=>{const n=t.charCodeAt(0);return n>=65&&n<=90?(n-65+10).toString():t}).join("")}_iso7064Mod9710(e){let t=e,n;for(;t.length>2;)n=t.slice(0,9),t=Number.parseInt(n,10)%97+t.slice(n.length);return Number.parseInt(t,10)%97}}class nt{static isInternalConstructing=!1;static instance=null;_countries;constructor(){if(!nt.isInternalConstructing)throw new TypeError("FormatterIban is not constructable");nt.isInternalConstructing=!1,this._countries=new Map}static getInstance(){return nt.instance||(nt.isInternalConstructing=!0,nt.instance=new nt),nt.instance}addSpecification(e){this._countries.set(e.countryCode,e)}isValid(e){if(!C.isString(e))return!1;e=this.electronicFormat(e);const t=e.slice(0,2);if(!this._countries.has(t))throw new Error(`No country with code ${t}`);const n=this._countries.get(t);return!!n&&n.isValid(e)}printFormat(e,t){typeof t>"u"&&(t=" ");const n=/(.{4})(?!$)/g;return this.electronicFormat(e).replace(n,"$1"+t)}electronicFormat(e){const t=/[^a-zA-Z0-9]/g;return e.replace(t,"").toUpperCase()}toBBAN(e,t){typeof t>"u"&&(t=" "),e=this.electronicFormat(e);const n=e.slice(0,2);if(!this._countries.has(n))throw new Error(`No country with code ${n}`);const s=this._countries.get(n);if(!s)throw new Error(`No country with code ${n}`);return s.toBBAN(e,t)}fromBBAN(e,t){if(!this._countries.has(e))throw new Error(`No country with code ${e}`);const n=this._countries.get(e);if(!n)throw new Error(`No country with code ${e}`);return n.fromBBAN(this.electronicFormat(t))}isValidBBAN(e,t){if(!C.isString(t))return!1;if(!this._countries.has(e))throw new Error(`No country with code ${e}`);const n=this._countries.get(e);return!!n&&n.isValidBBAN(this.electronicFormat(t))}}const Eh=()=>{const r=vh.getInstance(),e=nt.getInstance();return e.addSpecification(new T("AD",24,"F04F04A12","AD1200012030200359100100")),e.addSpecification(new T("AE",23,"F03F16","AE070331234567890123456")),e.addSpecification(new T("AL",28,"F08A16","AL47212110090000000235698741")),e.addSpecification(new T("AT",20,"F05F11","AT611904300234573201")),e.addSpecification(new T("AZ",28,"U04A20","AZ21NABZ00000000137010001944")),e.addSpecification(new T("BA",20,"F03F03F08F02","BA391290079401028494")),e.addSpecification(new T("BE",16,"F03F07F02","BE68539007547034")),e.addSpecification(new T("BG",22,"U04F04F02A08","BG80BNBG96611020345678")),e.addSpecification(new T("BH",22,"U04A14","BH67BMAG00001299123456")),e.addSpecification(new T("BR",29,"F08F05F10U01A01","BR9700360305000010009795493P1")),e.addSpecification(new T("BY",28,"A04F04A16","BY13NBRB3600900000002Z00AB00")),e.addSpecification(new T("CH",21,"F05A12","CH9300762011623852957")),e.addSpecification(new T("CR",22,"F04F14","CR72012300000171549015")),e.addSpecification(new T("CY",28,"F03F05A16","CY17002001280000001200527600")),e.addSpecification(new T("CZ",24,"F04F06F10","CZ6508000000192000145399")),e.addSpecification(new T("DE",22,"F08F10","DE89370400440532013000")),e.addSpecification(new T("DK",18,"F04F09F01","DK5000400440116243")),e.addSpecification(new T("DO",28,"U04F20","DO28BAGR00000001212453611324")),e.addSpecification(new T("EE",20,"F02F02F11F01","EE382200221020145685")),e.addSpecification(new T("EG",29,"F04F04F17","EG800002000156789012345180002")),e.addSpecification(new T("ES",24,"F04F04F01F01F10","ES9121000418450200051332")),e.addSpecification(new T("FI",18,"F06F07F01","FI2112345600000785")),e.addSpecification(new T("FO",18,"F04F09F01","FO6264600001631634")),e.addSpecification(new T("FR",27,"F05F05A11F02","FR1420041010050500013M02606")),e.addSpecification(new T("GB",22,"U04F06F08","GB29NWBK60161331926819")),e.addSpecification(new T("GE",22,"U02F16","GE29NB0000000101904917")),e.addSpecification(new T("GI",23,"U04A15","GI75NWBK000000007099453")),e.addSpecification(new T("GL",18,"F04F09F01","GL8964710001000206")),e.addSpecification(new T("GR",27,"F03F04A16","GR1601101250000000012300695")),e.addSpecification(new T("GT",28,"A04A20","GT82TRAJ01020000001210029690")),e.addSpecification(new T("HR",21,"F07F10","HR1210010051863000160")),e.addSpecification(new T("HU",28,"F03F04F01F15F01","HU42117730161111101800000000")),e.addSpecification(new T("IE",22,"U04F06F08","IE29AIBK93115212345678")),e.addSpecification(new T("IL",23,"F03F03F13","IL620108000000099999999")),e.addSpecification(new T("IS",26,"F04F02F06F10","IS140159260076545510730339")),e.addSpecification(new T("IT",27,"U01F05F05A12","IT60X0542811101000000123456")),e.addSpecification(new T("IQ",23,"U04F03A12","IQ98NBIQ850123456789012")),e.addSpecification(new T("JO",30,"A04F22","JO15AAAA1234567890123456789012")),e.addSpecification(new T("KW",30,"U04A22","KW81CBKU0000000000001234560101")),e.addSpecification(new T("KZ",20,"F03A13","KZ86125KZT5004100100")),e.addSpecification(new T("LB",28,"F04A20","LB62099900000001001901229114")),e.addSpecification(new T("LC",32,"U04F24","LC07HEMM000100010012001200013015")),e.addSpecification(new T("LI",21,"F05A12","LI21088100002324013AA")),e.addSpecification(new T("LT",20,"F05F11","LT121000011101001000")),e.addSpecification(new T("LU",20,"F03A13","LU280019400644750000")),e.addSpecification(new T("LV",21,"U04A13","LV80BANK0000435195001")),e.addSpecification(new T("MC",27,"F05F05A11F02","MC5811222000010123456789030")),e.addSpecification(new T("MD",24,"U02A18","MD24AG000225100013104168")),e.addSpecification(new T("ME",22,"F03F13F02","ME25505000012345678951")),e.addSpecification(new T("MK",19,"F03A10F02","MK07250120000058984")),e.addSpecification(new T("MR",27,"F05F05F11F02","MR1300020001010000123456753")),e.addSpecification(new T("MT",31,"U04F05A18","MT84MALT011000012345MTLCAST001S")),e.addSpecification(new T("MU",30,"U04F02F02F12F03U03","MU17BOMM0101101030300200000MUR")),e.addSpecification(new T("NL",18,"U04F10","NL91ABNA0417164300")),e.addSpecification(new T("NO",15,"F04F06F01","NO9386011117947")),e.addSpecification(new T("PK",24,"U04A16","PK36SCBL0000001123456702")),e.addSpecification(new T("PL",28,"F08F16","PL61109010140000071219812874")),e.addSpecification(new T("PS",29,"U04A21","PS92PALS000000000400123456702")),e.addSpecification(new T("PT",25,"F04F04F11F02","PT50000201231234567890154")),e.addSpecification(new T("QA",29,"U04A21","QA30AAAA123456789012345678901")),e.addSpecification(new T("RO",24,"U04A16","RO49AAAA1B31007593840000")),e.addSpecification(new T("RS",22,"F03F13F02","RS35260005601001611379")),e.addSpecification(new T("SA",24,"F02A18","SA0380000000608010167519")),e.addSpecification(new T("SC",31,"U04F04F16U03","SC18SSCB11010000000000001497USD")),e.addSpecification(new T("SE",24,"F03F16F01","SE4550000000058398257466")),e.addSpecification(new T("SI",19,"F05F08F02","SI56263300012039086")),e.addSpecification(new T("SK",24,"F04F06F10","SK3112000000198742637541")),e.addSpecification(new T("SM",27,"U01F05F05A12","SM86U0322509800000000270100")),e.addSpecification(new T("ST",25,"F08F11F02","ST68000100010051845310112")),e.addSpecification(new T("SV",28,"U04F20","SV62CENR00000000000000700025")),e.addSpecification(new T("TL",23,"F03F14F02","TL380080012345678910157")),e.addSpecification(new T("TN",24,"F02F03F13F02","TN5910006035183598478831")),e.addSpecification(new T("TR",26,"F05F01A16","TR330006100519786457841326")),e.addSpecification(new T("UA",29,"F25","UA511234567890123456789012345")),e.addSpecification(new T("VA",22,"F18","VA59001123000012345678")),e.addSpecification(new T("VG",24,"U04F16","VG96VPVG0000012345678901")),e.addSpecification(new T("XK",20,"F04F10F02","XK051212012345678906")),e.addSpecification(new T("AO",25,"F21","AO69123456789012345678901")),e.addSpecification(new T("BF",27,"F23","BF2312345678901234567890123")),e.addSpecification(new T("BI",16,"F12","BI41123456789012")),e.addSpecification(new T("BJ",28,"F24","BJ39123456789012345678901234")),e.addSpecification(new T("CI",28,"U02F22","CI70CI1234567890123456789012")),e.addSpecification(new T("CM",27,"F23","CM9012345678901234567890123")),e.addSpecification(new T("CV",25,"F21","CV30123456789012345678901")),e.addSpecification(new T("DZ",24,"F20","DZ8612345678901234567890")),e.addSpecification(new T("IR",26,"F22","IR861234568790123456789012")),e.addSpecification(new T("MG",27,"F23","MG1812345678901234567890123")),e.addSpecification(new T("ML",28,"U01F23","ML15A12345678901234567890123")),e.addSpecification(new T("MZ",25,"F21","MZ25123456789012345678901")),e.addSpecification(new T("SN",28,"U01F23","SN52A12345678901234567890123")),e.addSpecification(new T("GF",27,"F05F05A11F02","GF121234512345123456789AB13")),e.addSpecification(new T("GP",27,"F05F05A11F02","GP791234512345123456789AB13")),e.addSpecification(new T("MQ",27,"F05F05A11F02","MQ221234512345123456789AB13")),e.addSpecification(new T("RE",27,"F05F05A11F02","RE131234512345123456789AB13")),e.addSpecification(new T("PF",27,"F05F05A11F02","PF281234512345123456789AB13")),e.addSpecification(new T("TF",27,"F05F05A11F02","TF891234512345123456789AB13")),e.addSpecification(new T("YT",27,"F05F05A11F02","YT021234512345123456789AB13")),e.addSpecification(new T("NC",27,"F05F05A11F02","NC551234512345123456789AB13")),e.addSpecification(new T("BL",27,"F05F05A11F02","BL391234512345123456789AB13")),e.addSpecification(new T("MF",27,"F05F05A11F02","MF551234512345123456789AB13")),e.addSpecification(new T("PM",27,"F05F05A11F02","PM071234512345123456789AB13")),e.addSpecification(new T("WF",27,"F05F05A11F02","WF621234512345123456789AB13")),{formatterNumber:r,formatterIban:e}};class Po{#e;#t;#r;#n;constructor(e){this.#e=Object.freeze(Object.assign({},e)),this.#t=this.#e.b24Url.replaceAll("https://","").replaceAll("http://","").replace(/:(80|443)$/,""),this.#r=`https://${this.#t}/rest`,this.#n=`https://${this.#t}`}getAuthData(){return{access_token:this.#e.secret,refresh_token:"hook",expires:0,expires_in:0,domain:this.#t,member_id:this.#t}}refreshAuth(){return Promise.resolve(this.getAuthData())}getUniq(e){const t=this.getAuthData();if(t===!1)throw new Error("AuthData not init");return[e,t.member_id].join("_")}getTargetOrigin(){return`${this.#n}`}getTargetOriginWithPath(){return`${this.#r}/${this.#e.userId}/${this.#e.secret}`}get isAdmin(){return!0}}class Un extends kt{#e;constructor(e){super(),this.#e=new Po(e),this._http=new jn(this.#e.getTargetOriginWithPath(),this.#e,this._getHttpOptions()),this._http.setClientSideWarning(!0,"It is not safe to use hook requests on the client side"),this._isInit=!0}setLogger(e){super.setLogger(e)}get auth(){return this.#e}offClientSideWarning(){this.getHttpClient().setClientSideWarning(!1,"")}getTargetOrigin(){return this._ensureInitialized(),this.#e.getTargetOrigin()}getTargetOriginWithPath(){return this._ensureInitialized(),this.#e.getTargetOriginWithPath()}static fromWebhookUrl(e){if(!e.trim())throw new Error("Webhook URL cannot be empty");let t;try{t=new URL(e)}catch{throw new Error(`Invalid webhook URL format: ${e}`)}if(t.protocol!=="https:")throw new Error("Webhook requires HTTPS protocol");const n=t.pathname.split("/").filter(Boolean);if(n.length<3||n[0]!=="rest")throw new Error("Webhook URL must follow format: /rest/<userId>/<secret>");const s=n[1],i=n[2];if(!/^\d+$/.test(s))throw new Error(`User ID must be numeric in webhook URL, received: ${s}`);const o=Number.parseInt(s,10);return new Un({b24Url:t.origin,userId:o,secret:i})}}var ee=(r=>(r.getInitData="getInitData",r.setInstallFinish="setInstallFinish",r.setInstall="setInstall",r.refreshAuth="refreshAuth",r.setAppOption="setAppOption",r.setUserOption="setUserOption",r.resizeWindow="resizeWindow",r.reloadWindow="reloadWindow",r.setTitle="setTitle",r.setScroll="setScroll",r.openApplication="openApplication",r.closeApplication="closeApplication",r.openPath="openPath",r.imCallTo="imCallTo",r.imPhoneTo="imPhoneTo",r.imOpenMessenger="imOpenMessenger",r.imOpenHistory="imOpenHistory",r.selectUser="selectUser",r.selectAccess="selectAccess",r.selectCRM="selectCRM",r.showAppForm="showAppForm",r.getInterface="getInterface",r.placementBindEvent="placementBindEvent",r))(ee||{});class Do{#e;#t;#r;_logger=null;runCallbackHandler;constructor(e){this.#e=e,this.#t=new Map,this.#r=new Map,this.runCallbackHandler=this._runCallback.bind(this)}setLogger(e){this._logger=e}getLogger(){return this._logger===null&&(this._logger=we.build("NullLogger"),this._logger.setConfig({[I.desktop]:!1,[I.log]:!1,[I.info]:!1,[I.warn]:!1,[I.error]:!0,[I.trace]:!1})),this._logger}subscribe(){window.addEventListener("message",this.runCallbackHandler)}unsubscribe(){window.removeEventListener("message",this.runCallbackHandler)}async send(e,t=null){return new Promise((n,s)=>{let i;const o={resolve:n,reject:s,timeoutId:null},l=this.#n(o);let a=null;const u=Kn(t||{},["singleOption","callBack","isSafely","safelyTime"]),{callBack:c,singleOption:f}=t||{};if(c&&this.#r.set(l,c),f?a=f:Object.keys(u).length>0&&(a={...u}),e.toString().includes(":"))i={method:e.toString(),params:a||"",callback:l,appSid:this.#e.getAppSid()};else{i=e.toString(),t?.isRawValue!==!0&&a?a=JSON.stringify(a):t?.isRawValue===!0&&a&&C.isPlainObject(a)&&a.value&&(a=a.value);const h=[a||"",l,this.#e.getAppSid()];i+=":"+h.filter(Boolean).join(":")}this.getLogger().log(`send to ${this.#e.getTargetOrigin()}`,{cmd:i}),parent.postMessage(i,this.#e.getTargetOrigin()),t?.isSafely&&(this.#t.get(l).timeoutId=window.setTimeout(()=>{this.#t.has(l)&&(this.getLogger().warn(`Action ${e.toString()} stop by timeout`),this.#t.delete(l),n({isSafely:!0}))},Number.parseInt(String(t?.safelyTime||900))))})}_runCallback(e){if(e.origin===this.#e.getTargetOrigin()&&e.data){this.getLogger().log(`get from ${e.origin}`,{data:e.data});const t=e.data.split(":"),n={id:t[0],args:t.slice(1).join(":")};if(n.args&&(n.args=JSON.parse(n.args)),this.#t.has(n.id)){const s=this.#t.get(n.id);s.timeoutId&&clearTimeout(s.timeoutId),this.#t.delete(n.id),s.resolve(n.args)}else if(this.#r.has(n.id)){const s=this.#r.get(n.id);s&&s.apply(globalThis,[n.args])}}}#n(e){const t=V.getUniqId();return this.#t.set(t,e),t}}class Mo{#e="";#t=!0;#r=null;#n=null;#s=null;constructor(e){e.DOMAIN&&(this.#e=e.DOMAIN,this.#e=this.#e.replace(/:(80|443)$/,"")),this.#t=e.PROTOCOL===!0,e.LANG&&(this.#s=e.LANG),e.APP_SID&&(this.#r=e.APP_SID)}initData(e){return this.#e||(this.#e=e.DOMAIN),this.#n||(this.#n=e.PATH),this.#s||(this.#s=e.LANG),this.#t=Number.parseInt(e.PROTOCOL)===1,this.#e=this.#e.replace(/:(80|443)$/,""),this}getAppSid(){if(this.#r===null)throw new Error("Not init appSid");return this.#r}getTargetOrigin(){return`${this.#t?"https":"http"}://${this.#e}`}getTargetOriginWithPath(){return this.getTargetOrigin()+(this.#n??"")}getLang(){return this.#s||Bn.en}}class Fo{#e=null;#t=null;#r=0;#n=0;#s=null;#i=!1;#o;#a;constructor(e,t){this.#o=e,this.#a=t}initData(e){return e.AUTH_ID&&(this.#e=e.AUTH_ID,this.#t=e.REFRESH_ID,this.#n=Number.parseInt(e.AUTH_EXPIRES),this.#r=Date.now()+this.#n*1e3,this.#i=e.IS_ADMIN,this.#s=e.MEMBER_ID||""),this}getAuthData(){return this.#r>Date.now()?{access_token:this.#e,refresh_token:this.#t,expires:this.#r/1e3,expires_in:this.#n,domain:this.#o.getTargetOrigin(),member_id:this.#s}:!1}async refreshAuth(){return this.#a.send(ee.refreshAuth,{}).then(e=>(this.#e=e.AUTH_ID,this.#t=e.REFRESH_ID,this.#r=Date.now()+Number.parseInt(e.AUTH_EXPIRES)*1e3,Promise.resolve(this.getAuthData())))}getUniq(e){return[e,this.#s||""].join("_")}get isAdmin(){return this.#i}}class xo{#e;constructor(e){this.#e=e}async closeApplication(){return this.#e.send(ee.closeApplication,{isSafely:!1})}async fitWindow(){const e="100%",t=this.getScrollSize().scrollHeight;return this.#e.send(ee.resizeWindow,{width:e,height:t,isSafely:!0})}async resizeWindow(e,t){return e>0&&t>0?this.#e.send(ee.resizeWindow,{width:e,height:t,isSafely:!0}):Promise.reject(new Error(`Wrong width:number = ${e} or height:number = ${t}`))}async resizeWindowAuto(e=null,t=0,n=0){const s=document.body;let i=Math.max(s.scrollWidth,s.offsetWidth);n>0&&(i=Math.max(n,i));let o=Math.max(s.scrollHeight,s.offsetHeight);return e&&(o=Math.max(e.scrollHeight,e.offsetHeight)),t>0&&(o=Math.max(t,o)),this.resizeWindow(i,o)}getScrollSize(){return kh()}async scrollParentWindow(e){return Number.isInteger(e)?(e<0&&(e=0),this.#e.send(ee.setScroll,{scroll:e,isSafely:!0})):Promise.reject(new Error("Wrong scroll number"))}async reloadWindow(){return this.#e.send(ee.reloadWindow,{isSafely:!0})}async setTitle(e){return this.#e.send(ee.setTitle,{title:e.toString(),isSafely:!0})}async imCallTo(e,t=!0){return this.#e.send(ee.imCallTo,{userId:e,video:t,isSafely:!0})}async imPhoneTo(e){return this.#e.send(ee.imPhoneTo,{phone:e,isSafely:!0})}async imOpenMessenger(e){return this.#e.send(ee.imOpenMessenger,{dialogId:e,isSafely:!0})}async imOpenHistory(e){return this.#e.send(ee.imOpenHistory,{dialogId:e,isSafely:!0})}}let jo=class{#e;#t=null;#r=null;constructor(e){this.#e=e}initData(e){return e.APP_OPTIONS&&(this.#t=e.APP_OPTIONS),e.USER_OPTIONS&&(this.#r=e.USER_OPTIONS),this}appGet(e){if(this.#t&&this.#t[e])return this.#t[e];throw new Error(`app.option.${e} not set`)}async appSet(e,t){return this.#t||(this.#t=[]),this.#t[e]=t,this.#n(ee.setAppOption,e,this.#t[e])}userGet(e){if(this.#r&&this.#r[e])return this.#r[e];throw new Error(`user.option.${e} not set`)}async userSet(e,t){return this.#t||(this.#t=[]),this.#t[e]||(this.#t[e]=null),this.#r[e]=t,this.#n(ee.setUserOption,e,this.#r[e])}async#n(e,t,n){return this.#e.send(e,{name:t,value:n,isSafely:!0}).then(()=>Promise.resolve())}};class Bo{#e;constructor(e){this.#e=e}async selectUser(){return this.#e.send(ee.selectUser,{mult:!1})}async selectUsers(){return this.#e.send(ee.selectUser,{mult:!0})}async selectAccess(e=[]){return console.warn("@deprecated selectAccess"),this.#e.send(ee.selectAccess,{value:e})}async selectCRM(e){return console.warn("@deprecated selectCRM"),this.#e.send(ee.selectCRM,{entityType:e?.entityType,multiple:e?.multiple,value:e?.value})}}class Uo{#e;#t;constructor(e,t){this.#e=e,this.#t=t}getUrl(e="/"){return new URL(e,this.#e.getTargetOrigin())}getTargetOrigin(){return this.#e.getTargetOrigin()}async openSliderAppPage(e={}){return this.#t.send(ee.openApplication,e)}async closeSliderAppPage(){return this.#t.send(ee.closeApplication,{isSafely:!1})}#r(e=1640){return e>0?e>1200&&e<=1640?"/crm/type/0/details/0/../../../../..":e>950&&e<=1200?"/company/personal/user/0/groups/create/../../../../../..":e>900&&e<=950?"/crm/company/requisite/0/../../../..":e<=900?"/workgroups/group/0/card/../../../..":"/crm/deal/../..":"/crm/deal/../.."}async openPath(e,t=1640){const n=new URL(e);return n.searchParams.set("IFRAME","Y"),n.searchParams.set("IFRAME_TYPE","SIDE_SLIDER"),this.#t.send(ee.openPath,{path:[this.#r(t),n.pathname,n.search].join("")}).then(s=>s?.result==="error"?s?.errorCode==="METHOD_NOT_SUPPORTED_ON_DEVICE"?new Promise((i,o)=>{const l=window.open(e,"_blank");if(!l){o(new Error("Error open window"));return}let a=0;const u=1e3*60*5,c=window.setInterval(()=>{a=a+1,l.closed?(clearInterval(c),i({isOpenAtNewWindow:!0,isClose:!0})):a>u&&(clearInterval(c),i({isOpenAtNewWindow:!0,isClose:!1}))},1e3)}):Promise.reject(new Error(s?.errorCode)):s?.result==="close"?Promise.resolve({isOpenAtNewWindow:!1,isClose:!0}):Promise.resolve({isOpenAtNewWindow:!1,isClose:!1}))}async showAppForm(e){return console.warn("@deprecated showAppForm"),this.#t.send(ee.showAppForm,{params:e,isSafely:!0})}}class $o{#e;#t="";#r={};constructor(e){this.#e=e}initData(e){this.#t=e.PLACEMENT||"DEFAULT";const t=e.PLACEMENT_OPTIONS;return this.#r=Object.freeze(t),this}get title(){return this.#t}get isDefault(){return this.title==="DEFAULT"}get options(){return this.#r}get isSliderMode(){return this.options?.IFRAME==="Y"}async getInterface(){return this.#e.send(ee.getInterface,{isSafely:!0})}async bindEvent(e,t){return this.#e.send(ee.placementBindEvent,{event:e,callBack:t,isSafely:!0})}async call(e,t={}){return this.#e.send(e,{...t,isSafely:!0,isRawValue:["setValue"].includes(e)})}async callCustomBind(e,t=null,n){let s={};return C.isString(t)?s.singleOption=t:C.isObjectLike(t)&&(s={...t}),this.#e.send(e,{...s,callBack:n,isSafely:!0})}}class Wo extends kt{#e=!1;#t=!1;#r;#n;#s;#i;#o;#a;#c;#l;constructor(e){super(),this.#r=new Mo(e),this.#n=new Do(this.#r),this.#n.subscribe(),this.#s=new Fo(this.#r,this.#n),this.#i=new xo(this.#n),this.#o=new jo(this.#n),this.#a=new Bo(this.#n),this.#c=new Uo(this.#r,this.#n),this.#l=new $o(this.#n),this._isInit=!1}setLogger(e){super.setLogger(e),this.#n.setLogger(this.getLogger())}get isFirstRun(){return this._ensureInitialized(),this.#t}get isInstallMode(){return this._ensureInitialized(),this.#e}get parent(){return this._ensureInitialized(),this.#i}get auth(){return this._ensureInitialized(),this.#s}get slider(){return this._ensureInitialized(),this.#c}get placement(){return this._ensureInitialized(),this.#l}get options(){return this._ensureInitialized(),this.#o}get dialog(){return this._ensureInitialized(),this.#a}async init(){return this.#n.send(ee.getInitData,{}).then(e=>(this.getLogger().log("init data:",e),this.#r.initData(e),this.#s.initData(e),this.#l.initData(e),this.#o.initData(e),this.#e=e.INSTALL,this.#t=e.FIRST_RUN,this._http=new jn(this.#r.getTargetOriginWithPath(),this.#s,this._getHttpOptions()),this._isInit=!0,this.#t?this.#n.send(ee.setInstall,{install:!0}):Promise.resolve()))}destroy(){this.#n.unsubscribe(),super.destroy()}async installFinish(){return this.isInstallMode?this.#n.send(ee.setInstallFinish,{}):Promise.reject(new Error("Application was previously installed. You cannot call installFinish"))}getTargetOrigin(){return this._ensureInitialized(),this.#r.getTargetOrigin()}getTargetOriginWithPath(){return this._ensureInitialized(),this.#r.getTargetOriginWithPath()}getAppSid(){return this._ensureInitialized(),this.#r.getAppSid()}getLang(){return this._ensureInitialized(),this.#r.getLang()}}class Th extends xe{}class Vo{#e;#t=null;#r=null;#n;#s;#i=0;#o=0;#a;#c;#l;#u;#h=null;constructor(e,t){this.#n=Object.assign({},e),this.#s=Object.freeze(Object.assign({},t)),this.#a=this.#n.domain.replaceAll("https://","").replaceAll("http://","").replace(/:(80|443)$/,""),this.#c=this.#n.clientEndpoint,this.#l=this.#c.replace("/rest/",""),this.#u=this.#n.serverEndpoint.replace("/rest/",""),this.#i=this.#n.expires*1e3,this.#o=this.#n.expiresIn,this.#e=ce.create({baseURL:this.#u,headers:{"Content-Type":"application/json"}})}getAuthData(){return this.#i>Date.now()?{access_token:this.#n.accessToken,refresh_token:this.#n.refreshToken,expires:this.#i/1e3,expires_in:this.#o,domain:this.#a,member_id:this.#n.memberId}:!1}async refreshAuth(){try{let e;if(this.#r)e=await this.#r();else{const n=await this.#e.get("/oauth/token/",{params:{grant_type:"refresh_token",client_id:this.#s.clientId,client_secret:this.#s.clientSecret,refresh_token:this.#n.refreshToken}});if(n.data.error)throw new Error(`Token update error: ${n.data.error}`);if(n.status!==200)throw new Error(`Token update error status code: ${n.status}`);e=n.data}if(!e)throw new Error("Unable to obtain authorization update data");this.#n.accessToken=e.access_token,this.#n.refreshToken=e.refresh_token,this.#n.expires=Number.parseInt(e.expires||"0"),this.#n.expiresIn=Number.parseInt(e.expires_in||"3600"),this.#n.clientEndpoint=e.client_endpoint,this.#n.serverEndpoint=e.server_endpoint,this.#n.scope=e.scope,this.#n.status=Object.values(et).find(n=>n===e.status)||et.Free,this.#i=this.#n.expires*1e3;const t=this.getAuthData();return this.#t&&await this.#t({authData:t,b24OAuthParams:this.#n}),t}catch(e){if(e instanceof Ln){let t={error:e?.code||0,errorDescription:e?.message||""};if(e.response&&e.response.data&&!C.isUndefined(e.response.data.error)){const n=e.response.data;t={error:n.error,errorDescription:n.error_description}}throw new Th({code:String(t.error),description:t.errorDescription,status:e.response?.status||0,requestInfo:{method:"/oauth/token/"}})}else if(e instanceof Error)throw e;throw new Error(`Strange error: ${e instanceof Error?e.message:e}`,{cause:e})}}setCallbackRefreshAuth(e){this.#t=e}removeCallbackRefreshAuth(){this.#t=null}setCustomRefreshAuth(e){this.#r=e}removeCustomRefreshAuth(){this.#r=null}getUniq(e){return[e,this.#n.memberId||""].join("_")}getTargetOrigin(){return`${this.#l}`}getTargetOriginWithPath(){return`${this.#c}`}get isAdmin(){if(this.#h===null)throw new Error("isAdmin not init. You need call B24OAuth::initIsAdmin().");return this.#h}async initIsAdmin(e){const t=await e.call("profile",{},0);if(!t.isSuccess)throw new Error(t.getErrorMessages().join(";"));t.getData().result?.ADMIN&&(this.#h=!0)}}class Oh extends kt{#e;constructor(e,t){super(),this.#e=new Vo(e,t),this._http=new jn(this.#e.getTargetOriginWithPath(),this.#e,this._getHttpOptions()),this._http.setClientSideWarning(!0,"It is not safe to use oauth requests on the client side"),this._isInit=!0}setLogger(e){super.setLogger(e)}async initIsAdmin(){return this._ensureInitialized(),this.#e.initIsAdmin(this._http)}setCallbackRefreshAuth(e){this._ensureInitialized(),this.#e.setCallbackRefreshAuth(e)}removeCallbackRefreshAuth(){this._ensureInitialized(),this.#e.removeCallbackRefreshAuth()}setCustomRefreshAuth(e){this._ensureInitialized(),this.#e.setCustomRefreshAuth(e)}removeCustomRefreshAuth(){this._ensureInitialized(),this.#e.removeCustomRefreshAuth()}offClientSideWarning(){this.getHttpClient().setClientSideWarning(!1,"")}get auth(){return this.#e}getTargetOrigin(){return this._ensureInitialized(),this.#e.getTargetOrigin()}getTargetOriginWithPath(){return this._ensureInitialized(),this.#e.getTargetOriginWithPath()}}class $n extends Error{constructor(e,...t){super(...t),this.name="UnhandledMatchError",this.message=`Unhandled match value of type ${e}`,this.stack=new Error("for stack").stack}}class jt{_b24;_logger=null;_data=null;constructor(e){this._b24=e}setLogger(e){this._logger=e}getLogger(){return this._logger===null&&(this._logger=we.build("NullLogger"),this._logger.setConfig({[I.desktop]:!1,[I.log]:!1,[I.info]:!1,[I.warn]:!1,[I.error]:!0,[I.trace]:!1})),this._logger}async initData(e){return this.getLogger().log(e),Promise.reject(new Error("Rewrite this function"))}}class Ah extends jt{_data=null;async initData(e){this._data=e}get data(){if(this._data===null)throw new Error("ProfileManager.data not initialized");return this._data}}class Ih extends jt{_data=null;async initData(e){this._data=e}get data(){if(this._data===null)throw new Error("AppManager.data not initialized");return this._data}get statusCode(){return Bi[this.data.status]||"Unknown status"}}class Ch extends jt{_data=null;async initData(e){this._data=e}get data(){if(this._data===null)throw new Error("PaymentManager.data not initialized");return this._data}}class Nh extends jt{_data=null;async initData(e){this._data=e,this.makeRestrictionManagerParams()}get data(){if(this._data===null)throw new Error("LicenseManager.data not initialized");return this._data}makeRestrictionManagerParams(){this.data?.license&&this.data.license.includes("ent")&&(this.getLogger().log(`LICENSE ${this.data.license} => up restriction manager params`,mn),this._b24.getHttpClient().setRestrictionManagerParams(mn))}}class Rh extends jt{async initData(e){this._data={currencyBase:"?",currencyList:new Map},this.setBaseCurrency(e.currencyBase),this.setCurrencyList(e.currencyList);try{await this.loadData()}catch(t){throw t instanceof Error?t:(console.error(t),new Error("Failed to load data"))}}async loadData(){const e=this.currencyList.map(t=>({method:"crm.currency.get",params:{id:t}}));if(e.length===0)return Promise.resolve();try{(await this._b24.callBatchByChunk(e,!0)).getData().forEach(t=>{if(typeof t.LANG>"u")return;const n=t.CURRENCY,s=this.data.currencyList.get(n);if(!(typeof s>"u"))for(const[i,o]of Object.entries(t.LANG))switch(s.lang[i]={decimals:Number.parseInt(o.DECIMALS),decPoint:o.DEC_POINT,formatString:o.FORMAT_STRING,fullName:o.FULL_NAME,isHideZero:o.HIDE_ZERO==="Y",thousandsSep:o.THOUSANDS_SEP,thousandsVariant:o.THOUSANDS_VARIANT},s.lang[i].thousandsVariant){case"N":s.lang[i].thousandsSep="";break;case"D":s.lang[i].thousandsSep=".";break;case"C":s.lang[i].thousandsSep=",";break;case"S":s.lang[i].thousandsSep=" ";break;case"B":s.lang[i].thousandsSep="&nbsp;";break;default:C.isStringFilled(s.lang[i].thousandsSep)||(s.lang[i].thousandsSep=" ");break}})}catch(t){console.error(t)}}get data(){if(this._data===null)throw new Error("CurrencyManager.data not initialized");return this._data}setBaseCurrency(e){this._data.currencyBase=e}get baseCurrency(){return this.data.currencyBase}setCurrencyList(e=[]){this.data.currencyList.clear();for(const t of e)this.data.currencyList.set(t.CURRENCY,{amount:Number.parseFloat(t.CURRENCY),amountCnt:Number.parseInt(t.AMOUNT_CNT),isBase:t.BASE==="Y",currencyCode:t.CURRENCY,dateUpdate:V.toDateTime(t.DATE_UPDATE),decimals:Number.parseInt(t.DECIMALS),decPoint:t.DEC_POINT,formatString:t.FORMAT_STRING,fullName:t.FULL_NAME,lid:t.LID,sort:Number.parseInt(t.SORT),thousandsSep:t?.THOUSANDS_SEP||null,lang:{}})}getCurrencyFullName(e,t){const n=this.data.currencyList.get(e);if(typeof n>"u")throw new $n(e);let s=n.fullName;if(!(typeof t>"u")){const i=n.lang[t];C.isUndefined(i)||(s=i.fullName)}return s}getCurrencyLiteral(e,t){const n=this.data.currencyList.get(e);if(typeof n>"u")throw new $n(e);let s=n.formatString;if(!(typeof t>"u")){const i=n.lang[t];C.isUndefined(i)||(s=i.formatString)}return s.replaceAll("&#","&%").replaceAll("#","").replaceAll("&%","&#").trim()||""}get currencyList(){return[...this.data.currencyList.keys()]}format(e,t,n){const s=this.data.currencyList.get(t);if(typeof s>"u")throw new $n(t);const i={formatString:s.formatString,decimals:s.decimals,decPoint:s.decPoint,thousandsSep:s.thousandsSep};C.isStringFilled(i.thousandsSep)||(i.thousandsSep="");const o=s.lang[n];return C.isUndefined(o)||(i.formatString=o.formatString,i.decimals=o.decimals,i.decPoint=o.decPoint,i.thousandsSep=o.thousandsSep),i.formatString.replaceAll("&#","&%").replace("#",V.numberFormat(e,i.decimals,i.decPoint,i.thousandsSep)).replaceAll("&%","&#")||""}}class Wn extends jt{_data;_type;static getSupportTypes(){return[tt.NotSet,tt.JsonArray,tt.JsonObject,tt.FloatVal,tt.IntegerVal,tt.BoolYN,tt.StringVal]}static prepareArrayList(e){return C.isArray(e)?e:C.isObject(e)?Object.values(e):[]}constructor(e,t){super(e),this._type=t,this._data=new Map}get data(){return this._data}reset(){this.data.clear()}async initData(e){if(this.reset(),C.isObject(e))for(const[t,n]of Object.entries(e))this.data.set(t,n)}getJsonArray(e,t=[]){if(!this.data.has(e))return t;let n=this.data.get(e);try{n=JSON.parse(n),!C.isArray(n)&&!C.isObject(n)&&(n=t)}catch(s){this.getLogger().error(s),n=t}return Wn.prepareArrayList(n)}getJsonObject(e,t={}){if(!this.data.has(e))return t;let n=this.data.get(e);try{n=JSON.parse(n)}catch(s){this.getLogger().error(s),n=t}return C.isObject(n)||(n=t),n}getFloat(e,t=0){return this.data.has(e)?V.toNumber(this.data.get(e)):t}getInteger(e,t=0){return this.data.has(e)?V.toInteger(this.data.get(e)):t}getBoolYN(e,t=!0){return this.data.has(e)?V.toBoolean(this.data.get(e)):t}getBoolNY(e,t=!1){return this.data.has(e)?V.toBoolean(this.data.get(e)):t}getString(e,t=""){return this.data.has(e)?this.data.get(e).toString():t}getDate(e,t=null){if(!this.data.has(e))return t;try{const n=V.toDateTime(this.data.get(e).toString());return n.isValid?n:t}catch{return t}}encode(e){return JSON.stringify(e)}decode(e,t){try{return e.length>0?JSON.parse(e):t}catch(n){this.getLogger().warn(n,e)}return t}getMethodSave(){switch(this._type){case"app":return"app.option.set";case"user":return"user.option.set"}}async save(e,t){const n=[];return n.push({method:this.getMethodSave(),params:{options:e}}),C.isObject(t)&&n.push({method:"pull.application.event.add",params:{COMMAND:t?.command,PARAMS:t?.params,MODULE_ID:t?.moduleId}}),this._b24.callBatch(n,!0)}}class qo{_logger=null;userId;siteId;constructor(e={}){this.userId=e.userId?V.toInteger(e.userId):0,this.siteId=e.siteId??"none"}setLogger(e){this._logger=e}getLogger(){return this._logger===null&&(this._logger=we.build("NullLogger"),this._logger.setConfig({[I.desktop]:!1,[I.log]:!1,[I.info]:!1,[I.warn]:!1,[I.error]:!0,[I.trace]:!1})),this._logger}set(e,t){if(typeof window.localStorage>"u"){this.getLogger().error(new Error("undefined window.localStorage"));return}typeof t!="string"&&t&&(t=JSON.stringify(t)),window.localStorage.setItem(this._getKey(e),t)}get(e,t){if(typeof window.localStorage>"u")return t||null;const n=window.localStorage.getItem(this._getKey(e));return n===null?t||null:JSON.parse(n)}remove(e){if(typeof window.localStorage>"u"){this.getLogger().error(new Error("undefined window.localStorage"));return}return window.localStorage.removeItem(this._getKey(e))}_getKey(e){return`@bitrix24/b24jssdk-pull-${this.userId}-${this.siteId}-${e}`}compareKey(e,t){return e===this._getKey(t)}}class Lh extends Error{constructor(e){super(e),this.name="ErrorNotConnected"}}class Ph extends Error{constructor(e){super(e),this.name="ErrorTimeout"}}const jr="2.0";class Dh{_logger=null;_connector;_idCounter=0;_handlers={};_rpcResponseAwaiters=new Map;constructor(e){if(this._connector=e.connector,C.isPlainObject(e.handlers))for(const t in e.handlers)this.handle(t,e.handlers[t])}setLogger(e){this._logger=e}getLogger(){return this._logger===null&&(this._logger=we.build("NullLogger"),this._logger.setConfig({[I.desktop]:!1,[I.log]:!1,[I.info]:!1,[I.warn]:!1,[I.error]:!0,[I.trace]:!1})),this._logger}handle(e,t){this._handlers[e]=t}async executeOutgoingRpcCommand(e,t,n=5){return new Promise((s,i)=>{const o=this.createRequest(e,t);this._connector.send(JSON.stringify(o))||i(new Lh("websocket is not connected"));const l=setTimeout(()=>{this._rpcResponseAwaiters.delete(o.id),i(new Ph("no response"))},n*1e3);this._rpcResponseAwaiters.set(o.id,{resolve:s,reject:i,timeout:l})})}executeOutgoingRpcBatch(e){const t=[],n=[];return e.forEach(({method:s,params:i,id:o})=>{const l=this.createRequest(s,i,o);t.push(l),n.push(new Promise((a,u)=>this._rpcResponseAwaiters.set(l.id,{resolve:a,reject:u})))}),this._connector.send(JSON.stringify(t)),n}processRpcResponse(e){if("id"in e&&this._rpcResponseAwaiters.has(Number(e.id))){const t=this._rpcResponseAwaiters.get(Number(e.id));t&&("result"in e?t.resolve(e.result):"error"in e?t.reject(e?.error||"error"):t.reject("wrong response structure"),clearTimeout(t.timeout),this._rpcResponseAwaiters.delete(Number(e.id)));return}this.getLogger().error(new Error(`${V.getDateForLog()}: Pull: Received rpc response with unknown id`),e)}parseJsonRpcMessage(e){let t;try{t=JSON.parse(e)}catch(n){this.getLogger().error(new Error(`${V.getDateForLog()}: Pull: Could not decode json rpc message`),n);return}if(C.isArray(t))return this.executeIncomingRpcBatch(t);if(C.isJsonRpcRequest(t))return this.executeIncomingRpcCommand(t);if(C.isJsonRpcResponse(t))return this.processRpcResponse(t);this.getLogger().error(new Error(`${V.getDateForLog()}: Pull: unknown rpc packet`),t)}executeIncomingRpcCommand({method:e,params:t}){return e in this._handlers?this._handlers[e].call(this,t||{}):{jsonrpc:jr,error:Sn.MethodNotFound}}executeIncomingRpcBatch(e){const t=[];for(const n of e)if("jsonrpc"in n)if("method"in n){const s=this.executeIncomingRpcCommand(n);s&&(s.jsonrpc=jr,s.id=n.id,t.push(s))}else this.processRpcResponse(n);else this.getLogger().error(new Error(`${V.getDateForLog()}: Pull: unknown rpc command in batch`),n),t.push({jsonrpc:jr,error:Sn.InvalidRequest});return t}nextId(){return++this._idCounter}createPublishRequest(e){return e.map(t=>this.createRequest("publish",t))}createRequest(e,t,n){return n||(n=this.nextId()),{jsonrpc:jr,method:e,params:t,id:n}}}class Mh{_logger=null;_storage;_ttl=1440*60;_callbacks;constructor(e={}){e=e||{},this._storage=e.storage||new qo,this._callbacks={onWebSocketBlockChanged:C.isFunction(e.onWebSocketBlockChanged)?e.onWebSocketBlockChanged:()=>{}},this._storage&&window.addEventListener("storage",this.onLocalStorageSet.bind(this))}setLogger(e){this._logger=e}getLogger(){return this._logger===null&&(this._logger=we.build("NullLogger"),this._logger.setConfig({[I.desktop]:!1,[I.log]:!1,[I.info]:!1,[I.warn]:!1,[I.error]:!0,[I.trace]:!1})),this._logger}onLocalStorageSet(e){this._storage.compareKey(e.key||"",Re.WebsocketBlocked)&&e.newValue!==e.oldValue&&this._callbacks.onWebSocketBlockChanged({isWebSocketBlocked:this.isWebSocketBlocked()})}isWebSocketBlocked(){return this._storage?this._storage.get(Re.WebsocketBlocked,0)>Date.now():!1}setWebSocketBlocked(e){if(!this._storage)return!1;try{this._storage.set(Re.WebsocketBlocked,e?Date.now()+this._ttl:0)}catch(t){return this.getLogger().error(new Error(`${V.getDateForLog()}: Pull: Could not save WS_blocked flag in local storage. Error: `),t),!1}return!0}isLongPollingBlocked(){return this._storage?this._storage.get(Re.LongPollingBlocked,0)>Date.now():!1}setLongPollingBlocked(e){if(!this._storage)return!1;try{this._storage.set(Re.LongPollingBlocked,e?Date.now()+this._ttl:0)}catch(t){return this.getLogger().error(new Error(`${V.getDateForLog()}: Pull: Could not save LP_blocked flag in local storage. Error: `),t),!1}return!0}isLoggingEnabled(){return this._storage?this._storage.get(Re.LoggingEnabled,0)>this.getTimestamp():!1}setLoggingEnabled(e){if(!this._storage)return!1;try{this._storage.set(Re.LoggingEnabled,e?this.getTimestamp()+this._ttl:0)}catch(t){return this.getLogger().error(new Error(`${V.getDateForLog()}: LocalStorage error: `),t),!1}return!0}getTimestamp(){return Date.now()}}class Fh{_logger=null;_publicIds;_restClient;_getPublicListMethod;constructor(e){this._publicIds=new Map,this._restClient=e.b24,this._getPublicListMethod=e.getPublicListMethod}setLogger(e){this._logger=e}getLogger(){return this._logger===null&&(this._logger=we.build("NullLogger"),this._logger.setConfig({[I.desktop]:!1,[I.log]:!1,[I.info]:!1,[I.warn]:!1,[I.error]:!0,[I.trace]:!1})),this._logger}async getPublicIds(e){const t=new Date,n={},s=[];for(const i of e){const o=this._publicIds.get(i);o&&o.end>t?n[o.userId]=o:s.push(i)}return s.length===0?Promise.resolve(n):new Promise(i=>{this._restClient.callMethod(this._getPublicListMethod,{users:s}).then(o=>{const l=o.getData().result;this.setPublicIds(Object.values(l));for(const a of s){const u=this._publicIds.get(a);u&&(n[u.userId]=u)}i(n)}).catch(o=>(this.getLogger().error(o),i({})))})}setPublicIds(e){e.forEach(t=>{const n=Number(t.user_id);this._publicIds.set(n,{userId:n,publicId:t.public_id,signature:t.signature,start:new Date(t.start),end:new Date(t.end)})})}}var sr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Vn={exports:{}};/*!
 * protobuf.js v6.8.6 (c) 2016, daniel wirtz
 * compiled mon, 26 feb 2018 11:35:34 utc
 * licensed under the bsd-3-clause license
 * see: https://github.com/dcodeio/protobuf.js for details
 *
 * Modify a list for integration with Bitrix Framework:
 * - removed integration with RequireJS and AMD package builders;
 */var zo;function jh(){return zo||(zo=1,(function(r){(function(e){(function(t,n,s){function i(l){var a=n[l];return a||t[l][0].call(a=n[l]={exports:{}},i,a,a.exports),a.exports}var o=i(s[0]);r&&r.exports&&(r.exports=o)})({1:[function(t,n,s){n.exports=i;function i(o,l){for(var a=new Array(arguments.length-1),u=0,c=2,f=!0;c<arguments.length;)a[u++]=arguments[c++];return new Promise(function(h,p){a[u]=function(d){if(f)if(f=!1,d)p(d);else{for(var g=new Array(arguments.length-1),m=0;m<g.length;)g[m++]=arguments[m];h.apply(null,g)}};try{o.apply(l||null,a)}catch(d){f&&(f=!1,p(d))}})}},{}],2:[function(t,n,s){var i=s;i.length=function(c){var f=c.length;if(!f)return 0;for(var h=0;--f%4>1&&c.charAt(f)==="=";)++h;return Math.ceil(c.length*3)/4-h};for(var o=new Array(64),l=new Array(123),a=0;a<64;)l[o[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;i.encode=function(c,f,h){for(var p=null,d=[],g=0,m=0,y;f<h;){var w=c[f++];switch(m){case 0:d[g++]=o[w>>2],y=(w&3)<<4,m=1;break;case 1:d[g++]=o[y|w>>4],y=(w&15)<<2,m=2;break;case 2:d[g++]=o[y|w>>6],d[g++]=o[w&63],m=0;break}g>8191&&((p||(p=[])).push(String.fromCharCode.apply(String,d)),g=0)}return m&&(d[g++]=o[y],d[g++]=61,m===1&&(d[g++]=61)),p?(g&&p.push(String.fromCharCode.apply(String,d.slice(0,g))),p.join("")):String.fromCharCode.apply(String,d.slice(0,g))};var u="invalid encoding";i.decode=function(c,f,h){for(var p=h,d=0,g,m=0;m<c.length;){var y=c.charCodeAt(m++);if(y===61&&d>1)break;if((y=l[y])===e)throw Error(u);switch(d){case 0:g=y,d=1;break;case 1:f[h++]=g<<2|(y&48)>>4,g=y,d=2;break;case 2:f[h++]=(g&15)<<4|(y&60)>>2,g=y,d=3;break;case 3:f[h++]=(g&3)<<6|y,d=0;break}}if(d===1)throw Error(u);return h-p},i.test=function(c){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(c)}},{}],3:[function(t,n,s){n.exports=i;function i(o,l){typeof o=="string"&&(l=o,o=e);var a=[];function u(f){if(typeof f!="string"){var h=c();if(i.verbose&&console.log("codegen: "+h),h="return "+h,f){for(var p=Object.keys(f),d=new Array(p.length+1),g=new Array(p.length),m=0;m<p.length;)d[m]=p[m],g[m]=f[p[m++]];return d[m]=h,Function.apply(null,d).apply(null,g)}return Function(h)()}for(var y=new Array(arguments.length-1),w=0;w<y.length;)y[w]=arguments[++w];if(w=0,f=f.replace(/%([%dfijs])/g,function(_,b){var E=y[w++];switch(b){case"d":case"f":return String(Number(E));case"i":return String(Math.floor(E));case"j":return JSON.stringify(E);case"s":return String(E)}return"%"}),w!==y.length)throw Error("parameter count mismatch");return a.push(f),u}function c(f){return"function "+(f||l||"")+"("+(o&&o.join(",")||"")+`){
  `+a.join(`
  `)+`
}`}return u.toString=c,u}i.verbose=!1},{}],4:[function(t,n,s){n.exports=i;function i(){this._listeners={}}i.prototype.on=function(o,l,a){return(this._listeners[o]||(this._listeners[o]=[])).push({fn:l,ctx:a||this}),this},i.prototype.off=function(o,l){if(o===e)this._listeners={};else if(l===e)this._listeners[o]=[];else for(var a=this._listeners[o],u=0;u<a.length;)a[u].fn===l?a.splice(u,1):++u;return this},i.prototype.emit=function(o){var l=this._listeners[o];if(l){for(var a=[],u=1;u<arguments.length;)a.push(arguments[u++]);for(u=0;u<l.length;)l[u].fn.apply(l[u++].ctx,a)}return this}},{}],5:[function(t,n,s){n.exports=a;var i=t(1),o=t(7),l=o("fs");function a(u,c,f){return typeof c=="function"?(f=c,c={}):c||(c={}),f?!c.xhr&&l&&l.readFile?l.readFile(u,function(h,p){return h&&typeof XMLHttpRequest<"u"?a.xhr(u,c,f):h?f(h):f(null,c.binary?p:p.toString("utf8"))}):a.xhr(u,c,f):i(a,this,u,c)}a.xhr=function(u,c,f){var h=new XMLHttpRequest;h.onreadystatechange=function(){if(h.readyState!==4)return e;if(h.status!==0&&h.status!==200)return f(Error("status "+h.status));if(c.binary){var p=h.response;if(!p){p=[];for(var d=0;d<h.responseText.length;++d)p.push(h.responseText.charCodeAt(d)&255)}return f(null,typeof Uint8Array<"u"?new Uint8Array(p):p)}return f(null,h.responseText)},c.binary&&("overrideMimeType"in h&&h.overrideMimeType("text/plain; charset=x-user-defined"),h.responseType="arraybuffer"),h.open("GET",u),h.send()}},{1:1,7:7}],6:[function(t,n,s){n.exports=i(i);function i(c){return typeof Float32Array<"u"?(function(){var f=new Float32Array([-0]),h=new Uint8Array(f.buffer),p=h[3]===128;function d(w,_,b){f[0]=w,_[b]=h[0],_[b+1]=h[1],_[b+2]=h[2],_[b+3]=h[3]}function g(w,_,b){f[0]=w,_[b]=h[3],_[b+1]=h[2],_[b+2]=h[1],_[b+3]=h[0]}c.writeFloatLE=p?d:g,c.writeFloatBE=p?g:d;function m(w,_){return h[0]=w[_],h[1]=w[_+1],h[2]=w[_+2],h[3]=w[_+3],f[0]}function y(w,_){return h[3]=w[_],h[2]=w[_+1],h[1]=w[_+2],h[0]=w[_+3],f[0]}c.readFloatLE=p?m:y,c.readFloatBE=p?y:m})():(function(){function f(p,d,g,m){var y=d<0?1:0;if(y&&(d=-d),d===0)p(1/d>0?0:2147483648,g,m);else if(isNaN(d))p(2143289344,g,m);else if(d>34028234663852886e22)p((y<<31|2139095040)>>>0,g,m);else if(d<11754943508222875e-54)p((y<<31|Math.round(d/1401298464324817e-60))>>>0,g,m);else{var w=Math.floor(Math.log(d)/Math.LN2),_=Math.round(d*Math.pow(2,-w)*8388608)&8388607;p((y<<31|w+127<<23|_)>>>0,g,m)}}c.writeFloatLE=f.bind(null,o),c.writeFloatBE=f.bind(null,l);function h(p,d,g){var m=p(d,g),y=(m>>31)*2+1,w=m>>>23&255,_=m&8388607;return w===255?_?NaN:y*(1/0):w===0?y*1401298464324817e-60*_:y*Math.pow(2,w-150)*(_+8388608)}c.readFloatLE=h.bind(null,a),c.readFloatBE=h.bind(null,u)})(),typeof Float64Array<"u"?(function(){var f=new Float64Array([-0]),h=new Uint8Array(f.buffer),p=h[7]===128;function d(w,_,b){f[0]=w,_[b]=h[0],_[b+1]=h[1],_[b+2]=h[2],_[b+3]=h[3],_[b+4]=h[4],_[b+5]=h[5],_[b+6]=h[6],_[b+7]=h[7]}function g(w,_,b){f[0]=w,_[b]=h[7],_[b+1]=h[6],_[b+2]=h[5],_[b+3]=h[4],_[b+4]=h[3],_[b+5]=h[2],_[b+6]=h[1],_[b+7]=h[0]}c.writeDoubleLE=p?d:g,c.writeDoubleBE=p?g:d;function m(w,_){return h[0]=w[_],h[1]=w[_+1],h[2]=w[_+2],h[3]=w[_+3],h[4]=w[_+4],h[5]=w[_+5],h[6]=w[_+6],h[7]=w[_+7],f[0]}function y(w,_){return h[7]=w[_],h[6]=w[_+1],h[5]=w[_+2],h[4]=w[_+3],h[3]=w[_+4],h[2]=w[_+5],h[1]=w[_+6],h[0]=w[_+7],f[0]}c.readDoubleLE=p?m:y,c.readDoubleBE=p?y:m})():(function(){function f(p,d,g,m,y,w){var _=m<0?1:0;if(_&&(m=-m),m===0)p(0,y,w+d),p(1/m>0?0:2147483648,y,w+g);else if(isNaN(m))p(0,y,w+d),p(2146959360,y,w+g);else if(m>17976931348623157e292)p(0,y,w+d),p((_<<31|2146435072)>>>0,y,w+g);else{var b;if(m<22250738585072014e-324)b=m/5e-324,p(b>>>0,y,w+d),p((_<<31|b/4294967296)>>>0,y,w+g);else{var E=Math.floor(Math.log(m)/Math.LN2);E===1024&&(E=1023),b=m*Math.pow(2,-E),p(b*4503599627370496>>>0,y,w+d),p((_<<31|E+1023<<20|b*1048576&1048575)>>>0,y,w+g)}}}c.writeDoubleLE=f.bind(null,o,0,4),c.writeDoubleBE=f.bind(null,l,4,0);function h(p,d,g,m,y){var w=p(m,y+d),_=p(m,y+g),b=(_>>31)*2+1,E=_>>>20&2047,S=4294967296*(_&1048575)+w;return E===2047?S?NaN:b*(1/0):E===0?b*5e-324*S:b*Math.pow(2,E-1075)*(S+4503599627370496)}c.readDoubleLE=h.bind(null,a,0,4),c.readDoubleBE=h.bind(null,u,4,0)})(),c}function o(c,f,h){f[h]=c&255,f[h+1]=c>>>8&255,f[h+2]=c>>>16&255,f[h+3]=c>>>24}function l(c,f,h){f[h]=c>>>24,f[h+1]=c>>>16&255,f[h+2]=c>>>8&255,f[h+3]=c&255}function a(c,f){return(c[f]|c[f+1]<<8|c[f+2]<<16|c[f+3]<<24)>>>0}function u(c,f){return(c[f]<<24|c[f+1]<<16|c[f+2]<<8|c[f+3])>>>0}},{}],7:[function(t,n,s){n.exports=i;function i(o){try{var l=t(o);if(l&&(l.length||Object.keys(l).length))return l}catch{}return null}},{}],8:[function(t,n,s){var i=s,o=i.isAbsolute=function(a){return/^(?:\/|\w+:)/.test(a)},l=i.normalize=function(a){a=a.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var u=a.split("/"),c=o(a),f="";c&&(f=u.shift()+"/");for(var h=0;h<u.length;)u[h]===".."?h>0&&u[h-1]!==".."?u.splice(--h,2):c?u.splice(h,1):++h:u[h]==="."?u.splice(h,1):++h;return f+u.join("/")};i.resolve=function(a,u,c){return c||(u=l(u)),o(u)?u:(c||(a=l(a)),(a=a.replace(/(?:\/|^)[^/]+$/,"")).length?l(a+"/"+u):u)}},{}],9:[function(t,n,s){n.exports=i;function i(o,l,a){var u=a||8192,c=u>>>1,f=null,h=u;return function(p){if(p<1||p>c)return o(p);h+p>u&&(f=o(u),h=0);var d=l.call(f,h,h+=p);return h&7&&(h=(h|7)+1),d}}},{}],10:[function(t,n,s){var i=s;i.length=function(o){for(var l=0,a=0,u=0;u<o.length;++u)a=o.charCodeAt(u),a<128?l+=1:a<2048?l+=2:(a&64512)===55296&&(o.charCodeAt(u+1)&64512)===56320?(++u,l+=4):l+=3;return l},i.read=function(o,l,a){var u=a-l;if(u<1)return"";for(var c=null,f=[],h=0,p;l<a;)p=o[l++],p<128?f[h++]=p:p>191&&p<224?f[h++]=(p&31)<<6|o[l++]&63:p>239&&p<365?(p=((p&7)<<18|(o[l++]&63)<<12|(o[l++]&63)<<6|o[l++]&63)-65536,f[h++]=55296+(p>>10),f[h++]=56320+(p&1023)):f[h++]=(p&15)<<12|(o[l++]&63)<<6|o[l++]&63,h>8191&&((c||(c=[])).push(String.fromCharCode.apply(String,f)),h=0);return c?(h&&c.push(String.fromCharCode.apply(String,f.slice(0,h))),c.join("")):String.fromCharCode.apply(String,f.slice(0,h))},i.write=function(o,l,a){for(var u=a,c,f,h=0;h<o.length;++h)c=o.charCodeAt(h),c<128?l[a++]=c:c<2048?(l[a++]=c>>6|192,l[a++]=c&63|128):(c&64512)===55296&&((f=o.charCodeAt(h+1))&64512)===56320?(c=65536+((c&1023)<<10)+(f&1023),++h,l[a++]=c>>18|240,l[a++]=c>>12&63|128,l[a++]=c>>6&63|128,l[a++]=c&63|128):(l[a++]=c>>12|224,l[a++]=c>>6&63|128,l[a++]=c&63|128);return a-u}},{}],11:[function(t,n,s){n.exports=o;var i=/\/|\./;function o(a,u){i.test(a)||(a="google/protobuf/"+a+".proto",u={nested:{google:{nested:{protobuf:{nested:u}}}}}),o[a]=u}o("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var l;o("duration",{Duration:l={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),o("timestamp",{Timestamp:l}),o("empty",{Empty:{fields:{}}}),o("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),o("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),o("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),o.get=function(a){return o[a]||null}},{}],12:[function(t,n,s){var i=s,o=t(15),l=t(37);function a(c,f,h,p){if(f.resolvedType)if(f.resolvedType instanceof o){c("switch(d%s){",p);for(var d=f.resolvedType.values,g=Object.keys(d),m=0;m<g.length;++m)f.repeated&&d[g[m]]===f.typeDefault&&c("default:"),c("case%j:",g[m])("case %i:",d[g[m]])("m%s=%j",p,d[g[m]])("break");c("}")}else c('if(typeof d%s!=="object")',p)("throw TypeError(%j)",f.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",p,h,p);else{var y=!1;switch(f.type){case"double":case"float":c("m%s=Number(d%s)",p,p);break;case"uint32":case"fixed32":c("m%s=d%s>>>0",p,p);break;case"int32":case"sint32":case"sfixed32":c("m%s=d%s|0",p,p);break;case"uint64":y=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":c("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",p,p,y)('else if(typeof d%s==="string")',p)("m%s=parseInt(d%s,10)",p,p)('else if(typeof d%s==="number")',p)("m%s=d%s",p,p)('else if(typeof d%s==="object")',p)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",p,p,p,y?"true":"");break;case"bytes":c('if(typeof d%s==="string")',p)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",p,p,p)("else if(d%s.length)",p)("m%s=d%s",p,p);break;case"string":c("m%s=String(d%s)",p,p);break;case"bool":c("m%s=Boolean(d%s)",p,p);break}}return c}i.fromObject=function(c){var f=c.fieldsArray,h=l.codegen(["d"],c.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!f.length)return h("return new this.ctor");h("var m=new this.ctor");for(var p=0;p<f.length;++p){var d=f[p].resolve(),g=l.safeProp(d.name);d.map?(h("if(d%s){",g)('if(typeof d%s!=="object")',g)("throw TypeError(%j)",d.fullName+": object expected")("m%s={}",g)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",g),a(h,d,p,g+"[ks[i]]")("}")("}")):d.repeated?(h("if(d%s){",g)("if(!Array.isArray(d%s))",g)("throw TypeError(%j)",d.fullName+": array expected")("m%s=[]",g)("for(var i=0;i<d%s.length;++i){",g),a(h,d,p,g+"[i]")("}")("}")):(d.resolvedType instanceof o||h("if(d%s!=null){",g),a(h,d,p,g),d.resolvedType instanceof o||h("}"))}return h("return m")};function u(c,f,h,p){if(f.resolvedType)f.resolvedType instanceof o?c("d%s=o.enums===String?types[%i].values[m%s]:m%s",p,h,p,p):c("d%s=types[%i].toObject(m%s,o)",p,h,p);else{var d=!1;switch(f.type){case"double":case"float":c("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",p,p,p,p);break;case"uint64":d=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":c('if(typeof m%s==="number")',p)("d%s=o.longs===String?String(m%s):m%s",p,p,p)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",p,p,p,p,d?"true":"",p);break;case"bytes":c("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",p,p,p,p,p);break;default:c("d%s=m%s",p,p);break}}return c}i.toObject=function(c){var f=c.fieldsArray.slice().sort(l.compareFieldsById);if(!f.length)return l.codegen()("return {}");for(var h=l.codegen(["m","o"],c.name+"$toObject")("if(!o)")("o={}")("var d={}"),p=[],d=[],g=[],m=0;m<f.length;++m)f[m].partOf||(f[m].resolve().repeated?p:f[m].map?d:g).push(f[m]);if(p.length){for(h("if(o.arrays||o.defaults){"),m=0;m<p.length;++m)h("d%s=[]",l.safeProp(p[m].name));h("}")}if(d.length){for(h("if(o.objects||o.defaults){"),m=0;m<d.length;++m)h("d%s={}",l.safeProp(d[m].name));h("}")}if(g.length){for(h("if(o.defaults){"),m=0;m<g.length;++m){var y=g[m],w=l.safeProp(y.name);y.resolvedType instanceof o?h("d%s=o.enums===String?%j:%j",w,y.resolvedType.valuesById[y.typeDefault],y.typeDefault):y.long?h("if(util.Long){")("var n=new util.Long(%i,%i,%j)",y.typeDefault.low,y.typeDefault.high,y.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",w)("}else")("d%s=o.longs===String?%j:%i",w,y.typeDefault.toString(),y.typeDefault.toNumber()):y.bytes?h("d%s=o.bytes===String?%j:%s",w,String.fromCharCode.apply(String,y.typeDefault),"["+Array.prototype.slice.call(y.typeDefault).join(",")+"]"):h("d%s=%j",w,y.typeDefault)}h("}")}var _=!1;for(m=0;m<f.length;++m){var y=f[m],b=c._fieldsArray.indexOf(y),w=l.safeProp(y.name);y.map?(_||(_=!0,h("var ks2")),h("if(m%s&&(ks2=Object.keys(m%s)).length){",w,w)("d%s={}",w)("for(var j=0;j<ks2.length;++j){"),u(h,y,b,w+"[ks2[j]]")("}")):y.repeated?(h("if(m%s&&m%s.length){",w,w)("d%s=[]",w)("for(var j=0;j<m%s.length;++j){",w),u(h,y,b,w+"[j]")("}")):(h("if(m%s!=null&&m.hasOwnProperty(%j)){",w,y.name),u(h,y,b,w),y.partOf&&h("if(o.oneofs)")("d%s=%j",l.safeProp(y.partOf.name),y.name)),h("}")}return h("return d")}},{15:15,37:37}],13:[function(t,n,s){n.exports=u;var i=t(15),o=t(36),l=t(37);function a(c){return"missing required '"+c.name+"'"}function u(c){var f=l.codegen(["r","l"],c.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(c.fieldsArray.filter(function(y){return y.map}).length?",k":""))("while(r.pos<c){")("var t=r.uint32()");c.group&&f("if((t&7)===4)")("break"),f("switch(t>>>3){");for(var h=0;h<c.fieldsArray.length;++h){var p=c._fieldsArray[h].resolve(),d=p.resolvedType instanceof i?"int32":p.type,g="m"+l.safeProp(p.name);f("case %i:",p.id),p.map?(f("r.skip().pos++")("if(%s===util.emptyObject)",g)("%s={}",g)("k=r.%s()",p.keyType)("r.pos++"),o.long[p.keyType]!==e?o.basic[d]===e?f('%s[typeof k==="object"?util.longToHash(k):k]=types[%i].decode(r,r.uint32())',g,h):f('%s[typeof k==="object"?util.longToHash(k):k]=r.%s()',g,d):o.basic[d]===e?f("%s[k]=types[%i].decode(r,r.uint32())",g,h):f("%s[k]=r.%s()",g,d)):p.repeated?(f("if(!(%s&&%s.length))",g,g)("%s=[]",g),o.packed[d]!==e&&f("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",g,d)("}else"),o.basic[d]===e?f(p.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",g,h):f("%s.push(r.%s())",g,d)):o.basic[d]===e?f(p.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",g,h):f("%s=r.%s()",g,d),f("break")}for(f("default:")("r.skipType(t&7)")("break")("}")("}"),h=0;h<c._fieldsArray.length;++h){var m=c._fieldsArray[h];m.required&&f("if(!m.hasOwnProperty(%j))",m.name)("throw util.ProtocolError(%j,{instance:m})",a(m))}return f("return m")}},{15:15,36:36,37:37}],14:[function(t,n,s){n.exports=u;var i=t(15),o=t(36),l=t(37);function a(c,f,h,p){return f.resolvedType.group?c("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",h,p,(f.id<<3|3)>>>0,(f.id<<3|4)>>>0):c("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",h,p,(f.id<<3|2)>>>0)}function u(c){for(var f=l.codegen(["m","w"],c.name+"$encode")("if(!w)")("w=Writer.create()"),d,h,p=c.fieldsArray.slice().sort(l.compareFieldsById),d=0;d<p.length;++d){var g=p[d].resolve(),m=c._fieldsArray.indexOf(g),y=g.resolvedType instanceof i?"int32":g.type,w=o.basic[y];h="m"+l.safeProp(g.name),g.map?(f("if(%s!=null&&m.hasOwnProperty(%j)){",h,g.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",h)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(g.id<<3|2)>>>0,8|o.mapKey[g.keyType],g.keyType),w===e?f("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",m,h):f(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|w,y,h),f("}")("}")):g.repeated?(f("if(%s!=null&&%s.length){",h,h),g.packed&&o.packed[y]!==e?f("w.uint32(%i).fork()",(g.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",h)("w.%s(%s[i])",y,h)("w.ldelim()"):(f("for(var i=0;i<%s.length;++i)",h),w===e?a(f,g,m,h+"[i]"):f("w.uint32(%i).%s(%s[i])",(g.id<<3|w)>>>0,y,h)),f("}")):(g.optional&&f("if(%s!=null&&m.hasOwnProperty(%j))",h,g.name),w===e?a(f,g,m,h):f("w.uint32(%i).%s(%s)",(g.id<<3|w)>>>0,y,h))}return f("return w")}},{15:15,36:36,37:37}],15:[function(t,n,s){n.exports=a;var i=t(24);((a.prototype=Object.create(i.prototype)).constructor=a).className="Enum";var o=t(23),l=t(37);function a(u,c,f,h,p){if(i.call(this,u,f),c&&typeof c!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=h,this.comments=p||{},this.reserved=e,c)for(var d=Object.keys(c),g=0;g<d.length;++g)typeof c[d[g]]=="number"&&(this.valuesById[this.values[d[g]]=c[d[g]]]=d[g])}a.fromJSON=function(u,c){var f=new a(u,c.values,c.options,c.comment,c.comments);return f.reserved=c.reserved,f},a.prototype.toJSON=function(u){var c=u?!!u.keepComments:!1;return l.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:e,"comment",c?this.comment:e,"comments",c?this.comments:e])},a.prototype.add=function(u,c,f){if(!l.isString(u))throw TypeError("name must be a string");if(!l.isInteger(c))throw TypeError("id must be an integer");if(this.values[u]!==e)throw Error("duplicate name '"+u+"' in "+this);if(this.isReservedId(c))throw Error("id "+c+" is reserved in "+this);if(this.isReservedName(u))throw Error("name '"+u+"' is reserved in "+this);if(this.valuesById[c]!==e){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+c+" in "+this);this.values[u]=c}else this.valuesById[this.values[u]=c]=u;return this.comments[u]=f||null,this},a.prototype.remove=function(u){if(!l.isString(u))throw TypeError("name must be a string");var c=this.values[u];if(c==null)throw Error("name '"+u+"' does not exist in "+this);return delete this.valuesById[c],delete this.values[u],delete this.comments[u],this},a.prototype.isReservedId=function(u){return o.isReservedId(this.reserved,u)},a.prototype.isReservedName=function(u){return o.isReservedName(this.reserved,u)}},{23:23,24:24,37:37}],16:[function(t,n,s){n.exports=f;var i=t(24);((f.prototype=Object.create(i.prototype)).constructor=f).className="Field";var o=t(15),l=t(36),a=t(37),u,c=/^required|optional|repeated$/;f.fromJSON=function(h,p){return new f(h,p.id,p.type,p.rule,p.extend,p.options,p.comment)};function f(h,p,d,g,m,y,w){if(a.isObject(g)?(w=m,y=g,g=m=e):a.isObject(m)&&(w=y,y=m,m=e),i.call(this,h,y),!a.isInteger(p)||p<0)throw TypeError("id must be a non-negative integer");if(!a.isString(d))throw TypeError("type must be a string");if(g!==e&&!c.test(g=g.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(m!==e&&!a.isString(m))throw TypeError("extend must be a string");this.rule=g&&g!=="optional"?g:e,this.type=d,this.id=p,this.extend=m||e,this.required=g==="required",this.optional=!this.required,this.repeated=g==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=a.Long?l.long[d]!==e:!1,this.bytes=d==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=w}Object.defineProperty(f.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}}),f.prototype.setOption=function(h,p,d){return h==="packed"&&(this._packed=null),i.prototype.setOption.call(this,h,p,d)},f.prototype.toJSON=function(h){var p=h?!!h.keepComments:!1;return a.toObject(["rule",this.rule!=="optional"&&this.rule||e,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",p?this.comment:e])},f.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=l.defaults[this.type])===e&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof u?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof o&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==e&&this.resolvedType&&!(this.resolvedType instanceof o))&&delete this.options.packed,Object.keys(this.options).length||(this.options=e)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var h;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,h=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,h=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=h}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof u&&(this.parent.ctor.prototype[this.name]=this.defaultValue),i.prototype.resolve.call(this)},f.d=function(h,p,d,g){return typeof p=="function"?p=a.decorateType(p).name:p&&typeof p=="object"&&(p=a.decorateEnum(p).name),function(m,y){a.decorateType(m.constructor).add(new f(y,h,p,d,{default:g}))}},f._configure=function(h){u=h}},{15:15,24:24,36:36,37:37}],17:[function(t,n,s){var i=n.exports=t(18);i.build="light";function o(a,u,c){return typeof u=="function"?(c=u,u=new i.Root):u||(u=new i.Root),u.load(a,c)}i.load=o;function l(a,u){return u||(u=new i.Root),u.loadSync(a)}i.loadSync=l,i.encoder=t(14),i.decoder=t(13),i.verifier=t(40),i.converter=t(12),i.ReflectionObject=t(24),i.Namespace=t(23),i.Root=t(29),i.Enum=t(15),i.Type=t(35),i.Field=t(16),i.OneOf=t(25),i.MapField=t(20),i.Service=t(33),i.Method=t(22),i.Message=t(21),i.wrappers=t(41),i.types=t(36),i.util=t(37),i.ReflectionObject._configure(i.Root),i.Namespace._configure(i.Type,i.Service),i.Root._configure(i.Type),i.Field._configure(i.Type)},{12:12,13:13,14:14,15:15,16:16,18:18,20:20,21:21,22:22,23:23,24:24,25:25,29:29,33:33,35:35,36:36,37:37,40:40,41:41}],18:[function(t,n,s){var i=s;i.build="minimal",i.Writer=t(42),i.BufferWriter=t(43),i.Reader=t(27),i.BufferReader=t(28),i.util=t(39),i.rpc=t(31),i.roots=t(30),i.configure=o;function o(){i.Reader._configure(i.BufferReader),i.util._configure()}i.Writer._configure(i.BufferWriter),o()},{27:27,28:28,30:30,31:31,39:39,42:42,43:43}],19:[function(t,n,s){var i=n.exports=t(17);i.build="full",i.tokenize=t(34),i.parse=t(26),i.common=t(11),i.Root._configure(i.Type,i.parse,i.common)},{11:11,17:17,26:26,34:34}],20:[function(t,n,s){n.exports=a;var i=t(16);((a.prototype=Object.create(i.prototype)).constructor=a).className="MapField";var o=t(36),l=t(37);function a(u,c,f,h,p,d){if(i.call(this,u,c,h,e,e,p,d),!l.isString(f))throw TypeError("keyType must be a string");this.keyType=f,this.resolvedKeyType=null,this.map=!0}a.fromJSON=function(u,c){return new a(u,c.id,c.keyType,c.type,c.options,c.comment)},a.prototype.toJSON=function(u){var c=u?!!u.keepComments:!1;return l.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",c?this.comment:e])},a.prototype.resolve=function(){if(this.resolved)return this;if(o.mapKey[this.keyType]===e)throw Error("invalid key type: "+this.keyType);return i.prototype.resolve.call(this)},a.d=function(u,c,f){return typeof f=="function"?f=l.decorateType(f).name:f&&typeof f=="object"&&(f=l.decorateEnum(f).name),function(h,p){l.decorateType(h.constructor).add(new a(p,u,c,f))}}},{16:16,36:36,37:37}],21:[function(t,n,s){n.exports=o;var i=t(39);function o(l){if(l)for(var a=Object.keys(l),u=0;u<a.length;++u)this[a[u]]=l[a[u]]}o.create=function(l){return this.$type.create(l)},o.encode=function(l,a){return this.$type.encode(l,a)},o.encodeDelimited=function(l,a){return this.$type.encodeDelimited(l,a)},o.decode=function(l){return this.$type.decode(l)},o.decodeDelimited=function(l){return this.$type.decodeDelimited(l)},o.verify=function(l){return this.$type.verify(l)},o.fromObject=function(l){return this.$type.fromObject(l)},o.toObject=function(l,a){return this.$type.toObject(l,a)},o.prototype.toJSON=function(){return this.$type.toObject(this,i.toJSONOptions)}},{39:39}],22:[function(t,n,s){n.exports=l;var i=t(24);((l.prototype=Object.create(i.prototype)).constructor=l).className="Method";var o=t(37);function l(a,u,c,f,h,p,d,g){if(o.isObject(h)?(d=h,h=p=e):o.isObject(p)&&(d=p,p=e),!(u===e||o.isString(u)))throw TypeError("type must be a string");if(!o.isString(c))throw TypeError("requestType must be a string");if(!o.isString(f))throw TypeError("responseType must be a string");i.call(this,a,d),this.type=u||"rpc",this.requestType=c,this.requestStream=h?!0:e,this.responseType=f,this.responseStream=p?!0:e,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=g}l.fromJSON=function(a,u){return new l(a,u.type,u.requestType,u.responseType,u.requestStream,u.responseStream,u.options,u.comment)},l.prototype.toJSON=function(a){var u=a?!!a.keepComments:!1;return o.toObject(["type",this.type!=="rpc"&&this.type||e,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",u?this.comment:e])},l.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),i.prototype.resolve.call(this))}},{24:24,37:37}],23:[function(t,n,s){n.exports=h;var i=t(24);((h.prototype=Object.create(i.prototype)).constructor=h).className="Namespace";var o=t(15),l=t(16),a=t(37),u,c;h.fromJSON=function(d,g){return new h(d,g.options).addJSON(g.nested)};function f(d,g){if(!(d&&d.length))return e;for(var m={},y=0;y<d.length;++y)m[d[y].name]=d[y].toJSON(g);return m}h.arrayToJSON=f,h.isReservedId=function(d,g){if(d){for(var m=0;m<d.length;++m)if(typeof d[m]!="string"&&d[m][0]<=g&&d[m][1]>=g)return!0}return!1},h.isReservedName=function(d,g){if(d){for(var m=0;m<d.length;++m)if(d[m]===g)return!0}return!1};function h(d,g){i.call(this,d,g),this.nested=e,this._nestedArray=null}function p(d){return d._nestedArray=null,d}Object.defineProperty(h.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=a.toArray(this.nested))}}),h.prototype.toJSON=function(d){return a.toObject(["options",this.options,"nested",f(this.nestedArray,d)])},h.prototype.addJSON=function(d){var g=this;if(d)for(var m=Object.keys(d),y=0,w;y<m.length;++y)w=d[m[y]],g.add((w.fields!==e?u.fromJSON:w.values!==e?o.fromJSON:w.methods!==e?c.fromJSON:w.id!==e?l.fromJSON:h.fromJSON)(m[y],w));return this},h.prototype.get=function(d){return this.nested&&this.nested[d]||null},h.prototype.getEnum=function(d){if(this.nested&&this.nested[d]instanceof o)return this.nested[d].values;throw Error("no such enum: "+d)},h.prototype.add=function(d){if(!(d instanceof l&&d.extend!==e||d instanceof u||d instanceof o||d instanceof c||d instanceof h))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var g=this.get(d.name);if(g)if(g instanceof h&&d instanceof h&&!(g instanceof u||g instanceof c)){for(var m=g.nestedArray,y=0;y<m.length;++y)d.add(m[y]);this.remove(g),this.nested||(this.nested={}),d.setOptions(g.options,!0)}else throw Error("duplicate name '"+d.name+"' in "+this)}return this.nested[d.name]=d,d.onAdd(this),p(this)},h.prototype.remove=function(d){if(!(d instanceof i))throw TypeError("object must be a ReflectionObject");if(d.parent!==this)throw Error(d+" is not a member of "+this);return delete this.nested[d.name],Object.keys(this.nested).length||(this.nested=e),d.onRemove(this),p(this)},h.prototype.define=function(d,g){if(a.isString(d))d=d.split(".");else if(!Array.isArray(d))throw TypeError("illegal path");if(d&&d.length&&d[0]==="")throw Error("path must be relative");for(var m=this;d.length>0;){var y=d.shift();if(m.nested&&m.nested[y]){if(m=m.nested[y],!(m instanceof h))throw Error("path conflicts with non-namespace objects")}else m.add(m=new h(y))}return g&&m.addJSON(g),m},h.prototype.resolveAll=function(){for(var d=this.nestedArray,g=0;g<d.length;)d[g]instanceof h?d[g++].resolveAll():d[g++].resolve();return this.resolve()},h.prototype.lookup=function(d,g,m){if(typeof g=="boolean"?(m=g,g=e):g&&!Array.isArray(g)&&(g=[g]),a.isString(d)&&d.length){if(d===".")return this.root;d=d.split(".")}else if(!d.length)return this;if(d[0]==="")return this.root.lookup(d.slice(1),g);var y=this.get(d[0]);if(y){if(d.length===1){if(!g||g.indexOf(y.constructor)>-1)return y}else if(y instanceof h&&(y=y.lookup(d.slice(1),g,!0)))return y}else for(var w=0;w<this.nestedArray.length;++w)if(this._nestedArray[w]instanceof h&&(y=this._nestedArray[w].lookup(d,g,!0)))return y;return this.parent===null||m?null:this.parent.lookup(d,g)},h.prototype.lookupType=function(d){var g=this.lookup(d,[u]);if(!g)throw Error("no such type: "+d);return g},h.prototype.lookupEnum=function(d){var g=this.lookup(d,[o]);if(!g)throw Error("no such Enum '"+d+"' in "+this);return g},h.prototype.lookupTypeOrEnum=function(d){var g=this.lookup(d,[u,o]);if(!g)throw Error("no such Type or Enum '"+d+"' in "+this);return g},h.prototype.lookupService=function(d){var g=this.lookup(d,[c]);if(!g)throw Error("no such Service '"+d+"' in "+this);return g},h._configure=function(d,g){u=d,c=g}},{15:15,16:16,24:24,37:37}],24:[function(t,n,s){n.exports=l,l.className="ReflectionObject";var i=t(37),o;function l(a,u){if(!i.isString(a))throw TypeError("name must be a string");if(u&&!i.isObject(u))throw TypeError("options must be an object");this.options=u,this.name=a,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(l.prototype,{root:{get:function(){for(var a=this;a.parent!==null;)a=a.parent;return a}},fullName:{get:function(){for(var a=[this.name],u=this.parent;u;)a.unshift(u.name),u=u.parent;return a.join(".")}}}),l.prototype.toJSON=function(){throw Error()},l.prototype.onAdd=function(a){this.parent&&this.parent!==a&&this.parent.remove(this),this.parent=a,this.resolved=!1;var u=a.root;u instanceof o&&u._handleAdd(this)},l.prototype.onRemove=function(a){var u=a.root;u instanceof o&&u._handleRemove(this),this.parent=null,this.resolved=!1},l.prototype.resolve=function(){return this.resolved?this:(this.root instanceof o&&(this.resolved=!0),this)},l.prototype.getOption=function(a){return this.options?this.options[a]:e},l.prototype.setOption=function(a,u,c){return(!c||!this.options||this.options[a]===e)&&((this.options||(this.options={}))[a]=u),this},l.prototype.setOptions=function(a,u){if(a)for(var c=Object.keys(a),f=0;f<c.length;++f)this.setOption(c[f],a[c[f]],u);return this},l.prototype.toString=function(){var a=this.constructor.className,u=this.fullName;return u.length?a+" "+u:a},l._configure=function(a){o=a}},{37:37}],25:[function(t,n,s){n.exports=a;var i=t(24);((a.prototype=Object.create(i.prototype)).constructor=a).className="OneOf";var o=t(16),l=t(37);function a(c,f,h,p){if(Array.isArray(f)||(h=f,f=e),i.call(this,c,h),!(f===e||Array.isArray(f)))throw TypeError("fieldNames must be an Array");this.oneof=f||[],this.fieldsArray=[],this.comment=p}a.fromJSON=function(c,f){return new a(c,f.oneof,f.options,f.comment)},a.prototype.toJSON=function(c){var f=c?!!c.keepComments:!1;return l.toObject(["options",this.options,"oneof",this.oneof,"comment",f?this.comment:e])};function u(c){if(c.parent)for(var f=0;f<c.fieldsArray.length;++f)c.fieldsArray[f].parent||c.parent.add(c.fieldsArray[f])}a.prototype.add=function(c){if(!(c instanceof o))throw TypeError("field must be a Field");return c.parent&&c.parent!==this.parent&&c.parent.remove(c),this.oneof.push(c.name),this.fieldsArray.push(c),c.partOf=this,u(this),this},a.prototype.remove=function(c){if(!(c instanceof o))throw TypeError("field must be a Field");var f=this.fieldsArray.indexOf(c);if(f<0)throw Error(c+" is not a member of "+this);return this.fieldsArray.splice(f,1),f=this.oneof.indexOf(c.name),f>-1&&this.oneof.splice(f,1),c.partOf=null,this},a.prototype.onAdd=function(c){i.prototype.onAdd.call(this,c);for(var f=this,h=0;h<this.oneof.length;++h){var p=c.get(this.oneof[h]);p&&!p.partOf&&(p.partOf=f,f.fieldsArray.push(p))}u(this)},a.prototype.onRemove=function(c){for(var f=0,h;f<this.fieldsArray.length;++f)(h=this.fieldsArray[f]).parent&&h.parent.remove(h);i.prototype.onRemove.call(this,c)},a.d=function(){for(var c=new Array(arguments.length),f=0;f<arguments.length;)c[f]=arguments[f++];return function(h,p){l.decorateType(h.constructor).add(new a(p,c)),Object.defineProperty(h,p,{get:l.oneOfGetter(c),set:l.oneOfSetter(c)})}}},{16:16,24:24,37:37}],26:[function(t,n,s){n.exports=x,x.filename=null,x.defaults={keepCase:!1};var i=t(34),o=t(29),l=t(35),a=t(16),u=t(20),c=t(25),f=t(15),h=t(33),p=t(22),d=t(36),g=t(37),m=/^[1-9][0-9]*$/,y=/^-?[1-9][0-9]*$/,w=/^0[x][0-9a-fA-F]+$/,_=/^-?0[x][0-9a-fA-F]+$/,b=/^0[0-7]+$/,E=/^-?0[0-7]+$/,S=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,v=/^[a-zA-Z_][a-zA-Z_0-9]*$/,L=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,j=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function x(J,ue,$){ue instanceof o||($=ue,ue=new o),$||($=x.defaults);var Z=i(J,$.alternateCommentMode||!1),B=Z.next,X=Z.push,ie=Z.peek,M=Z.skip,He=Z.cmnt,st=!0,ye,q,te,re,oe=!1,Ee=ue,Ie=$.keepCase?function(A){return A}:g.camelCase;function z(A,O,P){var F=x.filename;return P||(x.filename=null),Error("illegal "+(O||"token")+" '"+A+"' ("+(F?F+", ":"")+"line "+Z.line+")")}function it(){var A=[],O;do{if((O=B())!=='"'&&O!=="'")throw z(O);A.push(B()),M(O),O=ie()}while(O==='"'||O==="'");return A.join("")}function sa(A){var O=B();switch(O){case"'":case'"':return X(O),it();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return tf(O,!0)}catch{if(L.test(O))return O;throw z(O,"value")}}function qn(A,O){var P,F;do O&&((P=ie())==='"'||P==="'")?A.push(it()):A.push([F=Ut(B()),M("to",!0)?Ut(B()):F]);while(M(",",!0));M(";")}function tf(A,O){var P=1;switch(A.charAt(0)==="-"&&(P=-1,A=A.substring(1)),A){case"inf":case"INF":case"Inf":return P*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(m.test(A))return P*parseInt(A,10);if(w.test(A))return P*parseInt(A,16);if(b.test(A))return P*parseInt(A,8);if(S.test(A))return P*parseFloat(A);throw z(A,"number",O)}function Ut(A,O){switch(A){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!O&&A.charAt(0)==="-")throw z(A,"id");if(y.test(A))return parseInt(A,10);if(_.test(A))return parseInt(A,16);if(E.test(A))return parseInt(A,8);throw z(A,"id")}function rf(){if(ye!==e)throw z("package");if(ye=B(),!L.test(ye))throw z(ye,"name");Ee=Ee.define(ye),M(";")}function nf(){var A=ie(),O;switch(A){case"weak":O=te||(te=[]),B();break;case"public":B();default:O=q||(q=[]);break}A=it(),M(";"),O.push(A)}function sf(){if(M("="),re=it(),oe=re==="proto3",!oe&&re!=="proto2")throw z(re,"syntax");M(";")}function zn(A,O){switch(O){case"option":return Ke(A,O),M(";"),!0;case"message":return of(A,O),!0;case"enum":return uf(A,O),!0;case"service":return ff(A,O),!0;case"extend":return pf(A,O),!0}return!1}function Ye(A,O,P){var F=Z.line;if(A&&(A.comment=He(),A.filename=x.filename),M("{",!0)){for(var he;(he=B())!=="}";)O(he);M(";",!0)}else P&&P(),M(";"),A&&typeof A.comment!="string"&&(A.comment=He(F))}function of(A,O){if(!v.test(O=B()))throw z(O,"type name");var P=new l(O);Ye(P,function(F){if(!zn(P,F))switch(F){case"map":lf(P);break;case"required":case"optional":case"repeated":$t(P,F);break;case"oneof":cf(P,F);break;case"extensions":qn(P.extensions||(P.extensions=[]));break;case"reserved":qn(P.reserved||(P.reserved=[]),!0);break;default:if(!oe||!L.test(F))throw z(F);X(F),$t(P,"optional");break}}),A.add(P)}function $t(A,O,P){var F=B();if(F==="group"){af(A,O);return}if(!L.test(F))throw z(F,"type");var he=B();if(!v.test(he))throw z(he,"name");he=Ie(he),M("=");var de=new a(he,Ut(B()),F,O,P);Ye(de,function(ot){if(ot==="option")Ke(de,ot),M(";");else throw z(ot)},function(){Jn(de)}),A.add(de),!oe&&de.repeated&&(d.packed[F]!==e||d.basic[F]===e)&&de.setOption("packed",!1,!0)}function af(A,O){var P=B();if(!v.test(P))throw z(P,"name");var F=g.lcFirst(P);P===F&&(P=g.ucFirst(P)),M("=");var he=Ut(B()),de=new l(P);de.group=!0;var ot=new a(F,he,P,O);ot.filename=x.filename,Ye(de,function(vt){switch(vt){case"option":Ke(de,vt),M(";");break;case"required":case"optional":case"repeated":$t(de,vt);break;default:throw z(vt)}}),A.add(de).add(ot)}function lf(A){M("<");var O=B();if(d.mapKey[O]===e)throw z(O,"type");M(",");var P=B();if(!L.test(P))throw z(P,"type");M(">");var F=B();if(!v.test(F))throw z(F,"name");M("=");var he=new u(Ie(F),Ut(B()),O,P);Ye(he,function(de){if(de==="option")Ke(he,de),M(";");else throw z(de)},function(){Jn(he)}),A.add(he)}function cf(A,O){if(!v.test(O=B()))throw z(O,"name");var P=new c(Ie(O));Ye(P,function(F){F==="option"?(Ke(P,F),M(";")):(X(F),$t(P,"optional"))}),A.add(P)}function uf(A,O){if(!v.test(O=B()))throw z(O,"name");var P=new f(O);Ye(P,function(F){switch(F){case"option":Ke(P,F),M(";");break;case"reserved":qn(P.reserved||(P.reserved=[]),!0);break;default:hf(P,F)}}),A.add(P)}function hf(A,O){if(!v.test(O))throw z(O,"name");M("=");var P=Ut(B(),!0),F={};Ye(F,function(he){if(he==="option")Ke(F,he),M(";");else throw z(he)},function(){Jn(F)}),A.add(O,P,F.comment)}function Ke(A,O){var P=M("(",!0);if(!L.test(O=B()))throw z(O,"name");var F=O;P&&(M(")"),F="("+F+")",O=ie(),j.test(O)&&(F+=O,B())),M("="),Hn(A,F)}function Hn(A,O){if(M("{",!0))do{if(!v.test(Ce=B()))throw z(Ce,"name");ie()==="{"?Hn(A,O+"."+Ce):(M(":"),ie()==="{"?Hn(A,O+"."+Ce):ia(A,O+"."+Ce,sa()))}while(!M("}",!0));else ia(A,O,sa())}function ia(A,O,P){A.setOption&&A.setOption(O,P)}function Jn(A){if(M("[",!0)){do Ke(A,"option");while(M(",",!0));M("]")}return A}function ff(A,O){if(!v.test(O=B()))throw z(O,"service name");var P=new h(O);Ye(P,function(F){if(!zn(P,F))if(F==="rpc")df(P,F);else throw z(F)}),A.add(P)}function df(A,O){var P=O;if(!v.test(O=B()))throw z(O,"name");var F=O,he,de,ot,vt;if(M("("),M("stream",!0)&&(de=!0),!L.test(O=B())||(he=O,M(")"),M("returns"),M("("),M("stream",!0)&&(vt=!0),!L.test(O=B())))throw z(O);ot=O,M(")");var Zn=new p(F,P,he,ot,de,vt);Ye(Zn,function(Gn){if(Gn==="option")Ke(Zn,Gn),M(";");else throw z(Gn)}),A.add(Zn)}function pf(A,O){if(!L.test(O=B()))throw z(O,"reference");var P=O;Ye(null,function(F){switch(F){case"required":case"repeated":case"optional":$t(A,F,P);break;default:if(!oe||!L.test(F))throw z(F);X(F),$t(A,"optional",P);break}})}for(var Ce;(Ce=B())!==null;)switch(Ce){case"package":if(!st)throw z(Ce);rf();break;case"import":if(!st)throw z(Ce);nf();break;case"syntax":if(!st)throw z(Ce);sf();break;case"option":if(!st)throw z(Ce);Ke(Ee,Ce),M(";");break;default:if(zn(Ee,Ce)){st=!1;continue}throw z(Ce)}return x.filename=null,{package:ye,imports:q,weakImports:te,syntax:re,root:ue}}},{15:15,16:16,20:20,22:22,25:25,29:29,33:33,34:34,35:35,36:36,37:37}],27:[function(t,n,s){n.exports=c;var i=t(39),o,l=i.LongBits,a=i.utf8;function u(g,m){return RangeError("index out of range: "+g.pos+" + "+(m||1)+" > "+g.len)}function c(g){this.buf=g,this.pos=0,this.len=g.length}var f=typeof Uint8Array<"u"?function(g){if(g instanceof Uint8Array||Array.isArray(g))return new c(g);throw Error("illegal buffer")}:function(g){if(Array.isArray(g))return new c(g);throw Error("illegal buffer")};c.create=i.Buffer?function(g){return(c.create=function(m){return i.Buffer.isBuffer(m)?new o(m):f(m)})(g)}:f,c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(function(){var g=4294967295;return function(){if(g=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(g=(g|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(g=(g|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return g;if((this.pos+=5)>this.len)throw this.pos=this.len,u(this,10);return g}})(),c.prototype.int32=function(){return this.uint32()|0},c.prototype.sint32=function(){var g=this.uint32();return g>>>1^-(g&1)|0};function h(){var g=new l(0,0),m=0;if(this.len-this.pos>4){for(;m<4;++m)if(g.lo=(g.lo|(this.buf[this.pos]&127)<<m*7)>>>0,this.buf[this.pos++]<128)return g;if(g.lo=(g.lo|(this.buf[this.pos]&127)<<28)>>>0,g.hi=(g.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return g;m=0}else{for(;m<3;++m){if(this.pos>=this.len)throw u(this);if(g.lo=(g.lo|(this.buf[this.pos]&127)<<m*7)>>>0,this.buf[this.pos++]<128)return g}return g.lo=(g.lo|(this.buf[this.pos++]&127)<<m*7)>>>0,g}if(this.len-this.pos>4){for(;m<5;++m)if(g.hi=(g.hi|(this.buf[this.pos]&127)<<m*7+3)>>>0,this.buf[this.pos++]<128)return g}else for(;m<5;++m){if(this.pos>=this.len)throw u(this);if(g.hi=(g.hi|(this.buf[this.pos]&127)<<m*7+3)>>>0,this.buf[this.pos++]<128)return g}throw Error("invalid varint encoding")}c.prototype.bool=function(){return this.uint32()!==0};function p(g,m){return(g[m-4]|g[m-3]<<8|g[m-2]<<16|g[m-1]<<24)>>>0}c.prototype.fixed32=function(){if(this.pos+4>this.len)throw u(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw u(this,4);return p(this.buf,this.pos+=4)|0};function d(){if(this.pos+8>this.len)throw u(this,8);return new l(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.prototype.float=function(){if(this.pos+4>this.len)throw u(this,4);var g=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,g},c.prototype.double=function(){if(this.pos+8>this.len)throw u(this,4);var g=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,g},c.prototype.bytes=function(){var g=this.uint32(),m=this.pos,y=this.pos+g;if(y>this.len)throw u(this,g);return this.pos+=g,Array.isArray(this.buf)?this.buf.slice(m,y):m===y?new this.buf.constructor(0):this._slice.call(this.buf,m,y)},c.prototype.string=function(){var g=this.bytes();return a.read(g,0,g.length)},c.prototype.skip=function(g){if(typeof g=="number"){if(this.pos+g>this.len)throw u(this,g);this.pos+=g}else do if(this.pos>=this.len)throw u(this);while(this.buf[this.pos++]&128);return this},c.prototype.skipType=function(g){switch(g){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:do{if((g=this.uint32()&7)===4)break;this.skipType(g)}while(!0);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+g+" at offset "+this.pos)}return this},c._configure=function(g){o=g;var m=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return h.call(this)[m](!1)},uint64:function(){return h.call(this)[m](!0)},sint64:function(){return h.call(this).zzDecode()[m](!1)},fixed64:function(){return d.call(this)[m](!0)},sfixed64:function(){return d.call(this)[m](!1)}})}},{39:39}],28:[function(t,n,s){n.exports=l;var i=t(27);(l.prototype=Object.create(i.prototype)).constructor=l;var o=t(39);function l(a){i.call(this,a)}o.Buffer&&(l.prototype._slice=o.Buffer.prototype.slice),l.prototype.string=function(){var a=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len))}},{27:27,39:39}],29:[function(t,n,s){n.exports=p;var i=t(23);((p.prototype=Object.create(i.prototype)).constructor=p).className="Root";var o=t(16),l=t(15),a=t(25),u=t(37),c,f,h;function p(y){i.call(this,"",y),this.deferred=[],this.files=[]}p.fromJSON=function(y,w){return w||(w=new p),y.options&&w.setOptions(y.options),w.addJSON(y.nested)},p.prototype.resolvePath=u.path.resolve;function d(){}p.prototype.load=function y(w,_,b){typeof _=="function"&&(b=_,_=e);var E=this;if(!b)return u.asPromise(y,E,w,_);var S=b===d;function v($,Z){if(b){var B=b;if(b=null,S)throw $;B($,Z)}}function L($,Z){try{if(u.isString(Z)&&Z.charAt(0)==="{"&&(Z=JSON.parse(Z)),!u.isString(Z))E.setOptions(Z.options).addJSON(Z.nested);else{f.filename=$;var B=f(Z,E,_),X,ie=0;if(B.imports)for(;ie<B.imports.length;++ie)(X=E.resolvePath($,B.imports[ie]))&&j(X);if(B.weakImports)for(ie=0;ie<B.weakImports.length;++ie)(X=E.resolvePath($,B.weakImports[ie]))&&j(X,!0)}}catch(M){v(M)}!S&&!x&&v(null,E)}function j($,Z){var B=$.lastIndexOf("google/protobuf/");if(B>-1){var X=$.substring(B);X in h&&($=X)}if(!(E.files.indexOf($)>-1)){if(E.files.push($),$ in h){S?L($,h[$]):(++x,setTimeout(function(){--x,L($,h[$])}));return}if(S){var ie;try{ie=u.fs.readFileSync($).toString("utf8")}catch(M){Z||v(M);return}L($,ie)}else++x,u.fetch($,function(M,He){if(--x,!!b){if(M){Z?x||v(null,E):v(M);return}L($,He)}})}}var x=0;u.isString(w)&&(w=[w]);for(var J=0,ue;J<w.length;++J)(ue=E.resolvePath("",w[J]))&&j(ue);return S?E:(x||v(null,E),e)},p.prototype.loadSync=function(y,w){if(!u.isNode)throw Error("not supported");return this.load(y,w,d)},p.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(y){return"'extend "+y.extend+"' in "+y.parent.fullName}).join(", "));return i.prototype.resolveAll.call(this)};var g=/^[A-Z]/;function m(y,w){var _=w.parent.lookup(w.extend);if(_){var b=new o(w.fullName,w.id,w.type,w.rule,e,w.options);return b.declaringField=w,w.extensionField=b,_.add(b),!0}return!1}p.prototype._handleAdd=function(y){if(y instanceof o)y.extend!==e&&!y.extensionField&&(m(this,y)||this.deferred.push(y));else if(y instanceof l)g.test(y.name)&&(y.parent[y.name]=y.values);else if(!(y instanceof a)){if(y instanceof c)for(var w=0;w<this.deferred.length;)m(this,this.deferred[w])?this.deferred.splice(w,1):++w;for(var _=0;_<y.nestedArray.length;++_)this._handleAdd(y._nestedArray[_]);g.test(y.name)&&(y.parent[y.name]=y)}},p.prototype._handleRemove=function(y){if(y instanceof o){if(y.extend!==e)if(y.extensionField)y.extensionField.parent.remove(y.extensionField),y.extensionField=null;else{var w=this.deferred.indexOf(y);w>-1&&this.deferred.splice(w,1)}}else if(y instanceof l)g.test(y.name)&&delete y.parent[y.name];else if(y instanceof i){for(var _=0;_<y.nestedArray.length;++_)this._handleRemove(y._nestedArray[_]);g.test(y.name)&&delete y.parent[y.name]}},p._configure=function(y,w,_){c=y,f=w,h=_}},{15:15,16:16,23:23,25:25,37:37}],30:[function(t,n,s){n.exports={}},{}],31:[function(t,n,s){var i=s;i.Service=t(32)},{32:32}],32:[function(t,n,s){n.exports=o;var i=t(39);(o.prototype=Object.create(i.EventEmitter.prototype)).constructor=o;function o(l,a,u){if(typeof l!="function")throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=l,this.requestDelimited=!!a,this.responseDelimited=!!u}o.prototype.rpcCall=function l(a,u,c,f,h){if(!f)throw TypeError("request must be specified");var p=this;if(!h)return i.asPromise(l,p,a,u,c,f);if(!p.rpcImpl)return setTimeout(function(){h(Error("already ended"))},0),e;try{return p.rpcImpl(a,u[p.requestDelimited?"encodeDelimited":"encode"](f).finish(),function(d,g){if(d)return p.emit("error",d,a),h(d);if(g===null)return p.end(!0),e;if(!(g instanceof c))try{g=c[p.responseDelimited?"decodeDelimited":"decode"](g)}catch(m){return p.emit("error",m,a),h(m)}return p.emit("data",g,a),h(null,g)})}catch(d){return p.emit("error",d,a),setTimeout(function(){h(d)},0),e}},o.prototype.end=function(l){return this.rpcImpl&&(l||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{39:39}],33:[function(t,n,s){n.exports=u;var i=t(23);((u.prototype=Object.create(i.prototype)).constructor=u).className="Service";var o=t(22),l=t(37),a=t(31);function u(f,h){i.call(this,f,h),this.methods={},this._methodsArray=null}u.fromJSON=function(f,h){var p=new u(f,h.options);if(h.methods)for(var d=Object.keys(h.methods),g=0;g<d.length;++g)p.add(o.fromJSON(d[g],h.methods[d[g]]));return h.nested&&p.addJSON(h.nested),p.comment=h.comment,p},u.prototype.toJSON=function(f){var h=i.prototype.toJSON.call(this,f),p=f?!!f.keepComments:!1;return l.toObject(["options",h&&h.options||e,"methods",i.arrayToJSON(this.methodsArray,f)||{},"nested",h&&h.nested||e,"comment",p?this.comment:e])},Object.defineProperty(u.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=l.toArray(this.methods))}});function c(f){return f._methodsArray=null,f}u.prototype.get=function(f){return this.methods[f]||i.prototype.get.call(this,f)},u.prototype.resolveAll=function(){for(var f=this.methodsArray,h=0;h<f.length;++h)f[h].resolve();return i.prototype.resolve.call(this)},u.prototype.add=function(f){if(this.get(f.name))throw Error("duplicate name '"+f.name+"' in "+this);return f instanceof o?(this.methods[f.name]=f,f.parent=this,c(this)):i.prototype.add.call(this,f)},u.prototype.remove=function(f){if(f instanceof o){if(this.methods[f.name]!==f)throw Error(f+" is not a member of "+this);return delete this.methods[f.name],f.parent=null,c(this)}return i.prototype.remove.call(this,f)},u.prototype.create=function(f,h,p){for(var d=new a.Service(f,h,p),g=0,m;g<this.methodsArray.length;++g){var y=l.lcFirst((m=this._methodsArray[g]).resolve().name).replace(/[^$\w_]/g,"");d[y]=l.codegen(["r","c"],l.isReserved(y)?y+"_":y)("return this.rpcCall(m,q,s,r,c)")({m,q:m.resolvedRequestType.ctor,s:m.resolvedResponseType.ctor})}return d}},{22:22,23:23,31:31,37:37}],34:[function(t,n,s){n.exports=g;var i=/[\s{}=;:[\],'"()<>]/g,o=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,l=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,a=/^ *[*/]+ */,u=/^\s*\*?\/*/,c=/\n/g,f=/\s/,h=/\\(.?)/g,p={0:"\0",r:"\r",n:`
`,t:"	"};function d(m){return m.replace(h,function(y,w){switch(w){case"\\":case"":return w;default:return p[w]||""}})}g.unescape=d;function g(m,y){m=m.toString();var w=0,_=m.length,b=1,E=null,S=null,v=0,L=!1,j=[],x=null;function J(q){return Error("illegal "+q+" (line "+b+")")}function ue(){var q=x==="'"?l:o;q.lastIndex=w-1;var te=q.exec(m);if(!te)throw J("string");return w=q.lastIndex,M(x),x=null,d(te[1])}function $(q){return m.charAt(q)}function Z(q,te){E=m.charAt(q++),v=b,L=!1;var re;y?re=2:re=3;var oe=q-re,Ee;do if(--oe<0||(Ee=m.charAt(oe))===`
`){L=!0;break}while(Ee===" "||Ee==="	");for(var Ie=m.substring(q,te).split(c),z=0;z<Ie.length;++z)Ie[z]=Ie[z].replace(y?u:a,"").trim();S=Ie.join(`
`).trim()}function B(q){var te=X(q),re=m.substring(q,te),oe=/^\s*\/{1,2}/.test(re);return oe}function X(q){for(var te=q;te<_&&$(te)!==`
`;)te++;return te}function ie(){if(j.length>0)return j.shift();if(x)return ue();var q,te,re,oe,Ee;do{if(w===_)return null;for(q=!1;f.test(re=$(w));)if(re===`
`&&++b,++w===_)return null;if($(w)==="/"){if(++w===_)throw J("comment");if($(w)==="/")if(y){if(oe=w,Ee=!1,B(w)){Ee=!0;do{if(w=X(w),w===_)break;w++}while(B(w))}else w=Math.min(_,X(w)+1);Ee&&Z(oe,w),b++,q=!0}else{for(Ee=$(oe=w+1)==="/";$(++w)!==`
`;)if(w===_)return null;++w,Ee&&Z(oe,w-1),++b,q=!0}else if((re=$(w))==="*"){oe=w+1,Ee=y||$(oe)==="*";do{if(re===`
`&&++b,++w===_)throw J("comment");te=re,re=$(w)}while(te!=="*"||re!=="/");++w,Ee&&Z(oe,w-2),q=!0}else return"/"}}while(q);var Ie=w;i.lastIndex=0;var z=i.test($(Ie++));if(!z)for(;Ie<_&&!i.test($(Ie));)++Ie;var it=m.substring(w,w=Ie);return(it==='"'||it==="'")&&(x=it),it}function M(q){j.push(q)}function He(){if(!j.length){var q=ie();if(q===null)return null;M(q)}return j[0]}function st(q,te){var re=He(),oe=re===q;if(oe)return ie(),!0;if(!te)throw J("token '"+re+"', '"+q+"' expected");return!1}function ye(q){var te=null;return q===e?v===b-1&&(y||E==="*"||L)&&(te=S):(v<q&&He(),v===q&&!L&&(y||E==="/")&&(te=S)),te}return Object.defineProperty({next:ie,peek:He,push:M,skip:st,cmnt:ye},"line",{get:function(){return b}})}},{}],35:[function(t,n,s){n.exports=b;var i=t(23);((b.prototype=Object.create(i.prototype)).constructor=b).className="Type";var o=t(15),l=t(25),a=t(16),u=t(20),c=t(33),f=t(21),h=t(27),p=t(42),d=t(37),g=t(14),m=t(13),y=t(40),w=t(12),_=t(41);function b(S,v){i.call(this,S,v),this.fields={},this.oneofs=e,this.extensions=e,this.reserved=e,this.group=e,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(b.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var S=Object.keys(this.fields),v=0;v<S.length;++v){var L=this.fields[S[v]],j=L.id;if(this._fieldsById[j])throw Error("duplicate id "+j+" in "+this);this._fieldsById[j]=L}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=d.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=d.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=b.generateConstructor(this)())},set:function(S){var v=S.prototype;v instanceof f||((S.prototype=new f).constructor=S,d.merge(S.prototype,v)),S.$type=S.prototype.$type=this,d.merge(S,f,!0),this._ctor=S;for(var L=0;L<this.fieldsArray.length;++L)this._fieldsArray[L].resolve();var j={};for(L=0;L<this.oneofsArray.length;++L)j[this._oneofsArray[L].resolve().name]={get:d.oneOfGetter(this._oneofsArray[L].oneof),set:d.oneOfSetter(this._oneofsArray[L].oneof)};L&&Object.defineProperties(S.prototype,j)}}}),b.generateConstructor=function(S){for(var v=d.codegen(["p"],S.name),L=0,j;L<S.fieldsArray.length;++L)(j=S._fieldsArray[L]).map?v("this%s={}",d.safeProp(j.name)):j.repeated&&v("this%s=[]",d.safeProp(j.name));return v("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function E(S){return S._fieldsById=S._fieldsArray=S._oneofsArray=null,delete S.encode,delete S.decode,delete S.verify,S}b.fromJSON=function(S,v){var L=new b(S,v.options);L.extensions=v.extensions,L.reserved=v.reserved;for(var j=Object.keys(v.fields),x=0;x<j.length;++x)L.add((typeof v.fields[j[x]].keyType<"u"?u.fromJSON:a.fromJSON)(j[x],v.fields[j[x]]));if(v.oneofs)for(j=Object.keys(v.oneofs),x=0;x<j.length;++x)L.add(l.fromJSON(j[x],v.oneofs[j[x]]));if(v.nested)for(j=Object.keys(v.nested),x=0;x<j.length;++x){var J=v.nested[j[x]];L.add((J.id!==e?a.fromJSON:J.fields!==e?b.fromJSON:J.values!==e?o.fromJSON:J.methods!==e?c.fromJSON:i.fromJSON)(j[x],J))}return v.extensions&&v.extensions.length&&(L.extensions=v.extensions),v.reserved&&v.reserved.length&&(L.reserved=v.reserved),v.group&&(L.group=!0),v.comment&&(L.comment=v.comment),L},b.prototype.toJSON=function(S){var v=i.prototype.toJSON.call(this,S),L=S?!!S.keepComments:!1;return d.toObject(["options",v&&v.options||e,"oneofs",i.arrayToJSON(this.oneofsArray,S),"fields",i.arrayToJSON(this.fieldsArray.filter(function(j){return!j.declaringField}),S)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:e,"reserved",this.reserved&&this.reserved.length?this.reserved:e,"group",this.group||e,"nested",v&&v.nested||e,"comment",L?this.comment:e])},b.prototype.resolveAll=function(){for(var S=this.fieldsArray,v=0;v<S.length;)S[v++].resolve();var L=this.oneofsArray;for(v=0;v<L.length;)L[v++].resolve();return i.prototype.resolveAll.call(this)},b.prototype.get=function(S){return this.fields[S]||this.oneofs&&this.oneofs[S]||this.nested&&this.nested[S]||null},b.prototype.add=function(S){if(this.get(S.name))throw Error("duplicate name '"+S.name+"' in "+this);if(S instanceof a&&S.extend===e){if(this._fieldsById?this._fieldsById[S.id]:this.fieldsById[S.id])throw Error("duplicate id "+S.id+" in "+this);if(this.isReservedId(S.id))throw Error("id "+S.id+" is reserved in "+this);if(this.isReservedName(S.name))throw Error("name '"+S.name+"' is reserved in "+this);return S.parent&&S.parent.remove(S),this.fields[S.name]=S,S.message=this,S.onAdd(this),E(this)}return S instanceof l?(this.oneofs||(this.oneofs={}),this.oneofs[S.name]=S,S.onAdd(this),E(this)):i.prototype.add.call(this,S)},b.prototype.remove=function(S){if(S instanceof a&&S.extend===e){if(!this.fields||this.fields[S.name]!==S)throw Error(S+" is not a member of "+this);return delete this.fields[S.name],S.parent=null,S.onRemove(this),E(this)}if(S instanceof l){if(!this.oneofs||this.oneofs[S.name]!==S)throw Error(S+" is not a member of "+this);return delete this.oneofs[S.name],S.parent=null,S.onRemove(this),E(this)}return i.prototype.remove.call(this,S)},b.prototype.isReservedId=function(S){return i.isReservedId(this.reserved,S)},b.prototype.isReservedName=function(S){return i.isReservedName(this.reserved,S)},b.prototype.create=function(S){return new this.ctor(S)},b.prototype.setup=function(){for(var S=this.fullName,v=[],L=0;L<this.fieldsArray.length;++L)v.push(this._fieldsArray[L].resolve().resolvedType);this.encode=g(this)({Writer:p,types:v,util:d}),this.decode=m(this)({Reader:h,types:v,util:d}),this.verify=y(this)({types:v,util:d}),this.fromObject=w.fromObject(this)({types:v,util:d}),this.toObject=w.toObject(this)({types:v,util:d});var j=_[S];if(j){var x=Object.create(this);x.fromObject=this.fromObject,this.fromObject=j.fromObject.bind(x),x.toObject=this.toObject,this.toObject=j.toObject.bind(x)}return this},b.prototype.encode=function(S,v){return this.setup().encode(S,v)},b.prototype.encodeDelimited=function(S,v){return this.encode(S,v&&v.len?v.fork():v).ldelim()},b.prototype.decode=function(S,v){return this.setup().decode(S,v)},b.prototype.decodeDelimited=function(S){return S instanceof h||(S=h.create(S)),this.decode(S,S.uint32())},b.prototype.verify=function(S){return this.setup().verify(S)},b.prototype.fromObject=function(S){return this.setup().fromObject(S)},b.prototype.toObject=function(S,v){return this.setup().toObject(S,v)},b.d=function(S){return function(v){d.decorateType(v,S)}}},{12:12,13:13,14:14,15:15,16:16,20:20,21:21,23:23,25:25,27:27,33:33,37:37,40:40,41:41,42:42}],36:[function(t,n,s){var i=s,o=t(37),l=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function a(u,c){var f=0,h={};for(c|=0;f<u.length;)h[l[f+c]]=u[f++];return h}i.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),i.defaults=a([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",o.emptyArray,null]),i.long=a([0,0,0,1,1],7),i.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2),i.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0])},{37:37}],37:[function(t,n,s){var i=n.exports=t(39),o=t(30),l,a;i.codegen=t(3),i.fetch=t(5),i.path=t(8),i.fs=i.inquire("fs"),i.toArray=function(p){if(p){for(var d=Object.keys(p),g=new Array(d.length),m=0;m<d.length;)g[m]=p[d[m++]];return g}return[]},i.toObject=function(p){for(var d={},g=0;g<p.length;){var m=p[g++],y=p[g++];y!==e&&(d[m]=y)}return d};var u=/\\/g,c=/"/g;i.isReserved=function(p){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(p)},i.safeProp=function(p){return!/^[$\w_]+$/.test(p)||i.isReserved(p)?'["'+p.replace(u,"\\\\").replace(c,'\\"')+'"]':"."+p},i.ucFirst=function(p){return p.charAt(0).toUpperCase()+p.substring(1)};var f=/_([a-z])/g;i.camelCase=function(p){return p.substring(0,1)+p.substring(1).replace(f,function(d,g){return g.toUpperCase()})},i.compareFieldsById=function(p,d){return p.id-d.id},i.decorateType=function(p,d){if(p.$type)return d&&p.$type.name!==d&&(i.decorateRoot.remove(p.$type),p.$type.name=d,i.decorateRoot.add(p.$type)),p.$type;l||(l=t(35));var g=new l(d||p.name);return i.decorateRoot.add(g),g.ctor=p,Object.defineProperty(p,"$type",{value:g,enumerable:!1}),Object.defineProperty(p.prototype,"$type",{value:g,enumerable:!1}),g};var h=0;i.decorateEnum=function(p){if(p.$type)return p.$type;a||(a=t(15));var d=new a("Enum"+h++,p);return i.decorateRoot.add(d),Object.defineProperty(p,"$type",{value:d,enumerable:!1}),d},Object.defineProperty(i,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(t(29)))}})},{15:15,29:29,3:3,30:30,35:35,39:39,5:5,8:8}],38:[function(t,n,s){n.exports=o;var i=t(39);function o(c,f){this.lo=c>>>0,this.hi=f>>>0}var l=o.zero=new o(0,0);l.toNumber=function(){return 0},l.zzEncode=l.zzDecode=function(){return this},l.length=function(){return 1};var a=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(c){if(c===0)return l;var f=c<0;f&&(c=-c);var h=c>>>0,p=(c-h)/4294967296>>>0;return f&&(p=~p>>>0,h=~h>>>0,++h>4294967295&&(h=0,++p>4294967295&&(p=0))),new o(h,p)},o.from=function(c){if(typeof c=="number")return o.fromNumber(c);if(i.isString(c))if(i.Long)c=i.Long.fromString(c);else return o.fromNumber(parseInt(c,10));return c.low||c.high?new o(c.low>>>0,c.high>>>0):l},o.prototype.toNumber=function(c){if(!c&&this.hi>>>31){var f=~this.lo+1>>>0,h=~this.hi>>>0;return f||(h=h+1>>>0),-(f+h*4294967296)}return this.lo+this.hi*4294967296},o.prototype.toLong=function(c){return i.Long?new i.Long(this.lo|0,this.hi|0,!!c):{low:this.lo|0,high:this.hi|0,unsigned:!!c}};var u=String.prototype.charCodeAt;o.fromHash=function(c){return c===a?l:new o((u.call(c,0)|u.call(c,1)<<8|u.call(c,2)<<16|u.call(c,3)<<24)>>>0,(u.call(c,4)|u.call(c,5)<<8|u.call(c,6)<<16|u.call(c,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var c=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^c)>>>0,this.lo=(this.lo<<1^c)>>>0,this},o.prototype.zzDecode=function(){var c=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^c)>>>0,this.hi=(this.hi>>>1^c)>>>0,this},o.prototype.length=function(){var c=this.lo,f=(this.lo>>>28|this.hi<<4)>>>0,h=this.hi>>>24;return h===0?f===0?c<16384?c<128?1:2:c<2097152?3:4:f<16384?f<128?5:6:f<2097152?7:8:h<128?9:10}},{39:39}],39:[function(t,n,s){var i=s;i.asPromise=t(1),i.base64=t(2),i.EventEmitter=t(4),i.float=t(6),i.inquire=t(7),i.utf8=t(10),i.pool=t(9),i.LongBits=t(38),i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isNode=!!(sr.process&&sr.process.versions&&sr.process.versions.node),i.isInteger=Number.isInteger||function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a},i.isString=function(a){return typeof a=="string"||a instanceof String},i.isObject=function(a){return a&&typeof a=="object"},i.isset=i.isSet=function(a,u){var c=a[u];return c!=null&&a.hasOwnProperty(u)?typeof c!="object"||(Array.isArray(c)?c.length:Object.keys(c).length)>0:!1},i.Buffer=(function(){try{var a=i.inquire("buffer").Buffer;return a.prototype.utf8Write?a:null}catch{return null}})(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(a){return typeof a=="number"?i.Buffer?i._Buffer_allocUnsafe(a):new i.Array(a):i.Buffer?i._Buffer_from(a):typeof Uint8Array>"u"?a:new Uint8Array(a)},i.Array=typeof Uint8Array<"u"?Uint8Array:Array,i.Long=sr.dcodeIO&&sr.dcodeIO.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(a){return a?i.LongBits.from(a).toHash():i.LongBits.zeroHash},i.longFromHash=function(a,u){var c=i.LongBits.fromHash(a);return i.Long?i.Long.fromBits(c.lo,c.hi,u):c.toNumber(!!u)};function o(a,u,c){for(var f=Object.keys(u),h=0;h<f.length;++h)(a[f[h]]===e||!c)&&(a[f[h]]=u[f[h]]);return a}i.merge=o,i.lcFirst=function(a){return a.charAt(0).toLowerCase()+a.substring(1)};function l(a){function u(c,f){if(!(this instanceof u))return new u(c,f);Object.defineProperty(this,"message",{get:function(){return c}}),Error.captureStackTrace?Error.captureStackTrace(this,u):Object.defineProperty(this,"stack",{value:new Error().stack||""}),f&&o(this,f)}return(u.prototype=Object.create(Error.prototype)).constructor=u,Object.defineProperty(u.prototype,"name",{get:function(){return a}}),u.prototype.toString=function(){return this.name+": "+this.message},u}i.newError=l,i.ProtocolError=l("ProtocolError"),i.oneOfGetter=function(a){for(var u={},c=0;c<a.length;++c)u[a[c]]=1;return function(){for(var f=Object.keys(this),h=f.length-1;h>-1;--h)if(u[f[h]]===1&&this[f[h]]!==e&&this[f[h]]!==null)return f[h]}},i.oneOfSetter=function(a){return function(u){for(var c=0;c<a.length;++c)a[c]!==u&&delete this[a[c]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var a=i.Buffer;if(!a){i._Buffer_from=i._Buffer_allocUnsafe=null;return}i._Buffer_from=a.from!==Uint8Array.from&&a.from||function(u,c){return new a(u,c)},i._Buffer_allocUnsafe=a.allocUnsafe||function(u){return new a(u)}}},{1:1,10:10,2:2,38:38,4:4,6:6,7:7,9:9}],40:[function(t,n,s){n.exports=c;var i=t(15),o=t(37);function l(f,h){return f.name+": "+h+(f.repeated&&h!=="array"?"[]":f.map&&h!=="object"?"{k:"+f.keyType+"}":"")+" expected"}function a(f,h,p,d){if(h.resolvedType)if(h.resolvedType instanceof i){f("switch(%s){",d)("default:")("return%j",l(h,"enum value"));for(var g=Object.keys(h.resolvedType.values),m=0;m<g.length;++m)f("case %i:",h.resolvedType.values[g[m]]);f("break")("}")}else f("{")("var e=types[%i].verify(%s);",p,d)("if(e)")("return%j+e",h.name+".")("}");else switch(h.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":f("if(!util.isInteger(%s))",d)("return%j",l(h,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":f("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",d,d,d,d)("return%j",l(h,"integer|Long"));break;case"float":case"double":f('if(typeof %s!=="number")',d)("return%j",l(h,"number"));break;case"bool":f('if(typeof %s!=="boolean")',d)("return%j",l(h,"boolean"));break;case"string":f("if(!util.isString(%s))",d)("return%j",l(h,"string"));break;case"bytes":f('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',d,d,d)("return%j",l(h,"buffer"));break}return f}function u(f,h,p){switch(h.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":f("if(!util.key32Re.test(%s))",p)("return%j",l(h,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":f("if(!util.key64Re.test(%s))",p)("return%j",l(h,"integer|Long key"));break;case"bool":f("if(!util.key2Re.test(%s))",p)("return%j",l(h,"boolean key"));break}return f}function c(f){var h=o.codegen(["m"],f.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),p=f.oneofsArray,d={};p.length&&h("var p={}");for(var g=0;g<f.fieldsArray.length;++g){var m=f._fieldsArray[g].resolve(),y="m"+o.safeProp(m.name);if(m.optional&&h("if(%s!=null&&m.hasOwnProperty(%j)){",y,m.name),m.map)h("if(!util.isObject(%s))",y)("return%j",l(m,"object"))("var k=Object.keys(%s)",y)("for(var i=0;i<k.length;++i){"),u(h,m,"k[i]"),a(h,m,g,y+"[k[i]]")("}");else if(m.repeated)h("if(!Array.isArray(%s))",y)("return%j",l(m,"array"))("for(var i=0;i<%s.length;++i){",y),a(h,m,g,y+"[i]")("}");else{if(m.partOf){var w=o.safeProp(m.partOf.name);d[m.partOf.name]===1&&h("if(p%s===1)",w)("return%j",m.partOf.name+": multiple values"),d[m.partOf.name]=1,h("p%s=1",w)}a(h,m,g,y)}m.optional&&h("}")}return h("return null")}},{15:15,37:37}],41:[function(t,n,s){var i=s,o=t(21);i[".google.protobuf.Any"]={fromObject:function(l){if(l&&l["@type"]){var a=this.lookup(l["@type"]);if(a){var u=l["@type"].charAt(0)==="."?l["@type"].substr(1):l["@type"];return this.create({type_url:"/"+u,value:a.encode(a.fromObject(l)).finish()})}}return this.fromObject(l)},toObject:function(l,a){if(a&&a.json&&l.type_url&&l.value){var u=l.type_url.substring(l.type_url.lastIndexOf("/")+1),c=this.lookup(u);c&&(l=c.decode(l.value))}if(!(l instanceof this.ctor)&&l instanceof o){var f=l.$type.toObject(l,a);return f["@type"]=l.$type.fullName,f}return this.toObject(l,a)}}},{21:21}],42:[function(t,n,s){n.exports=p;var i=t(39),o,l=i.LongBits,a=i.base64,u=i.utf8;function c(b,E,S){this.fn=b,this.len=E,this.next=e,this.val=S}function f(){}function h(b){this.head=b.head,this.tail=b.tail,this.len=b.len,this.next=b.states}function p(){this.len=0,this.head=new c(f,0,0),this.tail=this.head,this.states=null}p.create=i.Buffer?function(){return(p.create=function(){return new o})()}:function(){return new p},p.alloc=function(b){return new i.Array(b)},i.Array!==Array&&(p.alloc=i.pool(p.alloc,i.Array.prototype.subarray)),p.prototype._push=function(b,E,S){return this.tail=this.tail.next=new c(b,E,S),this.len+=E,this};function d(b,E,S){E[S]=b&255}function g(b,E,S){for(;b>127;)E[S++]=b&127|128,b>>>=7;E[S]=b}function m(b,E){this.len=b,this.next=e,this.val=E}m.prototype=Object.create(c.prototype),m.prototype.fn=g,p.prototype.uint32=function(b){return this.len+=(this.tail=this.tail.next=new m((b=b>>>0)<128?1:b<16384?2:b<2097152?3:b<268435456?4:5,b)).len,this},p.prototype.int32=function(b){return b<0?this._push(y,10,l.fromNumber(b)):this.uint32(b)},p.prototype.sint32=function(b){return this.uint32((b<<1^b>>31)>>>0)};function y(b,E,S){for(;b.hi;)E[S++]=b.lo&127|128,b.lo=(b.lo>>>7|b.hi<<25)>>>0,b.hi>>>=7;for(;b.lo>127;)E[S++]=b.lo&127|128,b.lo=b.lo>>>7;E[S++]=b.lo}p.prototype.uint64=function(b){var E=l.from(b);return this._push(y,E.length(),E)},p.prototype.int64=p.prototype.uint64,p.prototype.sint64=function(b){var E=l.from(b).zzEncode();return this._push(y,E.length(),E)},p.prototype.bool=function(b){return this._push(d,1,b?1:0)};function w(b,E,S){E[S]=b&255,E[S+1]=b>>>8&255,E[S+2]=b>>>16&255,E[S+3]=b>>>24}p.prototype.fixed32=function(b){return this._push(w,4,b>>>0)},p.prototype.sfixed32=p.prototype.fixed32,p.prototype.fixed64=function(b){var E=l.from(b);return this._push(w,4,E.lo)._push(w,4,E.hi)},p.prototype.sfixed64=p.prototype.fixed64,p.prototype.float=function(b){return this._push(i.float.writeFloatLE,4,b)},p.prototype.double=function(b){return this._push(i.float.writeDoubleLE,8,b)};var _=i.Array.prototype.set?function(b,E,S){E.set(b,S)}:function(b,E,S){for(var v=0;v<b.length;++v)E[S+v]=b[v]};p.prototype.bytes=function(b){var E=b.length>>>0;if(!E)return this._push(d,1,0);if(i.isString(b)){var S=p.alloc(E=a.length(b));a.decode(b,S,0),b=S}return this.uint32(E)._push(_,E,b)},p.prototype.string=function(b){var E=u.length(b);return E?this.uint32(E)._push(u.write,E,b):this._push(d,1,0)},p.prototype.fork=function(){return this.states=new h(this),this.head=this.tail=new c(f,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(f,0,0),this.len=0),this},p.prototype.ldelim=function(){var b=this.head,E=this.tail,S=this.len;return this.reset().uint32(S),S&&(this.tail.next=b.next,this.tail=E,this.len+=S),this},p.prototype.finish=function(){for(var b=this.head.next,E=this.constructor.alloc(this.len),S=0;b;)b.fn(b.val,E,S),S+=b.len,b=b.next;return E},p._configure=function(b){o=b}},{39:39}],43:[function(t,n,s){n.exports=a;var i=t(42);(a.prototype=Object.create(i.prototype)).constructor=a;var o=t(39),l=o.Buffer;function a(){i.call(this)}a.alloc=function(f){return(a.alloc=o._Buffer_allocUnsafe)(f)};var u=l&&l.prototype instanceof Uint8Array&&l.prototype.set.name==="set"?function(f,h,p){h.set(f,p)}:function(f,h,p){if(f.copy)f.copy(h,p,0,f.length);else for(var d=0;d<f.length;)h[p++]=f[d++]};a.prototype.bytes=function(f){o.isString(f)&&(f=o._Buffer_from(f,"base64"));var h=f.length>>>0;return this.uint32(h),h&&this._push(u,h,f),this};function c(f,h,p){f.length<40?o.utf8.write(f,h,p):h.utf8Write(f,p)}a.prototype.string=function(f){var h=l.byteLength(f);return this.uint32(h),h&&this._push(c,h,f),this}},{39:39,42:42}]},{},[19])})()})(Vn)),Vn.exports}var Bh=jh();const ir=xh(Bh);let Y=ir.Reader,ve=ir.Writer,ge=ir.util;const D=ir.roots["push-server"]||(ir.roots["push-server"]={});D.RequestBatch=(function(){function r(e){if(this.requests=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.requests=ge.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=ve.create()),e.requests!=null&&e.requests.length)for(var n=0;n<e.requests.length;++n)D.Request.encode(e.requests[n],t.uint32(10).fork()).ldelim();return t},r.decode=function(e,t){e instanceof Y||(e=Y.create(e));for(var n=t===void 0?e.len:e.pos+t,s=new D.RequestBatch;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:s.requests&&s.requests.length||(s.requests=[]),s.requests.push(D.Request.decode(e,e.uint32()));break;default:e.skipType(i&7);break}}return s},r})(),D.Request=(function(){function r(t){if(t)for(var n=Object.keys(t),s=0;s<n.length;++s)t[n[s]]!=null&&(this[n[s]]=t[n[s]])}r.prototype.incomingMessages=null,r.prototype.channelStats=null,r.prototype.serverStats=null;var e;return Object.defineProperty(r.prototype,"command",{get:ge.oneOfGetter(e=["incomingMessages","channelStats","serverStats"]),set:ge.oneOfSetter(e)}),r.create=function(t){return new r(t)},r.encode=function(t,n){return n||(n=ve.create()),t.incomingMessages!=null&&t.hasOwnProperty("incomingMessages")&&D.IncomingMessagesRequest.encode(t.incomingMessages,n.uint32(10).fork()).ldelim(),t.channelStats!=null&&t.hasOwnProperty("channelStats")&&D.ChannelStatsRequest.encode(t.channelStats,n.uint32(18).fork()).ldelim(),t.serverStats!=null&&t.hasOwnProperty("serverStats")&&D.ServerStatsRequest.encode(t.serverStats,n.uint32(26).fork()).ldelim(),n},r.decode=function(t,n){t instanceof Y||(t=Y.create(t));for(var s=n===void 0?t.len:t.pos+n,i=new D.Request;t.pos<s;){var o=t.uint32();switch(o>>>3){case 1:i.incomingMessages=D.IncomingMessagesRequest.decode(t,t.uint32());break;case 2:i.channelStats=D.ChannelStatsRequest.decode(t,t.uint32());break;case 3:i.serverStats=D.ServerStatsRequest.decode(t,t.uint32());break;default:t.skipType(o&7);break}}return i},r})(),D.IncomingMessagesRequest=(function(){function r(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.messages=ge.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=ve.create()),e.messages!=null&&e.messages.length)for(var n=0;n<e.messages.length;++n)D.IncomingMessage.encode(e.messages[n],t.uint32(10).fork()).ldelim();return t},r.decode=function(e,t){e instanceof Y||(e=Y.create(e));for(var n=t===void 0?e.len:e.pos+t,s=new D.IncomingMessagesRequest;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:s.messages&&s.messages.length||(s.messages=[]),s.messages.push(D.IncomingMessage.decode(e,e.uint32()));break;default:e.skipType(i&7);break}}return s},r})(),D.IncomingMessage=(function(){function r(e){if(this.receivers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.receivers=ge.emptyArray,r.prototype.sender=null,r.prototype.body="",r.prototype.expiry=0,r.prototype.type="",r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=ve.create()),e.receivers!=null&&e.receivers.length)for(var n=0;n<e.receivers.length;++n)D.Receiver.encode(e.receivers[n],t.uint32(10).fork()).ldelim();return e.sender!=null&&e.hasOwnProperty("sender")&&D.Sender.encode(e.sender,t.uint32(18).fork()).ldelim(),e.body!=null&&e.hasOwnProperty("body")&&t.uint32(26).string(e.body),e.expiry!=null&&e.hasOwnProperty("expiry")&&t.uint32(32).uint32(e.expiry),e.type!=null&&e.hasOwnProperty("type")&&t.uint32(42).string(e.type),t},r.decode=function(e,t){e instanceof Y||(e=Y.create(e));for(var n=t===void 0?e.len:e.pos+t,s=new D.IncomingMessage;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:s.receivers&&s.receivers.length||(s.receivers=[]),s.receivers.push(D.Receiver.decode(e,e.uint32()));break;case 2:s.sender=D.Sender.decode(e,e.uint32());break;case 3:s.body=e.string();break;case 4:s.expiry=e.uint32();break;case 5:s.type=e.string();break;default:e.skipType(i&7);break}}return s},r})(),D.ChannelStatsRequest=(function(){function r(e){if(this.channels=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.channels=ge.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=ve.create()),e.channels!=null&&e.channels.length)for(var n=0;n<e.channels.length;++n)D.ChannelId.encode(e.channels[n],t.uint32(10).fork()).ldelim();return t},r.decode=function(e,t){e instanceof Y||(e=Y.create(e));for(var n=t===void 0?e.len:e.pos+t,s=new D.ChannelStatsRequest;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:s.channels&&s.channels.length||(s.channels=[]),s.channels.push(D.ChannelId.decode(e,e.uint32()));break;default:e.skipType(i&7);break}}return s},r})(),D.ChannelId=(function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.id=ge.newBuffer([]),r.prototype.isPrivate=!1,r.prototype.signature=ge.newBuffer([]),r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=ve.create()),e.id!=null&&e.hasOwnProperty("id")&&t.uint32(10).bytes(e.id),e.isPrivate!=null&&e.hasOwnProperty("isPrivate")&&t.uint32(16).bool(e.isPrivate),e.signature!=null&&e.hasOwnProperty("signature")&&t.uint32(26).bytes(e.signature),t},r.decode=function(e,t){e instanceof Y||(e=Y.create(e));for(var n=t===void 0?e.len:e.pos+t,s=new D.ChannelId;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:s.id=e.bytes();break;case 2:s.isPrivate=e.bool();break;case 3:s.signature=e.bytes();break;default:e.skipType(i&7);break}}return s},r})(),D.ServerStatsRequest=(function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=ve.create()),t},r.decode=function(e,t){e instanceof Y||(e=Y.create(e));for(var n=t===void 0?e.len:e.pos+t,s=new D.ServerStatsRequest;e.pos<n;){var i=e.uint32();switch(i>>>3){default:e.skipType(i&7);break}}return s},r})(),D.Sender=(function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.type=0,r.prototype.id=ge.newBuffer([]),r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=ve.create()),e.type!=null&&e.hasOwnProperty("type")&&t.uint32(8).int32(e.type),e.id!=null&&e.hasOwnProperty("id")&&t.uint32(18).bytes(e.id),t},r.decode=function(e,t){e instanceof Y||(e=Y.create(e));for(var n=t===void 0?e.len:e.pos+t,s=new D.Sender;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:s.type=e.int32();break;case 2:s.id=e.bytes();break;default:e.skipType(i&7);break}}return s},r})(),D.SenderType=(function(){var r={},e=Object.create(r);return e[r[0]="UNKNOWN"]=0,e[r[1]="CLIENT"]=1,e[r[2]="BACKEND"]=2,e})(),D.Receiver=(function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.id=ge.newBuffer([]),r.prototype.isPrivate=!1,r.prototype.signature=ge.newBuffer([]),r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=ve.create()),e.id!=null&&e.hasOwnProperty("id")&&t.uint32(10).bytes(e.id),e.isPrivate!=null&&e.hasOwnProperty("isPrivate")&&t.uint32(16).bool(e.isPrivate),e.signature!=null&&e.hasOwnProperty("signature")&&t.uint32(26).bytes(e.signature),t},r.decode=function(e,t){e instanceof Y||(e=Y.create(e));for(var n=t===void 0?e.len:e.pos+t,s=new D.Receiver;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:s.id=e.bytes();break;case 2:s.isPrivate=e.bool();break;case 3:s.signature=e.bytes();break;default:e.skipType(i&7);break}}return s},r})(),D.ResponseBatch=(function(){function r(e){if(this.responses=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.responses=ge.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=ve.create()),e.responses!=null&&e.responses.length)for(var n=0;n<e.responses.length;++n)D.Response.encode(e.responses[n],t.uint32(10).fork()).ldelim();return t},r.decode=function(e,t){e instanceof Y||(e=Y.create(e));for(var n=t===void 0?e.len:e.pos+t,s=new D.ResponseBatch;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:s.responses&&s.responses.length||(s.responses=[]),s.responses.push(D.Response.decode(e,e.uint32()));break;default:e.skipType(i&7);break}}return s},r})(),D.Response=(function(){function r(t){if(t)for(var n=Object.keys(t),s=0;s<n.length;++s)t[n[s]]!=null&&(this[n[s]]=t[n[s]])}r.prototype.outgoingMessages=null,r.prototype.channelStats=null,r.prototype.serverStats=null;var e;return Object.defineProperty(r.prototype,"command",{get:ge.oneOfGetter(e=["outgoingMessages","channelStats","serverStats"]),set:ge.oneOfSetter(e)}),r.create=function(t){return new r(t)},r.encode=function(t,n){return n||(n=ve.create()),t.outgoingMessages!=null&&t.hasOwnProperty("outgoingMessages")&&D.OutgoingMessagesResponse.encode(t.outgoingMessages,n.uint32(10).fork()).ldelim(),t.channelStats!=null&&t.hasOwnProperty("channelStats")&&D.ChannelStatsResponse.encode(t.channelStats,n.uint32(18).fork()).ldelim(),t.serverStats!=null&&t.hasOwnProperty("serverStats")&&D.JsonResponse.encode(t.serverStats,n.uint32(26).fork()).ldelim(),n},r.decode=function(t,n){t instanceof Y||(t=Y.create(t));for(var s=n===void 0?t.len:t.pos+n,i=new D.Response;t.pos<s;){var o=t.uint32();switch(o>>>3){case 1:i.outgoingMessages=D.OutgoingMessagesResponse.decode(t,t.uint32());break;case 2:i.channelStats=D.ChannelStatsResponse.decode(t,t.uint32());break;case 3:i.serverStats=D.JsonResponse.decode(t,t.uint32());break;default:t.skipType(o&7);break}}return i},r})(),D.OutgoingMessagesResponse=(function(){function r(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.messages=ge.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=ve.create()),e.messages!=null&&e.messages.length)for(var n=0;n<e.messages.length;++n)D.OutgoingMessage.encode(e.messages[n],t.uint32(10).fork()).ldelim();return t},r.decode=function(e,t){e instanceof Y||(e=Y.create(e));for(var n=t===void 0?e.len:e.pos+t,s=new D.OutgoingMessagesResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:s.messages&&s.messages.length||(s.messages=[]),s.messages.push(D.OutgoingMessage.decode(e,e.uint32()));break;default:e.skipType(i&7);break}}return s},r})(),D.OutgoingMessage=(function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.id=ge.newBuffer([]),r.prototype.body="",r.prototype.expiry=0,r.prototype.created=0,r.prototype.sender=null,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=ve.create()),e.id!=null&&e.hasOwnProperty("id")&&t.uint32(10).bytes(e.id),e.body!=null&&e.hasOwnProperty("body")&&t.uint32(18).string(e.body),e.expiry!=null&&e.hasOwnProperty("expiry")&&t.uint32(24).uint32(e.expiry),e.created!=null&&e.hasOwnProperty("created")&&t.uint32(37).fixed32(e.created),e.sender!=null&&e.hasOwnProperty("sender")&&D.Sender.encode(e.sender,t.uint32(42).fork()).ldelim(),t},r.decode=function(e,t){e instanceof Y||(e=Y.create(e));for(var n=t===void 0?e.len:e.pos+t,s=new D.OutgoingMessage;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:s.id=e.bytes();break;case 2:s.body=e.string();break;case 3:s.expiry=e.uint32();break;case 4:s.created=e.fixed32();break;case 5:s.sender=D.Sender.decode(e,e.uint32());break;default:e.skipType(i&7);break}}return s},r})(),D.ChannelStatsResponse=(function(){function r(e){if(this.channels=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.channels=ge.emptyArray,r.create=function(e){return new r(e)},r.encode=function(e,t){if(t||(t=ve.create()),e.channels!=null&&e.channels.length)for(var n=0;n<e.channels.length;++n)D.ChannelStats.encode(e.channels[n],t.uint32(10).fork()).ldelim();return t},r.decode=function(e,t){e instanceof Y||(e=Y.create(e));for(var n=t===void 0?e.len:e.pos+t,s=new D.ChannelStatsResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:s.channels&&s.channels.length||(s.channels=[]),s.channels.push(D.ChannelStats.decode(e,e.uint32()));break;default:e.skipType(i&7);break}}return s},r})(),D.ChannelStats=(function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.id=ge.newBuffer([]),r.prototype.isPrivate=!1,r.prototype.isOnline=!1,r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=ve.create()),e.id!=null&&e.hasOwnProperty("id")&&t.uint32(10).bytes(e.id),e.isPrivate!=null&&e.hasOwnProperty("isPrivate")&&t.uint32(16).bool(e.isPrivate),e.isOnline!=null&&e.hasOwnProperty("isOnline")&&t.uint32(24).bool(e.isOnline),t},r.decode=function(e,t){e instanceof Y||(e=Y.create(e));for(var n=t===void 0?e.len:e.pos+t,s=new D.ChannelStats;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:s.id=e.bytes();break;case 2:s.isPrivate=e.bool();break;case 3:s.isOnline=e.bool();break;default:e.skipType(i&7);break}}return s},r})(),D.JsonResponse=(function(){function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.json="",r.create=function(e){return new r(e)},r.encode=function(e,t){return t||(t=ve.create()),e.json!=null&&e.hasOwnProperty("json")&&t.uint32(10).string(e.json),t},r.decode=function(e,t){e instanceof Y||(e=Y.create(e));for(var n=t===void 0?e.len:e.pos+t,s=new D.JsonResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:s.json=e.string();break;default:e.skipType(i&7);break}}return s},r})();const Uh=D.ResponseBatch,Ho=D.RequestBatch,$h=D.IncomingMessage,Jo=D.Receiver;class Zo{_logger=null;_connected=!1;_connectionType;_disconnectCode=0;_disconnectReason="";_parent;_callbacks;constructor(e){this._parent=e.parent,this._connectionType=se.Undefined,this._callbacks={onOpen:C.isFunction(e.onOpen)?e.onOpen:()=>{},onDisconnect:C.isFunction(e.onDisconnect)?e.onDisconnect:()=>{},onError:C.isFunction(e.onError)?e.onError:()=>{},onMessage:C.isFunction(e.onMessage)?e.onMessage:()=>{}}}setLogger(e){this._logger=e}getLogger(){return this._logger===null&&(this._logger=we.build("NullLogger"),this._logger.setConfig({[I.desktop]:!1,[I.log]:!1,[I.info]:!1,[I.warn]:!1,[I.error]:!0,[I.trace]:!1})),this._logger}destroy(){}get connected(){return this._connected}set connected(e){e!=this._connected&&(this._connected=e,this._connected?this._callbacks.onOpen():this._callbacks.onDisconnect({code:this.disconnectCode,reason:this.disconnectReason}))}get disconnectCode(){return this._disconnectCode}get disconnectReason(){return this._disconnectReason}get connectionPath(){return this._parent.getConnectionPath(this._connectionType)}}class Wh extends Zo{_socket;_onSocketOpenHandler;_onSocketCloseHandler;_onSocketErrorHandler;_onSocketMessageHandler;constructor(e){super(e),this._connectionType=se.WebSocket,this._socket=null,this._onSocketOpenHandler=this._onSocketOpen.bind(this),this._onSocketCloseHandler=this._onSocketClose.bind(this),this._onSocketErrorHandler=this._onSocketError.bind(this),this._onSocketMessageHandler=this._onSocketMessage.bind(this)}destroy(){super.destroy(),this._socket&&(this._socket.close(),this._socket=null)}connect(){if(this._socket){if(this._socket.readyState===1)return;this.clearEventListener(),this._socket.close(),this._socket=null}this._createSocket()}get socket(){return this._socket}disconnect(e,t){this._socket!==null&&(this.clearEventListener(),this._socket.close(e,t)),this._socket=null,this._disconnectCode=e,this._disconnectReason=t,this.connected=!1}send(e){return!this._socket||this._socket.readyState!==1?(this.getLogger().error(new Error(`${V.getDateForLog()}: Pull: WebSocket is not connected`)),!1):(this._socket.send(e),!0)}_onSocketOpen(){this.connected=!0}_onSocketClose(e){this._socket=null,this._disconnectCode=Number(e.code),this._disconnectReason=e.reason,this.connected=!1}_onSocketError(e){this._callbacks.onError(new Error(`Socket error: ${e}`))}_onSocketMessage(e){this._callbacks.onMessage(e.data)}clearEventListener(){this._socket&&(this._socket.removeEventListener("open",this._onSocketOpenHandler),this._socket.removeEventListener("close",this._onSocketCloseHandler),this._socket.removeEventListener("error",this._onSocketErrorHandler),this._socket.removeEventListener("message",this._onSocketMessageHandler))}_createSocket(){if(this._socket)throw new Error("Socket already exists");if(!this.connectionPath)throw new Error("Websocket connection path is not defined");this._socket=new WebSocket(this.connectionPath),this._socket.binaryType="arraybuffer",this._socket.addEventListener("open",this._onSocketOpenHandler),this._socket.addEventListener("close",this._onSocketCloseHandler),this._socket.addEventListener("error",this._onSocketErrorHandler),this._socket.addEventListener("message",this._onSocketMessageHandler)}}const Vh=60;class qh extends Zo{_active;_requestTimeout;_failureTimeout;_xhr;_requestAborted;constructor(e){super(e),this._active=!1,this._connectionType=se.LongPolling,this._requestTimeout=null,this._failureTimeout=null,this._xhr=this.createXhr(),this._requestAborted=!1}connect(){this._active=!0,this.performRequest()}disconnect(e,t){this._active=!1,this.clearTimeOut(),this._xhr&&(this._requestAborted=!0,this._xhr.abort()),this._disconnectCode=e,this._disconnectReason=t,this.connected=!1}performRequest(){if(this._active){if(!this.connectionPath)throw new Error("Long polling connection path is not defined");this._xhr.readyState!==0&&this._xhr.readyState!==4||(this.clearTimeOut(),this._failureTimeout=setTimeout(()=>{this.connected=!0},5e3),this._requestTimeout=setTimeout(this.onRequestTimeout.bind(this),Vh*1e3),this._xhr.open("GET",this.connectionPath),this._xhr.send())}}onRequestTimeout(){this._requestAborted=!0,this._xhr.abort(),this.performRequest()}onXhrReadyStateChange(){this._xhr.readyState===4&&((!this._requestAborted||this._xhr.status==200)&&this.onResponse(this._xhr.response),this._requestAborted=!1)}send(e){const t=this._parent.getPublicationPath();if(!t)return this.getLogger().error(new Error(`${V.getDateForLog()}: Pull: publication path is empty`)),!1;const n=new XMLHttpRequest;return n.open("POST",t),n.send(e),!0}onResponse(e){if(this.clearTimeOut(),this._xhr.status===200)this.connected=!0,C.isStringFilled(e)||e instanceof ArrayBuffer?this._callbacks.onMessage(e):this._parent.session.mid=null,this.performRequest();else if(this._xhr.status===304){if(this.connected=!0,this._xhr.getResponseHeader("Expires")==="Thu, 01 Jan 1973 11:11:01 GMT"){const t=this._xhr.getResponseHeader("Last-Message-Id");C.isStringFilled(t)&&this._parent.setLastMessageId(t||"")}this.performRequest()}else this._callbacks.onError(new Error("Could not connect to the server")),this.connected=!1}clearTimeOut(){this._failureTimeout&&(clearTimeout(this._failureTimeout),this._failureTimeout=null),this._requestTimeout&&(clearTimeout(this._requestTimeout),this._requestTimeout=null)}createXhr(){const e=new XMLHttpRequest;return this._parent.isProtobufSupported()&&!this._parent.isJsonRpc()&&(e.responseType="arraybuffer"),e.addEventListener("readystatechange",this.onXhrReadyStateChange.bind(this)),e}}const or=19,Go=1800,zh=5e3,Hh=60*1e3,Yo=10,Ko=10,Jh="ping",Zh="pong",Qo="bx-pull-session",Gh=20,Xo={api:{},channels:{},publicChannels:{},server:{timeShift:0},clientId:null,jwt:null,exp:0};class ea{_logger=null;_restClient;_status;_context;_guestMode;_guestUserId;_userId;_configGetMethod;_getPublicListMethod;_siteId;_enabled;_unloading=!1;_starting=!1;_debug=!1;_connectionAttempt=0;_connectionType=se.WebSocket;_skipStorageInit;_skipCheckRevision;_subscribers={};_watchTagsQueue=new Map;_watchUpdateInterval=174e4;_watchForceUpdateInterval=5e3;_configTimestamp=0;_session={mid:null,tag:null,time:null,history:{},lastMessageIds:[],messageCount:0};_connectors={[se.Undefined]:null,[se.WebSocket]:null,[se.LongPolling]:null};_isSecure;_config=null;_storage=null;_sharedConfig;_channelManager;_jsonRpcAdapter=null;_reconnectTimeout=null;_restartTimeout=null;_restoreWebSocketTimeout=null;_checkInterval=null;_offlineTimeout=null;_watchUpdateTimeout=null;_pingWaitTimeout=null;_isManualDisconnect=!1;_loggingEnabled=!1;_onPingTimeoutHandler;_userStatusCallbacks={};_connectPromise=null;_startingPromise=null;constructor(e){this._restClient=e.b24,this._status=Le.Offline,this._context="master",e.restApplication&&(typeof e.configGetMethod>"u"&&(e.configGetMethod="pull.application.config.get"),typeof e.skipCheckRevision>"u"&&(e.skipCheckRevision=!0),C.isStringFilled(e.restApplication)&&(e.siteId=e.restApplication),e.serverEnabled=!0),this._guestMode=e.guestMode?V.toBoolean(e.guestMode):!1,this._guestUserId=e.guestUserId?V.toInteger(e.guestUserId):0,this._guestMode&&this._guestUserId>0?this._userId=this._guestUserId:(this._guestMode=!1,this._userId=e.userId?V.toInteger(e.userId):0),this._siteId=e.siteId??"none",this._enabled=C.isUndefined(e.serverEnabled)?!0:e.serverEnabled===!0,this._configGetMethod=C.isStringFilled(e.configGetMethod)?e.configGetMethod||"":"pull.config.get",this._getPublicListMethod=C.isStringFilled(e.getPublicListMethod)?e.getPublicListMethod||"":"pull.channel.public.list",this._skipStorageInit=e.skipStorageInit===!0,this._skipCheckRevision=e.skipCheckRevision===!0,C.isUndefined(e.configTimestamp)||(this._configTimestamp=V.toInteger(e.configTimestamp)),this._isSecure=document?.location.href.indexOf("https")===0,this._userId&&!this._skipStorageInit&&(this._storage=new qo({userId:this._userId,siteId:this._siteId})),this._sharedConfig=new Mh({onWebSocketBlockChanged:this.onWebSocketBlockChanged.bind(this),storage:this._storage}),this._channelManager=new Fh({b24:this._restClient,getPublicListMethod:this._getPublicListMethod}),this._loggingEnabled=this._sharedConfig.isLoggingEnabled(),this._onPingTimeoutHandler=this.onPingTimeout.bind(this)}setLogger(e){this._logger=e,this._jsonRpcAdapter?.setLogger(this.getLogger()),this._storage?.setLogger(this.getLogger()),this._sharedConfig.setLogger(this.getLogger()),this._channelManager.setLogger(this.getLogger()),this._connectors.webSocket?.setLogger(this.getLogger()),this._connectors.longPolling?.setLogger(this.getLogger())}getLogger(){return this._logger===null&&(this._logger=we.build("NullLogger"),this._logger.setConfig({[I.desktop]:!1,[I.log]:!1,[I.info]:!1,[I.warn]:!1,[I.error]:!0,[I.trace]:!1})),this._logger}destroy(){this.stop(_e.NORMAL_CLOSURE,"manual stop"),this.onBeforeUnload()}init(){this._connectors.webSocket=new Wh({parent:this,onOpen:this.onWebSocketOpen.bind(this),onMessage:this.onIncomingMessage.bind(this),onDisconnect:this.onWebSocketDisconnect.bind(this),onError:this.onWebSocketError.bind(this)}),this._connectors.longPolling=new qh({parent:this,onOpen:this.onLongPollingOpen.bind(this),onMessage:this.onIncomingMessage.bind(this),onDisconnect:this.onLongPollingDisconnect.bind(this),onError:this.onLongPollingError.bind(this)}),this._connectionType=this.isWebSocketAllowed()?se.WebSocket:se.LongPolling,window.addEventListener("beforeunload",this.onBeforeUnload.bind(this)),window.addEventListener("offline",this.onOffline.bind(this)),window.addEventListener("online",this.onOnline.bind(this)),this._jsonRpcAdapter=new Dh({connector:this._connectors.webSocket,handlers:{"incoming.message":this.handleRpcIncomingMessage.bind(this)}})}get connector(){return this._connectors[this._connectionType]}get status(){return this._status}set status(e){this._status!==e&&(this._status=e,this._offlineTimeout&&(clearTimeout(this._offlineTimeout),this._offlineTimeout=null),e===Le.Offline?this.sendPullStatusDelayed(e,zh):this.sendPullStatus(e))}get session(){return this._session}subscribe(e){if(!C.isPlainObject(e))return this.attachCommandHandler(e);if(e=e,e.type=e.type||Pe.Server,e.command=e.command||null,e.type==Pe.Server||e.type==Pe.Client){if(typeof e.moduleId>"u")throw new TypeError(`${V.getDateForLog()}: Pull.subscribe: parameter moduleId is not specified`);return typeof this._subscribers[e.type]>"u"&&(this._subscribers[e.type]={}),typeof this._subscribers[e.type][e.moduleId]>"u"&&(this._subscribers[e.type][e.moduleId]={callbacks:[],commands:{}}),e.command?(typeof this._subscribers[e.type][e.moduleId].commands[e.command]>"u"&&(this._subscribers[e.type][e.moduleId].commands[e.command]=[]),this._subscribers[e.type][e.moduleId].commands[e.command].push(e.callback),()=>{typeof e.type>"u"||typeof e.moduleId>"u"||typeof e.command>"u"||e.command===null||(this._subscribers[e.type][e.moduleId].commands[e.command]=this._subscribers[e.type][e.moduleId].commands[e.command].filter(t=>t!==e.callback))}):(this._subscribers[e.type][e.moduleId].callbacks.push(e.callback),()=>{typeof e.type>"u"||typeof e.moduleId>"u"||(this._subscribers[e.type][e.moduleId].callbacks=this._subscribers[e.type][e.moduleId].callbacks.filter(t=>t!==e.callback))})}else return typeof this._subscribers[e.type]>"u"&&(this._subscribers[e.type]=[]),this._subscribers[e.type].push(e.callback),()=>{typeof e.type>"u"||(this._subscribers[e.type]=this._subscribers[e.type].filter(t=>t!==e.callback))}}attachCommandHandler(e){if(typeof e.getModuleId!="function"||typeof e.getModuleId()!="string")return this.getLogger().error(`${V.getDateForLog()}: Pull.attachCommandHandler: result of handler.getModuleId() is not a string.`),()=>{};let t=Pe.Server;return typeof e.getSubscriptionType=="function"&&(t=e.getSubscriptionType()),this.subscribe({type:t,moduleId:e.getModuleId(),callback:n=>{let s=null;if(typeof e.getMap=="function"){const i=e.getMap();if(i&&typeof i=="object"){const o=i[n.command];typeof o=="function"?s=o.bind(e):typeof o=="string"&&typeof e[o]=="function"&&(s=e[o].bind(e))}}if(!s){const i=`handle${V.capitalize(n.command)}`;typeof e[i]=="function"&&(s=e[i].bind(e))}s&&(this._debug&&this._context!=="master"&&this.getLogger().warn(`${V.getDateForLog()}: Pull.attachCommandHandler: result of handler.getModuleId() is not a string`,n),s(n.params,n.extra,n.command))}})}async start(e=null){let t=!0;if(this.isConnected())return Promise.resolve(!0);if(this._starting&&this._startingPromise)return this._startingPromise;if(!this._userId)throw new Error("Not set userId");if(this._siteId==="none")throw new Error("Not set siteId");let n=!1;if(e&&C.isPlainObject(e)&&(typeof e?.skipReconnectToLastSession<"u"&&(n=e.skipReconnectToLastSession,delete e.skipReconnectToLastSession),this._config=e,t=!1),!this._enabled)return Promise.reject({ex:{error:"PULL_DISABLED",error_description:"Push & Pull server is disabled"}});const s=Date.now();let i;return!n&&this._storage&&(i=this._storage.get(Qo,null)),C.isPlainObject(i)&&i.hasOwnProperty("ttl")&&i.ttl>=s&&(this._session.mid=i.mid),this._starting=!0,this._startingPromise=new Promise((o,l)=>{this.loadConfig("client_start").then(a=>{this.setConfig(a,t),this.init(),this.updateWatch(!0),this.startCheckConfig(),this.connect().then(()=>o(!0),u=>l(u))}).catch(a=>{this._starting=!1,this.status=Le.Offline,this.stopCheckConfig(),this.getLogger().error(`${V.getDateForLog()}: Pull: could not read push-server config `,a),l(a)})})}restart(e=_e.NORMAL_CLOSURE,t="manual restart"){this._restartTimeout&&(clearTimeout(this._restartTimeout),this._restartTimeout=null),this.getLogger().log(`${V.getDateForLog()}: Pull: restarting with code ${e}`),this.disconnect(e,t),this._storage&&this._storage.remove(Re.PullConfig),this._config=null;const n=`${e}_${t.replaceAll(" ","_")}`;this.loadConfig(n).then(s=>{this.setConfig(s,!0),this.updateWatch(),this.startCheckConfig(),this.connect().catch(i=>{this.getLogger().error(i)})},s=>{this.getLogger().error(`${V.getDateForLog()}: Pull: could not read push-server config `,s),this.status=Le.Offline,this._reconnectTimeout&&(clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null),(s?.status==401||s?.status==403)&&(this.stopCheckConfig(),this.onCustomEvent("onPullError",["AUTHORIZE_ERROR"]))})}stop(e=_e.NORMAL_CLOSURE,t="manual stop"){this.disconnect(e,t),this.stopCheckConfig()}reconnect(e,t,n=1){this.disconnect(e,t),this.scheduleReconnect(n)}setLastMessageId(e){this._session.mid=e}async sendMessage(e,t,n,s,i){const o={userList:e,body:{module_id:t,command:n,params:s},expiry:i};return this.isJsonRpc()?this._jsonRpcAdapter?.executeOutgoingRpcCommand(Je.Publish,o):this.sendMessageBatch([o])}async sendMessageToChannels(e,t,n,s,i){const o={channelList:e,body:{module_id:t,command:n,params:s},expiry:i};return this.isJsonRpc()?this._jsonRpcAdapter?.executeOutgoingRpcCommand(Je.Publish,o):this.sendMessageBatch([o])}capturePullEvent(e=!0){this._debug=e}enableLogging(e=!0){this._sharedConfig.setLoggingEnabled(e),this._loggingEnabled=e}async listChannels(){return this._jsonRpcAdapter?.executeOutgoingRpcCommand(Je.ListChannels,{})||Promise.reject(new Error("jsonRpcAdapter not init"))}async getUsersLastSeen(e){if(!C.isArray(e)||!e.every(n=>typeof n=="number"))throw new Error("userList must be an array of numbers");const t={};return new Promise((n,s)=>{this._jsonRpcAdapter?.executeOutgoingRpcCommand(Je.GetUsersLastSeen,{userList:e}).then(i=>{const o=[];for(let a=0;a<e.length;a++)i.hasOwnProperty(e[a])||o.push(e[a]);if(o.length===0)return n(t);const l={userIds:o,sendToQueueSever:!0};this._restClient.callMethod("pull.api.user.getLastSeen",l).then(a=>{const u=a.getData().result;for(const c in u)t[Number(c)]=Number(u[c]);return n(t)}).catch(a=>{this.getLogger().error(a),s(a)})}).catch(i=>{this.getLogger().error(i),s(i)})})}async ping(e=5){return this._jsonRpcAdapter?.executeOutgoingRpcCommand(Je.Ping,{},e)}async subscribeUserStatusChange(e,t){return new Promise((n,s)=>{this._jsonRpcAdapter?.executeOutgoingRpcCommand(Je.SubscribeStatusChange,{userId:e}).then(()=>(this._userStatusCallbacks[e]||(this._userStatusCallbacks[e]=[]),C.isFunction(t)&&this._userStatusCallbacks[e].push(t),n())).catch(i=>s(i))})}async unsubscribeUserStatusChange(e,t){return this._userStatusCallbacks[e]&&(this._userStatusCallbacks[e]=this._userStatusCallbacks[e].filter(n=>n!==t),this._userStatusCallbacks[e].length===0)?this._jsonRpcAdapter?.executeOutgoingRpcCommand(Je.UnsubscribeStatusChange,{userId:e}):Promise.resolve()}getRevision(){return this._config&&this._config.api?this._config.api.revision_web:null}getServerVersion(){return this._config&&this._config.server?this._config.server.version:0}getServerMode(){return this._config&&this._config.server?this._config.server.mode:null}getConfig(){return this._config}getDebugInfo(){if(!JSON||!JSON.stringify)return{};let e;this._config&&this._config.channels?e={ChannelID:this._config.channels.private?.id||"n/a",ChannelDie:this._config.channels.private?.end||"n/a",ChannelDieShared:this._config.channels.shared?.end||"n/a"}:e={ConfigError:"config is not loaded"};let t="-";return this._connectors.webSocket&&this._connectors.webSocket?.socket&&(this.isJsonRpc()?t="json-rpc":t=this._connectors.webSocket?.socket?.url.search("binaryMode=true")!=-1?"protobuf":"text"),{UserId:this._userId+(this._userId>0?"":"(guest)"),"Guest userId":this._guestMode&&this._guestUserId!==0?this._guestUserId:"-","Browser online":navigator.onLine?"Y":"N",Connect:this.isConnected()?"Y":"N","Server type":this.isSharedMode()?"cloud":"local","WebSocket supported":this.isWebSocketSupported()?"Y":"N","WebSocket connected":this._connectors.webSocket&&this._connectors.webSocket.connected?"Y":"N","WebSocket mode":t,"Try connect":this._reconnectTimeout?"Y":"N","Try number":this._connectionAttempt,Path:this.connector?.connectionPath||"-",...e,"Last message":this._session.mid||"-","Session history":this._session.history,"Watch tags":this._watchTagsQueue.entries()}}getConnectionPath(e){let t;const n={};switch(e){case se.WebSocket:t=this._isSecure?this._config?.server.websocket_secure:this._config?.server.websocket;break;case se.LongPolling:t=this._isSecure?this._config?.server.long_pooling_secure:this._config?.server.long_polling;break;default:throw new Error(`Unknown connection type ${e}`)}if(!C.isStringFilled(t))throw new Error("Empty path");if(typeof this._config?.jwt=="string"&&this._config?.jwt!=="")n.token=this._config?.jwt;else{const s=[];if(this._config?.channels?.private&&s.push(this._config.channels.private?.id||""),this._config?.channels.private?.id&&s.push(this._config.channels.private.id),this._config?.channels.shared?.id&&s.push(this._config.channels.shared.id),s.length===0)throw new Error("Empty channels");n.CHANNEL_ID=s.join("/")}if(this.isJsonRpc()?n.jsonRpc="true":this.isProtobufSupported()&&(n.binaryMode="true"),this.isSharedMode()){if(!this._config?.clientId)throw new Error("Push-server is in shared mode, but clientId is not set");n.clientId=this._config.clientId}return this._session.mid&&(n.mid=this._session.mid),this._session.tag&&(n.tag=this._session.tag),this._session.time&&(n.time=this._session.time),n.revision=or,`${t}?${V.buildQueryString(n)}`}getPublicationPath(){const e=this._isSecure?this._config?.server.publish_secure:this._config?.server.publish;if(!e)return"";const t=[];this._config?.channels.private?.id&&t.push(this._config.channels.private.id),this._config?.channels.shared?.id&&t.push(this._config.channels.shared.id);const n={CHANNEL_ID:t.join("/")};return e+"?"+V.buildQueryString(n)}isConnected(){return this.connector?this.connector.connected:!1}isWebSocketSupported(){return typeof window.WebSocket<"u"}isWebSocketAllowed(){return this._sharedConfig.isWebSocketBlocked()?!1:this.isWebSocketEnabled()}isWebSocketEnabled(){return!this.isWebSocketSupported()||!this._config||!this._config.server?!1:this._config.server.websocket_enabled}isPublishingSupported(){return this.getServerVersion()>3}isPublishingEnabled(){return this.isPublishingSupported()?this._config?.server.publish_enabled===!0:!1}isProtobufSupported(){return this.getServerVersion()==4&&!Ci.isIE()}isJsonRpc(){return this.getServerVersion()>=5}isSharedMode(){return this.getServerMode()===bn.Shared}emit(e){if(e.type==Pe.Server||e.type==Pe.Client){if(typeof this._subscribers[e.type]>"u"&&(this._subscribers[e.type]={}),typeof e.moduleId>"u")throw new TypeError(`${V.getDateForLog()}: Pull.emit: parameter moduleId is not specified`);return typeof this._subscribers[e.type][e.moduleId]>"u"&&(this._subscribers[e.type][e.moduleId]={callbacks:[],commands:{}}),this._subscribers[e.type][e.moduleId].callbacks.length>0&&this._subscribers[e.type][e.moduleId].callbacks.forEach(t=>{t(e.data,{type:e.type,moduleId:e.moduleId})}),!(typeof e.data>"u")&&!(typeof e.data.command>"u")&&this._subscribers[e.type][e.moduleId].commands[e.data.command]&&this._subscribers[e.type][e.moduleId].commands[e.data.command].length>0&&this._subscribers[e.type][e.moduleId].commands[e.data.command].forEach(t=>{typeof e.data>"u"||t(e.data.params,e.data.extra,e.data.command,{type:e.type,moduleId:e.moduleId})}),!0}else return typeof this._subscribers[e.type]>"u"&&(this._subscribers[e.type]=[]),this._subscribers[e.type].length<=0||this._subscribers[e.type].forEach(t=>{t(e.data,{type:e.type})}),!0}broadcastMessage(e){const t=e.module_id=e.module_id.toLowerCase(),n=e.command;e.extra||(e.extra={}),e.extra.server_time_unix&&(e.extra.server_time_ago=(Date.now()-e.extra.server_time_unix*1e3)/1e3-(this._config?.server.timeShift||0),e.extra.server_time_ago=Math.max(e.extra.server_time_ago,0)),this.logMessage(e);try{e.extra.sender&&e.extra.sender.type===Er.Client?(this.onCustomEvent("onPullClientEvent-"+t,[n,e.params,e.extra],!0),this.onCustomEvent("onPullClientEvent",[t,n,e.params,e.extra],!0),this.emit({type:Pe.Client,moduleId:t,data:{command:n,params:C.clone(e.params),extra:C.clone(e.extra)}})):t==="pull"?this.handleInternalPullEvent(n,e):t=="online"?((e?.extra?.server_time_ago||0)<240&&(this.onCustomEvent("onPullOnlineEvent",[n,e.params,e.extra],!0),this.emit({type:Pe.Online,data:{command:n,params:C.clone(e.params),extra:C.clone(e.extra)}})),n==="userStatusChange"&&this.emitUserStatusChange(e.params.user_id,e.params.online)):(this.onCustomEvent("onPullEvent-"+t,[n,e.params,e.extra],!0),this.onCustomEvent("onPullEvent",[t,n,e.params,e.extra],!0),this.emit({type:Pe.Server,moduleId:t,data:{command:n,params:C.clone(e.params),extra:C.clone(e.extra)}}))}catch(s){this.getLogger().warn(`
========= PULL ERROR ===========
Error type: broadcastMessages execute error
Error event: `,s,`
Message: `,e,`
================================
`)}e.extra&&e.extra.revision_web&&this.checkRevision(V.toInteger(e.extra.revision_web))}broadcastMessages(e){for(const t of e)this.broadcastMessage(t)}async sendMessageBatch(e){if(!this.isPublishingEnabled())return this.getLogger().error("Client publishing is not supported or is disabled"),Promise.reject(new Error("Client publishing is not supported or is disabled"));if(this.isJsonRpc()){const t=this._jsonRpcAdapter?.createPublishRequest(e);return this.connector?.send(JSON.stringify(t)),Promise.resolve(!0)}else{const t={};for(const n of e)if(typeof n.userList<"u")for(const s of n.userList){const i=Number(s);t[i]=i}this._channelManager?.getPublicIds(Object.values(t)).then(n=>{const s=this.connector?.send(this.encodeMessageBatch(e,n));return Promise.resolve(s)})}}encodeMessageBatch(e,t){const n=[];e.forEach(i=>{const o=i.body;let l=[];if(i.userList&&(l=this.createMessageReceivers(i.userList,t)),i.channelList){if(!C.isArray(i.channelList))throw new TypeError("messageFields.publicChannels must be an array");i.channelList.forEach(u=>{let c,f;if(typeof u=="string"&&u.includes(".")){const h=u.toString().split(".");c=h[0],f=h[1]}else if(typeof u=="object"&&"publicId"in u&&"signature"in u)c=u?.publicId,f=u?.signature;else throw new Error(`Public channel MUST be either a string, formatted like "{publicId}.{signature}" or an object with fields 'publicId' and 'signature'`);l.push(Jo.create({id:this.encodeId(c),signature:this.encodeId(f)}))})}const a=$h.create({receivers:l,body:JSON.stringify(o),expiry:i.expiry||0});n.push(a)});const s=Ho.create({requests:[{incomingMessages:{messages:n}}]});return Ho.encode(s).finish()}createMessageReceivers(e,t){const n=[];for(const s of e){if(!t[s]||!t[s].publicId)throw new Error(`Could not determine public id for user ${s}`);n.push(Jo.create({id:this.encodeId(t[s].publicId),signature:this.encodeId(t[s].signature)}))}return n}emitUserStatusChange(e,t){if(this._userStatusCallbacks[e])for(const n of this._userStatusCallbacks[e])n({userId:e,isOnline:t})}restoreUserStatusSubscription(){for(const e in this._userStatusCallbacks)this._userStatusCallbacks.hasOwnProperty(e)&&this._userStatusCallbacks[e].length>0&&this._jsonRpcAdapter?.executeOutgoingRpcCommand(Je.SubscribeStatusChange,{userId:e})}async loadConfig(e){if(this._config){if(this.isConfigActual(this._config)&&this.checkRevision(this._config.api.revision_web))return Promise.resolve(this._config);this._config=Object.assign({},Xo)}else{this._config=Object.assign({},Xo);let t;if(this._storage&&(t=this._storage.get(Re.PullConfig,null)),this.isConfigActual(t)&&this.checkRevision(t.api.revision_web))return Promise.resolve(t);this._storage&&this._storage.remove(Re.PullConfig)}return new Promise((t,n)=>{this._restClient.getHttpClient().setLogTag(e),this._restClient.callMethod(this._configGetMethod,{CACHE:"N"}).then(s=>{const i=s.getData().result,o=Math.floor((Date.now()-new Date(i.serverTime).getTime())/1e3);delete i.serverTime;const l=Object.assign({},i);l.server.timeShift=o,t(l)}).catch(s=>{(s?.answerError?.error==="AUTHORIZE_ERROR"||s?.answerError?.error==="WRONG_AUTH_TYPE")&&(s.status=403),n(s)}).finally(()=>{this._restClient.getHttpClient().clearLogTag()})})}isConfigActual(e){if(!C.isPlainObject(e)||Number(e.server.config_timestamp)!==this._configTimestamp)return!1;const t=new Date;if(C.isNumber(e.exp)&&e.exp>0&&e.exp<t.getTime()/1e3||Object.keys(e.channels).length===0)return!1;for(const n in e.channels){if(!e.channels.hasOwnProperty(n))continue;const s=e.channels[n];if(new Date(s.end)<t)return!1}return!0}startCheckConfig(){this._checkInterval&&(clearInterval(this._checkInterval),this._checkInterval=null),this._checkInterval=setInterval(this.checkConfig.bind(this),Hh)}stopCheckConfig(){this._checkInterval&&clearInterval(this._checkInterval),this._checkInterval=null}checkConfig(){if(this.isConfigActual(this._config)){if(!this.checkRevision(V.toInteger(this._config?.api.revision_web)))return!1}else this.logToConsole("Stale config detected. Restarting"),this.restart(_e.CONFIG_EXPIRED,"config expired");return!0}setConfig(e,t){for(const n in e)e.hasOwnProperty(n)&&this._config?.hasOwnProperty(n)&&(this._config[n]=e[n]);if(e.publicChannels&&this.setPublicIds(Object.values(e.publicChannels)),this._configTimestamp=Number(e.server.config_timestamp),this._storage&&t)try{this._storage.set(Re.PullConfig,e)}catch(n){localStorage&&localStorage.removeItem&&localStorage.removeItem("history"),this.getLogger().error(`${V.getDateForLog()}: Pull: Could not cache config in local storage. Error: `,n)}}setPublicIds(e){this._channelManager.setPublicIds(e)}checkRevision(e){return this._skipCheckRevision?!0:e>0&&e!==or?(this._enabled=!1,this.showNotification("PULL_OLD_REVISION"),this.disconnect(_e.NORMAL_CLOSURE,"check_revision"),this.onCustomEvent("onPullRevisionUp",[e,or]),this.emit({type:Pe.Revision,data:{server:e,client:or}}),this.logToConsole(`Pull revision changed from ${or} to ${e}. Reload required`),!1):!0}disconnect(e,t){this.connector&&(this._isManualDisconnect=!0,this.connector.disconnect(e,t))}restoreWebSocketConnection(){this._connectionType!==se.WebSocket&&this._connectors.webSocket?.connect()}scheduleReconnect(e=0){this._enabled&&(e||(e=this.getConnectionAttemptDelay(this._connectionAttempt)),this._reconnectTimeout&&(clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null),this.logToConsole(`Pull: scheduling reconnection in ${e} seconds; attempt # ${this._connectionAttempt}`),this._reconnectTimeout=setTimeout(()=>{this.connect().catch(t=>{this.getLogger().error(t)})},e*1e3))}scheduleRestoreWebSocketConnection(){this.logToConsole(`Pull: scheduling restoration of websocket connection in ${Go} seconds`),!this._restoreWebSocketTimeout&&(this._restoreWebSocketTimeout=setTimeout(()=>{this._restoreWebSocketTimeout=null,this.restoreWebSocketConnection()},Go*1e3))}async connect(){return this._enabled?this.connector?.connected?Promise.resolve():(this._reconnectTimeout&&(clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null),this.status=Le.Connecting,this._connectionAttempt++,new Promise((e,t)=>{this._connectPromise={resolve:e,reject:t},this.connector?.connect()})):Promise.reject()}scheduleRestart(e,t,n=0){this._restartTimeout&&(clearTimeout(this._restartTimeout),this._restartTimeout=null),n<1&&(n=Math.ceil(Math.random()*30)+5),this._restartTimeout=setTimeout(()=>this.restart(e,t),n*1e3)}handleRpcIncomingMessage(e){this._session.mid=e.mid;const t=e.body;return e.body.extra||(t.extra={}),t.extra.sender=e.sender,"user_params"in e&&C.isPlainObject(e.user_params)&&Object.assign(t.params,e.user_params),"dictionary"in e&&C.isPlainObject(e.dictionary)&&Object.assign(t.params,e.dictionary),this.checkDuplicate(e.mid)&&(this.addMessageToStat(t),this.trimDuplicates(),this.broadcastMessage(t)),this.connector?.send(`mack:${e.mid}`),{}}handleIncomingEvents(e){const t=[];if(e.length===0){this._session.mid=null;return}for(const n of e)this.updateSessionFromEvent(n),!(n.mid&&!this.checkDuplicate(n.mid))&&(this.addMessageToStat(n.text),t.push(n.text));this.trimDuplicates(),this.broadcastMessages(t)}updateSessionFromEvent(e){this._session.mid=e.mid||null,this._session.tag=e.tag||null,this._session.time=e.time||null}handleInternalPullEvent(e,t){switch(e.toUpperCase()){case Qt.CHANNEL_EXPIRE:{if(t.params.action==="reconnect"){const n=t.params?.channel.type;n==="private"&&this._config?.channels?.private&&(this._config.channels.private=t.params.new_channel,this.logToConsole(`Pull: new config for ${t.params.channel.type} channel set: ${this._config.channels.private}`)),n==="shared"&&this._config?.channels?.shared&&(this._config.channels.shared=t.params.new_channel,this.logToConsole(`Pull: new config for ${t.params.channel.type} channel set: ${this._config.channels.shared}`)),this.reconnect(_e.CONFIG_REPLACED,"config was replaced")}else this.restart(_e.CHANNEL_EXPIRED,"channel expired received");break}case Qt.CONFIG_EXPIRE:{this.restart(_e.CONFIG_EXPIRED,"config expired received");break}case Qt.SERVER_RESTART:{this.reconnect(_e.SERVER_RESTARTED,"server was restarted",15);break}}}onIncomingMessage(e){if(this.isJsonRpc())e===Jh?this.onJsonRpcPing():this._jsonRpcAdapter?.parseJsonRpcMessage(e);else{const t=this.extractMessages(e);this.handleIncomingEvents(t)}}onLongPollingOpen(){this._unloading=!1,this._starting=!1,this._connectionAttempt=0,this._isManualDisconnect=!1,this.status=Le.Online,this.logToConsole("Pull: Long polling connection with push-server opened"),this.isWebSocketEnabled()&&this.scheduleRestoreWebSocketConnection(),this._connectPromise&&this._connectPromise.resolve({})}onLongPollingDisconnect(e){this._connectionType===se.LongPolling&&(this.status=Le.Offline),this.logToConsole(`Pull: Long polling connection with push-server closed. Code: ${e.code}, reason: ${e.reason}`),this._isManualDisconnect||this.scheduleReconnect(),this._isManualDisconnect=!1,this.clearPingWaitTimeout()}onLongPollingError(e){this._starting=!1,this._connectionType===se.LongPolling&&(this.status=Le.Offline),this.getLogger().error(`${V.getDateForLog()}: Pull: Long polling connection error `,e),this.scheduleReconnect(),this._connectPromise&&this._connectPromise.reject(e),this.clearPingWaitTimeout()}onWebSocketBlockChanged(e){const t=e.isWebSocketBlocked;t&&this._connectionType===se.WebSocket&&!this.isConnected()?(this._reconnectTimeout&&(clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null),this._connectionAttempt=0,this._connectionType=se.LongPolling,this.scheduleReconnect(1)):!t&&this._connectionType===se.LongPolling&&(this._reconnectTimeout&&(clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null),this._restoreWebSocketTimeout&&(clearTimeout(this._restoreWebSocketTimeout),this._restoreWebSocketTimeout=null),this._connectionAttempt=0,this._connectionType=se.WebSocket,this.scheduleReconnect(1))}onWebSocketOpen(){this._unloading=!1,this._starting=!1,this._connectionAttempt=0,this._isManualDisconnect=!1,this.status=Le.Online,this._sharedConfig.setWebSocketBlocked(!1),this._sharedConfig.setLongPollingBlocked(!0),this._connectionType==se.LongPolling&&(this._connectionType=se.WebSocket,this._connectors.longPolling?.disconnect(_e.CONFIG_REPLACED,"Fire at onWebSocketOpen")),this._restoreWebSocketTimeout&&(clearTimeout(this._restoreWebSocketTimeout),this._restoreWebSocketTimeout=null),this.logToConsole("Pull: Websocket connection with push-server opened"),this._connectPromise&&this._connectPromise.resolve({}),this.restoreUserStatusSubscription()}onWebSocketDisconnect(e){this._connectionType===se.WebSocket&&(this.status=Le.Offline),this.logToConsole(`Pull: Websocket connection with push-server closed. Code: ${e.code}, reason: ${e.reason}`,!0),this._isManualDisconnect||(e.code==_e.WRONG_CHANNEL_ID?this.scheduleRestart(_e.WRONG_CHANNEL_ID,"wrong channel signature"):this.scheduleReconnect()),this._sharedConfig.setLongPollingBlocked(!0),this._isManualDisconnect=!1,this.clearPingWaitTimeout()}onWebSocketError(e){this._starting=!1,this._connectionType===se.WebSocket&&(this.status=Le.Offline),this.getLogger().error(`${V.getDateForLog()}: Pull: WebSocket connection error `,e),this.scheduleReconnect(),this._connectPromise&&this._connectPromise.reject(e),this.clearPingWaitTimeout()}extractMessages(e){if(e instanceof ArrayBuffer)return this.extractProtobufMessages(e);if(C.isStringFilled(e))return this.extractPlainTextMessages(e);throw new Error("Error pullEvent type")}extractProtobufMessages(e){const t=[];try{const n=Uh.decode(new Uint8Array(e));for(let s=0;s<n.responses.length;s++){const i=n.responses[s];if(i.command!=="outgoingMessages")continue;const o=i.outgoingMessages.messages;for(const l of o){let a;try{a=JSON.parse(l.body)}catch(c){this.getLogger().error(`${V.getDateForLog()}: Pull: Could not parse message body `,c);continue}a.extra||(a.extra={}),a.extra.sender={type:l.sender.type},l.sender.id instanceof Uint8Array&&(a.extra.sender.id=this.decodeId(l.sender.id));const u={mid:this.decodeId(l.id),text:a};t.push(u)}}}catch(n){this.getLogger().error(`${V.getDateForLog()}: Pull: Could not parse message `,n)}return t}extractPlainTextMessages(e){const t=[],n=e.match(/#!NGINXNMS!#(.*?)#!NGINXNME!#/gm);if(n===null){const s=`
========= PULL ERROR ===========
Error type: parseResponse error parsing message

Data string: ${e}
================================

`;return this.getLogger().warn(s),[]}for(let s=0;s<n.length;s++){if(n[s]=n[s].substring(12,n[s].length-12),n[s].length<=0)continue;let i;try{i=JSON.parse(n[s])}catch{continue}t.push(i)}return t}decodeId(e){let t="";for(const n of e){const s=n.toString(16);s.length===1&&(t+="0"),t+=s}return t}encodeId(e){if(!e)return new Uint8Array;const t=[];for(let n=0;n<e.length;n+=2)t.push(Number.parseInt(e.slice(n,n+2),16));return new Uint8Array(t)}onOffline(){this.disconnect(_e.NORMAL_CLOSURE,"offline")}onOnline(){this.connect().catch(e=>{this.getLogger().error(e)})}onBeforeUnload(){this._unloading=!0;const e=C.clone(this.session);if(e.ttl=Date.now()+Gh*1e3,this._storage)try{this._storage.set(Qo,JSON.stringify(e))}catch(t){this.getLogger().error(`${V.getDateForLog()}: Pull: Could not save session info in local storage. Error: `,t)}this.scheduleReconnect(15)}sendPullStatusDelayed(e,t){this._offlineTimeout&&(clearTimeout(this._offlineTimeout),this._offlineTimeout=null),this._offlineTimeout=setTimeout(()=>{this._offlineTimeout=null,this.sendPullStatus(e)},t)}sendPullStatus(e){this._unloading||(this.onCustomEvent("onPullStatus",[e]),this.emit({type:Pe.Status,data:{status:e}}))}extendWatch(e,t=!1){this._watchTagsQueue.get(e)||(this._watchTagsQueue.set(e,!0),t&&this.updateWatch(t))}updateWatch(e=!1){this._watchUpdateTimeout&&(clearTimeout(this._watchUpdateTimeout),this._watchUpdateTimeout=null),this._watchUpdateTimeout=setTimeout(()=>{const t=[...this._watchTagsQueue.keys()];t.length>0?this._restClient.callMethod("pull.watch.extend",{tags:t}).then(n=>{const s=n.getData().result;for(const i of s)this.clearWatch(i);this.updateWatch()}).catch(()=>{this.updateWatch()}):this.updateWatch()},e?this._watchForceUpdateInterval:this._watchUpdateInterval)}clearWatch(e){this._watchTagsQueue.delete(e)}onJsonRpcPing(){this.updatePingWaitTimeout(),this.connector?.send(Zh)}updatePingWaitTimeout(){this._pingWaitTimeout&&(clearTimeout(this._pingWaitTimeout),this._pingWaitTimeout=null),this._pingWaitTimeout=setTimeout(this._onPingTimeoutHandler,Ko*2*1e3)}clearPingWaitTimeout(){this._pingWaitTimeout&&clearTimeout(this._pingWaitTimeout),this._pingWaitTimeout=null}onPingTimeout(){this._pingWaitTimeout=null,!(!this._enabled||!this.isConnected())&&(this.getLogger().warn(`No pings are received in ${Ko*2} seconds. Reconnecting`),this.disconnect(_e.STUCK,"connection stuck"),this.scheduleReconnect())}getConnectionAttemptDelay(e){let t;return e<1?t=.5:e<3?t=15:e<5?t=45:e<10?t=600:t=3600,t+t*Math.random()*.2}checkDuplicate(e){return this._session.lastMessageIds.includes(e)?(this.getLogger().warn(`Duplicate message ${e} skipped`),!1):(this._session.lastMessageIds.push(e),!0)}trimDuplicates(){this._session.lastMessageIds.length>Yo&&(this._session.lastMessageIds=this._session.lastMessageIds.slice(-Yo))}logMessage(e){this._debug&&(e.extra?.sender&&e.extra.sender.type===Er.Client?this.getLogger().info(`onPullClientEvent-${e.module_id}`,e.command,e.params,e.extra):e.module_id=="online"?this.getLogger().info("onPullOnlineEvent",e.command,e.params,e.extra):this.getLogger().info("onPullEvent",e.module_id,e.command,e.params,e.extra))}logToConsole(e,t=!1){(this._loggingEnabled||t)&&this.getLogger().log(`${V.getDateForLog()}: ${e}`)}addMessageToStat(e){this._session.history[e.module_id]||(this._session.history[e.module_id]={}),this._session.history[e.module_id][e.command]||(this.session.history[e.module_id][e.command]=0),this._session.history[e.module_id][e.command]++,this._session.messageCount++}showNotification(e){this.getLogger().warn(e)}onCustomEvent(e,t,n=!1){}}class Yh{_b24;_logger=null;_isInit=!1;_profile=null;_app=null;_payment=null;_license=null;_currency=null;_appOptions=null;_userOptions=null;_b24PullClient=null;_pullClientUnSubscribe=[];_pullClientModuleId="";constructor(e){this._b24=e,this.setLogger(this._b24.getLogger())}setLogger(e){this._logger=e,this._profile!==null&&this._profile.setLogger(this.getLogger()),this._app!==null&&this._app.setLogger(this.getLogger()),this._payment!==null&&this._payment.setLogger(this.getLogger()),this._license!==null&&this._license.setLogger(this.getLogger()),this._currency!==null&&this._currency.setLogger(this.getLogger()),this._appOptions!==null&&this._appOptions.setLogger(this.getLogger()),this._userOptions!==null&&this._userOptions.setLogger(this.getLogger())}getLogger(){return this._logger===null&&(this._logger=we.build("NullLogger"),this._logger.setConfig({[I.desktop]:!1,[I.log]:!1,[I.info]:!1,[I.warn]:!1,[I.error]:!0,[I.trace]:!1})),this._logger}destroy(){this._destroyPullClient()}async loadData(e=[ne.App,ne.Profile]){const t={[ne.App]:{method:"app.info"},[ne.Profile]:{method:"profile"},[ne.Currency]:[{method:"crm.currency.base.get"},{method:"crm.currency.list"}],[ne.AppOptions]:{method:"app.option.get"},[ne.UserOptions]:{method:"user.option.get"}},n=e.reduce((s,i)=>{if(t[i])if(Array.isArray(t[i]))for(const[o,l]of t[i].entries())s[`get_${i}_${o}`]=l;else s[`get_${i}`]=t[i];return s},{});try{const s=(await this._b24.callBatch(n)).getData();s[`get_${ne.App}`]&&(this._app=await this.parseAppData(s[`get_${ne.App}`]),this._payment=await this.parsePaymentData(s[`get_${ne.App}`]),this._license=await this.parseLicenseData(s[`get_${ne.App}`])),s[`get_${ne.Profile}`]&&(this._profile=await this.parseUserData(s[`get_${ne.Profile}`])),s[`get_${ne.Currency}_0`]&&s[`get_${ne.Currency}_1`]&&(this._currency=await this.parseCurrencyData({currencyBase:s[`get_${ne.Currency}_0`],currencyList:s[`get_${ne.Currency}_1`]})),s[`get_${ne.AppOptions}`]&&(this._appOptions=await this.parseOptionsData("app",s[`get_${ne.AppOptions}`])),s[`get_${ne.UserOptions}`]&&(this._userOptions=await this.parseOptionsData("user",s[`get_${ne.UserOptions}`])),this._isInit=!0}catch(s){throw s instanceof Error?s:(console.error("Error loading data:",s),new Error("Failed to load data"))}}async parseUserData(e){const t=new Ah(this._b24);return t.setLogger(this.getLogger()),t.initData({id:Number(e.ID),isAdmin:e.ADMIN===!0,lastName:e?.LAST_NAME||"",name:e?.NAME||"",gender:e?.PERSONAL_GENDER||"",photo:e?.PERSONAL_PHOTO||"",TimeZone:e?.TIME_ZONE||"",TimeZoneOffset:e?.TIME_ZONE_OFFSET}).then(()=>t)}async parseAppData(e){const t=new Ih(this._b24);return t.setLogger(this.getLogger()),t.initData({id:Number.parseInt(e.ID),code:e.CODE,version:Number.parseInt(e.VERSION),status:e.STATUS,isInstalled:e.INSTALLED}).then(()=>t)}async parsePaymentData(e){const t=new Ch(this._b24);return t.setLogger(this.getLogger()),t.initData({isExpired:e.PAYMENT_EXPIRED==="Y",days:Number.parseInt(e.DAYS||"0")}).then(()=>t)}async parseLicenseData(e){const t=new Nh(this._b24);return t.setLogger(this.getLogger()),t.initData({languageId:e.LANGUAGE_ID,license:e.LICENSE,licensePrevious:e.LICENSE_PREVIOUS,licenseType:e.LICENSE_TYPE,licenseFamily:e.LICENSE_FAMILY,isSelfHosted:e.LICENSE.includes("selfhosted")}).then(()=>t)}async parseCurrencyData(e){const t=new Rh(this._b24);return t.setLogger(this.getLogger()),t.initData(e).then(()=>t)}async parseOptionsData(e,t){const n=new Wn(this._b24,e);return n.setLogger(this.getLogger()),n.initData(t).then(()=>n)}get isInit(){return this._isInit}get forB24Form(){if(this.ensureInitialized(),this._profile===null)throw new Error("B24HelperManager.profileInfo not initialized");if(this._app===null)throw new Error("B24HelperManager.appInfo not initialized");return{app_code:this.appInfo.data.code,app_status:this.appInfo.data.status,payment_expired:this.paymentInfo.data.isExpired?"Y":"N",days:this.paymentInfo.data.days,b24_plan:this.licenseInfo.data.license,c_name:this.profileInfo.data.name,c_last_name:this.profileInfo.data.lastName,hostname:this.hostName}}get hostName(){return this._b24.getTargetOrigin()}get profileInfo(){if(this.ensureInitialized(),this._profile===null)throw new Error("B24HelperManager.profileInfo not initialized");return this._profile}get appInfo(){if(this.ensureInitialized(),this._app===null)throw new Error("B24HelperManager.appInfo not initialized");return this._app}get paymentInfo(){if(this.ensureInitialized(),this._payment===null)throw new Error("B24HelperManager.paymentInfo not initialized");return this._payment}get licenseInfo(){if(this.ensureInitialized(),this._license===null)throw new Error("B24HelperManager.licenseInfo not initialized");return this._license}get currency(){if(this.ensureInitialized(),this._currency===null)throw new Error("B24HelperManager.currency not initialized");return this._currency}get appOptions(){if(this.ensureInitialized(),this._appOptions===null)throw new Error("B24HelperManager.appOptions not initialized");return this._appOptions}get userOptions(){if(this.ensureInitialized(),this._userOptions===null)throw new Error("B24HelperManager.userOptions not initialized");return this._userOptions}get isSelfHosted(){return this.licenseInfo.data.isSelfHosted}get primaryKeyIncrementValue(){return this.isSelfHosted?1:2}get b24SpecificUrl(){return this.isSelfHosted?{[yt.MainSettings]:"/configs/",[yt.UfList]:"/configs/userfield_list.php",[yt.UfPage]:"/configs/userfield.php"}:{[yt.MainSettings]:"/settings/configs/",[yt.UfList]:"/settings/configs/userfield_list.php",[yt.UfPage]:"/settings/configs/userfield.php"}}usePullClient(e="prefix",t){return this._b24PullClient?this:(this.initializePullClient(typeof t>"u"?this.profileInfo.data.id||0:t,e),this)}initializePullClient(e,t="prefix"){this._b24PullClient=new ea({b24:this._b24,restApplication:this._b24.auth.getUniq(t),userId:e})}subscribePullClient(e,t="application"){if(!this._b24PullClient)throw new Error("PullClient not init");return this._pullClientModuleId=t,this._pullClientUnSubscribe.push(this._b24PullClient.subscribe({moduleId:this._pullClientModuleId,callback:e})),this}startPullClient(){if(!this._b24PullClient)throw new Error("PullClient not init");this._b24PullClient.start().catch(e=>{this.getLogger().error(`${V.getDateForLog()}: Pull not running`,e)})}getModuleIdPullClient(){if(!this._b24PullClient)throw new Error("PullClient not init");return this._pullClientModuleId}_destroyPullClient(){for(const e of this._pullClientUnSubscribe)e();this._b24PullClient?.destroy(),this._b24PullClient=null}ensureInitialized(){if(!this._isInit)throw new Error("B24HelperManager not initialized")}}const Kh=()=>{let r=!1,e=!1,t=null;return{initB24Helper:async(n,s=[ne.App,ne.Profile])=>(t===null&&(t=new Yh(n)),r?t:t.loadData(s).then(()=>(r=!0,t))),isInitB24Helper:()=>r,destroyB24Helper:()=>{t?.destroy(),t=null,r=!1,e=!1},getB24Helper:()=>{if(t===null)throw new Error("B24HelperManager is not initialized. You need to call initB24Helper first.");return t},usePullClient:()=>{if(t===null)throw new Error("B24HelperManager is not initialized. You need to call initB24Helper first.");t.usePullClient(),e=!0},useSubscribePullClient:(n,s="application")=>{if(!e)throw new Error("PullClient is not initialized. You need to call usePullClient first.");t?.subscribePullClient(n,s)},startPullClient:()=>{if(!e)throw new Error("PullClient is not initialized. You need to call usePullClient first.");t?.startPullClient()}}},Qh=50;let ht=null,Br=!1,Bt=null,ta=!1,Ur=[],ra=!1;function na(){window.setTimeout(()=>{if(!Br||ht===null){na();return}Xh(),Ur=[]},Qh)}function Xh(){if(Bt!==null)for(const r of Ur)r.reject(Bt);if(!(!Br||ht===null))for(const r of Ur)r.resolve(ht)}async function ef(){return Br&&ht!==null?Promise.resolve(ht):ta?(ra||(ra=!0,na()),new Promise((r,e)=>{Ur.push({resolve:r,reject:e})})):(ta=!0,new Promise((r,e)=>{const t={DOMAIN:null,PROTOCOL:!1,APP_SID:null,LANG:null};if(window.name){const[n,s,i]=window.name.split("|");t.DOMAIN=n,t.PROTOCOL=Number.parseInt(s)===1,t.APP_SID=i,t.LANG=null}(!t.DOMAIN||!t.APP_SID)&&(Bt=new Error("Unable to initialize Bitrix24Frame library!"),e(Bt)),ht=new Wo(t),ht.init().then(()=>{Br=!0,r(ht)}).catch(n=>{Bt=n,e(Bt)})}))}R.AbstractB24=kt,R.AjaxError=xe,R.AjaxResult=Tr,R.AppFrame=Mo,R.AuthHookManager=Po,R.AuthManager=Fo,R.AuthOAuthManager=Vo,R.B24Frame=Wo,R.B24Hook=Un,R.B24LangList=Bn,R.B24LocaleMap=_h,R.B24OAuth=Oh,R.B24PullClientManager=ea,R.Browser=Ci,R.CatalogProductImageType=Di,R.CatalogProductType=Pi,R.CatalogRoundingRuleType=Mi,R.CloseReasons=_e,R.ConnectionType=se,R.DataType=Yn,R.DialogManager=Bo,R.EnumAppStatus=et,R.EnumBitrix24Edition=Fi,R.EnumBizprocBaseType=xi,R.EnumBizprocDocumentType=ji,R.EnumCrmEntityType=Ri,R.EnumCrmEntityTypeId=Ve,R.EnumCrmEntityTypeShort=yn,R.ListRpcError=Sn,R.LoadDataType=ne,R.LoggerBrowser=we,R.LoggerType=I,R.LsKeys=Re,R.MessageCommands=ee,R.MessageManager=Do,R.OptionsManager=jo,R.ParentManager=xo,R.PlacementManager=$o,R.ProductRowDiscountTypeId=Li,R.PullStatus=Le,R.RestrictionManagerParamsBase=Ni,R.RestrictionManagerParamsForEnterprise=mn,R.Result=qe,R.RpcMethod=Je,R.SenderType=Er,R.ServerMode=bn,R.SliderManager=Uo,R.StatusDescriptions=Bi,R.SubscriptionType=Pe,R.SystemCommands=Qt,R.Text=V,R.Type=C,R.TypeOption=tt,R.TypeSpecificUrl=yt,R.convertBizprocDocumentTypeToCrmEntityTypeId=wc,R.getDocumentId=bc,R.getDocumentType=wn,R.getDocumentTypeForFilter=Sc,R.getEnumCrmEntityTypeShort=yc,R.getEnumValue=ha,R.initializeB24Frame=ef,R.isArrayOfArray=ua,R.omit=Kn,R.pick=ca,R.useB24Helper=Kh,R.useFormatter=Eh}));
//# sourceMappingURL=index.min.js.map
